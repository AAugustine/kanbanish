(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const d of c.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&s(d)}).observe(document,{childList:!0,subtree:!0});function n(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerPolicy&&(c.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?c.credentials="include":o.crossOrigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function s(o){if(o.ep)return;o.ep=!0;const c=n(o);fetch(o.href,c)}})();function So(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var lf={exports:{}},Ka={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zy;function SC(){if(zy)return Ka;zy=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(s,o,c){var d=null;if(c!==void 0&&(d=""+c),o.key!==void 0&&(d=""+o.key),"key"in o){c={};for(var h in o)h!=="key"&&(c[h]=o[h])}else c=o;return o=c.ref,{$$typeof:i,type:s,key:d,ref:o!==void 0?o:null,props:c}}return Ka.Fragment=e,Ka.jsx=n,Ka.jsxs=n,Ka}var Hy;function TC(){return Hy||(Hy=1,lf.exports=SC()),lf.exports}var v=TC(),cf={exports:{}},xe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var By;function CC(){if(By)return xe;By=1;var i=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),c=Symbol.for("react.consumer"),d=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),_=Symbol.for("react.lazy"),b=Symbol.iterator;function E(T){return T===null||typeof T!="object"?null:(T=b&&T[b]||T["@@iterator"],typeof T=="function"?T:null)}var O={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,P={};function N(T,V,I){this.props=T,this.context=V,this.refs=P,this.updater=I||O}N.prototype.isReactComponent={},N.prototype.setState=function(T,V){if(typeof T!="object"&&typeof T!="function"&&T!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,T,V,"setState")},N.prototype.forceUpdate=function(T){this.updater.enqueueForceUpdate(this,T,"forceUpdate")};function U(){}U.prototype=N.prototype;function F(T,V,I){this.props=T,this.context=V,this.refs=P,this.updater=I||O}var te=F.prototype=new U;te.constructor=F,C(te,N.prototype),te.isPureReactComponent=!0;var K=Array.isArray,z={H:null,A:null,T:null,S:null,V:null},se=Object.prototype.hasOwnProperty;function de(T,V,I,$,ee,pe){return I=pe.ref,{$$typeof:i,type:T,key:V,ref:I!==void 0?I:null,props:pe}}function ae(T,V){return de(T.type,V,void 0,void 0,void 0,T.props)}function ue(T){return typeof T=="object"&&T!==null&&T.$$typeof===i}function Ne(T){var V={"=":"=0",":":"=2"};return"$"+T.replace(/[=:]/g,function(I){return V[I]})}var be=/\/+/g;function fe(T,V){return typeof T=="object"&&T!==null&&T.key!=null?Ne(""+T.key):V.toString(36)}function we(){}function Ke(T){switch(T.status){case"fulfilled":return T.value;case"rejected":throw T.reason;default:switch(typeof T.status=="string"?T.then(we,we):(T.status="pending",T.then(function(V){T.status==="pending"&&(T.status="fulfilled",T.value=V)},function(V){T.status==="pending"&&(T.status="rejected",T.reason=V)})),T.status){case"fulfilled":return T.value;case"rejected":throw T.reason}}throw T}function Le(T,V,I,$,ee){var pe=typeof T;(pe==="undefined"||pe==="boolean")&&(T=null);var B=!1;if(T===null)B=!0;else switch(pe){case"bigint":case"string":case"number":B=!0;break;case"object":switch(T.$$typeof){case i:case e:B=!0;break;case _:return B=T._init,Le(B(T._payload),V,I,$,ee)}}if(B)return ee=ee(T),B=$===""?"."+fe(T,0):$,K(ee)?(I="",B!=null&&(I=B.replace(be,"$&/")+"/"),Le(ee,V,I,"",function(Ce){return Ce})):ee!=null&&(ue(ee)&&(ee=ae(ee,I+(ee.key==null||T&&T.key===ee.key?"":(""+ee.key).replace(be,"$&/")+"/")+B)),V.push(ee)),1;B=0;var q=$===""?".":$+":";if(K(T))for(var ne=0;ne<T.length;ne++)$=T[ne],pe=q+fe($,ne),B+=Le($,V,I,pe,ee);else if(ne=E(T),typeof ne=="function")for(T=ne.call(T),ne=0;!($=T.next()).done;)$=$.value,pe=q+fe($,ne++),B+=Le($,V,I,pe,ee);else if(pe==="object"){if(typeof T.then=="function")return Le(Ke(T),V,I,$,ee);throw V=String(T),Error("Objects are not valid as a React child (found: "+(V==="[object Object]"?"object with keys {"+Object.keys(T).join(", ")+"}":V)+"). If you meant to render a collection of children, use an array instead.")}return B}function j(T,V,I){if(T==null)return T;var $=[],ee=0;return Le(T,$,"","",function(pe){return V.call(I,pe,ee++)}),$}function Z(T){if(T._status===-1){var V=T._result;V=V(),V.then(function(I){(T._status===0||T._status===-1)&&(T._status=1,T._result=I)},function(I){(T._status===0||T._status===-1)&&(T._status=2,T._result=I)}),T._status===-1&&(T._status=0,T._result=V)}if(T._status===1)return T._result.default;throw T._result}var le=typeof reportError=="function"?reportError:function(T){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var V=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof T=="object"&&T!==null&&typeof T.message=="string"?String(T.message):String(T),error:T});if(!window.dispatchEvent(V))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",T);return}console.error(T)};function Oe(){}return xe.Children={map:j,forEach:function(T,V,I){j(T,function(){V.apply(this,arguments)},I)},count:function(T){var V=0;return j(T,function(){V++}),V},toArray:function(T){return j(T,function(V){return V})||[]},only:function(T){if(!ue(T))throw Error("React.Children.only expected to receive a single React element child.");return T}},xe.Component=N,xe.Fragment=n,xe.Profiler=o,xe.PureComponent=F,xe.StrictMode=s,xe.Suspense=p,xe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=z,xe.__COMPILER_RUNTIME={__proto__:null,c:function(T){return z.H.useMemoCache(T)}},xe.cache=function(T){return function(){return T.apply(null,arguments)}},xe.cloneElement=function(T,V,I){if(T==null)throw Error("The argument must be a React element, but you passed "+T+".");var $=C({},T.props),ee=T.key,pe=void 0;if(V!=null)for(B in V.ref!==void 0&&(pe=void 0),V.key!==void 0&&(ee=""+V.key),V)!se.call(V,B)||B==="key"||B==="__self"||B==="__source"||B==="ref"&&V.ref===void 0||($[B]=V[B]);var B=arguments.length-2;if(B===1)$.children=I;else if(1<B){for(var q=Array(B),ne=0;ne<B;ne++)q[ne]=arguments[ne+2];$.children=q}return de(T.type,ee,void 0,void 0,pe,$)},xe.createContext=function(T){return T={$$typeof:d,_currentValue:T,_currentValue2:T,_threadCount:0,Provider:null,Consumer:null},T.Provider=T,T.Consumer={$$typeof:c,_context:T},T},xe.createElement=function(T,V,I){var $,ee={},pe=null;if(V!=null)for($ in V.key!==void 0&&(pe=""+V.key),V)se.call(V,$)&&$!=="key"&&$!=="__self"&&$!=="__source"&&(ee[$]=V[$]);var B=arguments.length-2;if(B===1)ee.children=I;else if(1<B){for(var q=Array(B),ne=0;ne<B;ne++)q[ne]=arguments[ne+2];ee.children=q}if(T&&T.defaultProps)for($ in B=T.defaultProps,B)ee[$]===void 0&&(ee[$]=B[$]);return de(T,pe,void 0,void 0,null,ee)},xe.createRef=function(){return{current:null}},xe.forwardRef=function(T){return{$$typeof:h,render:T}},xe.isValidElement=ue,xe.lazy=function(T){return{$$typeof:_,_payload:{_status:-1,_result:T},_init:Z}},xe.memo=function(T,V){return{$$typeof:g,type:T,compare:V===void 0?null:V}},xe.startTransition=function(T){var V=z.T,I={};z.T=I;try{var $=T(),ee=z.S;ee!==null&&ee(I,$),typeof $=="object"&&$!==null&&typeof $.then=="function"&&$.then(Oe,le)}catch(pe){le(pe)}finally{z.T=V}},xe.unstable_useCacheRefresh=function(){return z.H.useCacheRefresh()},xe.use=function(T){return z.H.use(T)},xe.useActionState=function(T,V,I){return z.H.useActionState(T,V,I)},xe.useCallback=function(T,V){return z.H.useCallback(T,V)},xe.useContext=function(T){return z.H.useContext(T)},xe.useDebugValue=function(){},xe.useDeferredValue=function(T,V){return z.H.useDeferredValue(T,V)},xe.useEffect=function(T,V,I){var $=z.H;if(typeof I=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return $.useEffect(T,V)},xe.useId=function(){return z.H.useId()},xe.useImperativeHandle=function(T,V,I){return z.H.useImperativeHandle(T,V,I)},xe.useInsertionEffect=function(T,V){return z.H.useInsertionEffect(T,V)},xe.useLayoutEffect=function(T,V){return z.H.useLayoutEffect(T,V)},xe.useMemo=function(T,V){return z.H.useMemo(T,V)},xe.useOptimistic=function(T,V){return z.H.useOptimistic(T,V)},xe.useReducer=function(T,V,I){return z.H.useReducer(T,V,I)},xe.useRef=function(T){return z.H.useRef(T)},xe.useState=function(T){return z.H.useState(T)},xe.useSyncExternalStore=function(T,V,I){return z.H.useSyncExternalStore(T,V,I)},xe.useTransition=function(){return z.H.useTransition()},xe.version="19.1.0",xe}var Vy;function jh(){return Vy||(Vy=1,cf.exports=CC()),cf.exports}var D=jh();const X=So(D);var uf={exports:{}},Xa={},df={exports:{}},ff={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gy;function wC(){return Gy||(Gy=1,function(i){function e(j,Z){var le=j.length;j.push(Z);e:for(;0<le;){var Oe=le-1>>>1,T=j[Oe];if(0<o(T,Z))j[Oe]=Z,j[le]=T,le=Oe;else break e}}function n(j){return j.length===0?null:j[0]}function s(j){if(j.length===0)return null;var Z=j[0],le=j.pop();if(le!==Z){j[0]=le;e:for(var Oe=0,T=j.length,V=T>>>1;Oe<V;){var I=2*(Oe+1)-1,$=j[I],ee=I+1,pe=j[ee];if(0>o($,le))ee<T&&0>o(pe,$)?(j[Oe]=pe,j[ee]=le,Oe=ee):(j[Oe]=$,j[I]=le,Oe=I);else if(ee<T&&0>o(pe,le))j[Oe]=pe,j[ee]=le,Oe=ee;else break e}}return Z}function o(j,Z){var le=j.sortIndex-Z.sortIndex;return le!==0?le:j.id-Z.id}if(i.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var c=performance;i.unstable_now=function(){return c.now()}}else{var d=Date,h=d.now();i.unstable_now=function(){return d.now()-h}}var p=[],g=[],_=1,b=null,E=3,O=!1,C=!1,P=!1,N=!1,U=typeof setTimeout=="function"?setTimeout:null,F=typeof clearTimeout=="function"?clearTimeout:null,te=typeof setImmediate<"u"?setImmediate:null;function K(j){for(var Z=n(g);Z!==null;){if(Z.callback===null)s(g);else if(Z.startTime<=j)s(g),Z.sortIndex=Z.expirationTime,e(p,Z);else break;Z=n(g)}}function z(j){if(P=!1,K(j),!C)if(n(p)!==null)C=!0,se||(se=!0,fe());else{var Z=n(g);Z!==null&&Le(z,Z.startTime-j)}}var se=!1,de=-1,ae=5,ue=-1;function Ne(){return N?!0:!(i.unstable_now()-ue<ae)}function be(){if(N=!1,se){var j=i.unstable_now();ue=j;var Z=!0;try{e:{C=!1,P&&(P=!1,F(de),de=-1),O=!0;var le=E;try{t:{for(K(j),b=n(p);b!==null&&!(b.expirationTime>j&&Ne());){var Oe=b.callback;if(typeof Oe=="function"){b.callback=null,E=b.priorityLevel;var T=Oe(b.expirationTime<=j);if(j=i.unstable_now(),typeof T=="function"){b.callback=T,K(j),Z=!0;break t}b===n(p)&&s(p),K(j)}else s(p);b=n(p)}if(b!==null)Z=!0;else{var V=n(g);V!==null&&Le(z,V.startTime-j),Z=!1}}break e}finally{b=null,E=le,O=!1}Z=void 0}}finally{Z?fe():se=!1}}}var fe;if(typeof te=="function")fe=function(){te(be)};else if(typeof MessageChannel<"u"){var we=new MessageChannel,Ke=we.port2;we.port1.onmessage=be,fe=function(){Ke.postMessage(null)}}else fe=function(){U(be,0)};function Le(j,Z){de=U(function(){j(i.unstable_now())},Z)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(j){j.callback=null},i.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ae=0<j?Math.floor(1e3/j):5},i.unstable_getCurrentPriorityLevel=function(){return E},i.unstable_next=function(j){switch(E){case 1:case 2:case 3:var Z=3;break;default:Z=E}var le=E;E=Z;try{return j()}finally{E=le}},i.unstable_requestPaint=function(){N=!0},i.unstable_runWithPriority=function(j,Z){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var le=E;E=j;try{return Z()}finally{E=le}},i.unstable_scheduleCallback=function(j,Z,le){var Oe=i.unstable_now();switch(typeof le=="object"&&le!==null?(le=le.delay,le=typeof le=="number"&&0<le?Oe+le:Oe):le=Oe,j){case 1:var T=-1;break;case 2:T=250;break;case 5:T=1073741823;break;case 4:T=1e4;break;default:T=5e3}return T=le+T,j={id:_++,callback:Z,priorityLevel:j,startTime:le,expirationTime:T,sortIndex:-1},le>Oe?(j.sortIndex=le,e(g,j),n(p)===null&&j===n(g)&&(P?(F(de),de=-1):P=!0,Le(z,le-Oe))):(j.sortIndex=T,e(p,j),C||O||(C=!0,se||(se=!0,fe()))),j},i.unstable_shouldYield=Ne,i.unstable_wrapCallback=function(j){var Z=E;return function(){var le=E;E=Z;try{return j.apply(this,arguments)}finally{E=le}}}}(ff)),ff}var $y;function OC(){return $y||($y=1,df.exports=wC()),df.exports}var hf={exports:{}},zt={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qy;function RC(){if(qy)return zt;qy=1;var i=jh();function e(p){var g="https://react.dev/errors/"+p;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var _=2;_<arguments.length;_++)g+="&args[]="+encodeURIComponent(arguments[_])}return"Minified React error #"+p+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var s={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function c(p,g,_){var b=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:b==null?null:""+b,children:p,containerInfo:g,implementation:_}}var d=i.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function h(p,g){if(p==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return zt.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=s,zt.createPortal=function(p,g){var _=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return c(p,g,null,_)},zt.flushSync=function(p){var g=d.T,_=s.p;try{if(d.T=null,s.p=2,p)return p()}finally{d.T=g,s.p=_,s.d.f()}},zt.preconnect=function(p,g){typeof p=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,s.d.C(p,g))},zt.prefetchDNS=function(p){typeof p=="string"&&s.d.D(p)},zt.preinit=function(p,g){if(typeof p=="string"&&g&&typeof g.as=="string"){var _=g.as,b=h(_,g.crossOrigin),E=typeof g.integrity=="string"?g.integrity:void 0,O=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;_==="style"?s.d.S(p,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:b,integrity:E,fetchPriority:O}):_==="script"&&s.d.X(p,{crossOrigin:b,integrity:E,fetchPriority:O,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},zt.preinitModule=function(p,g){if(typeof p=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var _=h(g.as,g.crossOrigin);s.d.M(p,{crossOrigin:_,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&s.d.M(p)},zt.preload=function(p,g){if(typeof p=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var _=g.as,b=h(_,g.crossOrigin);s.d.L(p,_,{crossOrigin:b,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},zt.preloadModule=function(p,g){if(typeof p=="string")if(g){var _=h(g.as,g.crossOrigin);s.d.m(p,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:_,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else s.d.m(p)},zt.requestFormReset=function(p){s.d.r(p)},zt.unstable_batchedUpdates=function(p,g){return p(g)},zt.useFormState=function(p,g,_){return d.H.useFormState(p,g,_)},zt.useFormStatus=function(){return d.H.useHostTransitionStatus()},zt.version="19.1.0",zt}var Yy;function Cb(){if(Yy)return hf.exports;Yy=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),hf.exports=RC(),hf.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fy;function NC(){if(Fy)return Xa;Fy=1;var i=OC(),e=jh(),n=Cb();function s(t){var r="https://react.dev/errors/"+t;if(1<arguments.length){r+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)r+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function c(t){var r=t,a=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,(r.flags&4098)!==0&&(a=r.return),t=r.return;while(t)}return r.tag===3?a:null}function d(t){if(t.tag===13){var r=t.memoizedState;if(r===null&&(t=t.alternate,t!==null&&(r=t.memoizedState)),r!==null)return r.dehydrated}return null}function h(t){if(c(t)!==t)throw Error(s(188))}function p(t){var r=t.alternate;if(!r){if(r=c(t),r===null)throw Error(s(188));return r!==t?null:t}for(var a=t,l=r;;){var u=a.return;if(u===null)break;var f=u.alternate;if(f===null){if(l=u.return,l!==null){a=l;continue}break}if(u.child===f.child){for(f=u.child;f;){if(f===a)return h(u),t;if(f===l)return h(u),r;f=f.sibling}throw Error(s(188))}if(a.return!==l.return)a=u,l=f;else{for(var m=!1,y=u.child;y;){if(y===a){m=!0,a=u,l=f;break}if(y===l){m=!0,l=u,a=f;break}y=y.sibling}if(!m){for(y=f.child;y;){if(y===a){m=!0,a=f,l=u;break}if(y===l){m=!0,l=f,a=u;break}y=y.sibling}if(!m)throw Error(s(189))}}if(a.alternate!==l)throw Error(s(190))}if(a.tag!==3)throw Error(s(188));return a.stateNode.current===a?t:r}function g(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t;for(t=t.child;t!==null;){if(r=g(t),r!==null)return r;t=t.sibling}return null}var _=Object.assign,b=Symbol.for("react.element"),E=Symbol.for("react.transitional.element"),O=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),P=Symbol.for("react.strict_mode"),N=Symbol.for("react.profiler"),U=Symbol.for("react.provider"),F=Symbol.for("react.consumer"),te=Symbol.for("react.context"),K=Symbol.for("react.forward_ref"),z=Symbol.for("react.suspense"),se=Symbol.for("react.suspense_list"),de=Symbol.for("react.memo"),ae=Symbol.for("react.lazy"),ue=Symbol.for("react.activity"),Ne=Symbol.for("react.memo_cache_sentinel"),be=Symbol.iterator;function fe(t){return t===null||typeof t!="object"?null:(t=be&&t[be]||t["@@iterator"],typeof t=="function"?t:null)}var we=Symbol.for("react.client.reference");function Ke(t){if(t==null)return null;if(typeof t=="function")return t.$$typeof===we?null:t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case C:return"Fragment";case N:return"Profiler";case P:return"StrictMode";case z:return"Suspense";case se:return"SuspenseList";case ue:return"Activity"}if(typeof t=="object")switch(t.$$typeof){case O:return"Portal";case te:return(t.displayName||"Context")+".Provider";case F:return(t._context.displayName||"Context")+".Consumer";case K:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case de:return r=t.displayName||null,r!==null?r:Ke(t.type)||"Memo";case ae:r=t._payload,t=t._init;try{return Ke(t(r))}catch{}}return null}var Le=Array.isArray,j=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Z=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,le={pending:!1,data:null,method:null,action:null},Oe=[],T=-1;function V(t){return{current:t}}function I(t){0>T||(t.current=Oe[T],Oe[T]=null,T--)}function $(t,r){T++,Oe[T]=t.current,t.current=r}var ee=V(null),pe=V(null),B=V(null),q=V(null);function ne(t,r){switch($(B,r),$(pe,t),$(ee,null),r.nodeType){case 9:case 11:t=(t=r.documentElement)&&(t=t.namespaceURI)?hy(t):0;break;default:if(t=r.tagName,r=r.namespaceURI)r=hy(r),t=py(r,t);else switch(t){case"svg":t=1;break;case"math":t=2;break;default:t=0}}I(ee),$(ee,t)}function Ce(){I(ee),I(pe),I(B)}function Fe(t){t.memoizedState!==null&&$(q,t);var r=ee.current,a=py(r,t.type);r!==a&&($(pe,t),$(ee,a))}function tt(t){pe.current===t&&(I(ee),I(pe)),q.current===t&&(I(q),qa._currentValue=le)}var Ve=Object.prototype.hasOwnProperty,Ei=i.unstable_scheduleCallback,sn=i.unstable_cancelCallback,Un=i.unstable_shouldYield,ta=i.unstable_requestPaint,Bt=i.unstable_now,na=i.unstable_getCurrentPriorityLevel,Br=i.unstable_ImmediatePriority,cr=i.unstable_UserBlockingPriority,Si=i.unstable_NormalPriority,He=i.unstable_LowPriority,pn=i.unstable_IdlePriority,Jc=i.log,Zp=i.unstable_setDisableYieldValue,Vr=null,Ft=null;function Wn(t){if(typeof Jc=="function"&&Zp(t),Ft&&typeof Ft.setStrictMode=="function")try{Ft.setStrictMode(Vr,t)}catch{}}var Wt=Math.clz32?Math.clz32:tg,Jp=Math.log,eg=Math.LN2;function tg(t){return t>>>=0,t===0?32:31-(Jp(t)/eg|0)|0}var Gr=256,L=4194304;function J(t){var r=t&42;if(r!==0)return r;switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return t&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return t}}function W(t,r,a){var l=t.pendingLanes;if(l===0)return 0;var u=0,f=t.suspendedLanes,m=t.pingedLanes;t=t.warmLanes;var y=l&134217727;return y!==0?(l=y&~f,l!==0?u=J(l):(m&=y,m!==0?u=J(m):a||(a=y&~t,a!==0&&(u=J(a))))):(y=l&~f,y!==0?u=J(y):m!==0?u=J(m):a||(a=l&~t,a!==0&&(u=J(a)))),u===0?0:r!==0&&r!==u&&(r&f)===0&&(f=u&-u,a=r&-r,f>=a||f===32&&(a&4194048)!==0)?r:u}function re(t,r){return(t.pendingLanes&~(t.suspendedLanes&~t.pingedLanes)&r)===0}function ge(t,r){switch(t){case 1:case 2:case 4:case 8:case 64:return r+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ie(){var t=Gr;return Gr<<=1,(Gr&4194048)===0&&(Gr=256),t}function Ge(){var t=L;return L<<=1,(L&62914560)===0&&(L=4194304),t}function rt(t){for(var r=[],a=0;31>a;a++)r.push(t);return r}function vt(t,r){t.pendingLanes|=r,r!==268435456&&(t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0)}function wt(t,r,a,l,u,f){var m=t.pendingLanes;t.pendingLanes=a,t.suspendedLanes=0,t.pingedLanes=0,t.warmLanes=0,t.expiredLanes&=a,t.entangledLanes&=a,t.errorRecoveryDisabledLanes&=a,t.shellSuspendCounter=0;var y=t.entanglements,S=t.expirationTimes,A=t.hiddenUpdates;for(a=m&~a;0<a;){var H=31-Wt(a),Y=1<<H;y[H]=0,S[H]=-1;var k=A[H];if(k!==null)for(A[H]=null,H=0;H<k.length;H++){var M=k[H];M!==null&&(M.lane&=-536870913)}a&=~Y}l!==0&&an(t,l,0),f!==0&&u===0&&t.tag!==0&&(t.suspendedLanes|=f&~(m&~r))}function an(t,r,a){t.pendingLanes|=r,t.suspendedLanes&=~r;var l=31-Wt(r);t.entangledLanes|=r,t.entanglements[l]=t.entanglements[l]|1073741824|a&4194090}function bt(t,r){var a=t.entangledLanes|=r;for(t=t.entanglements;a;){var l=31-Wt(a),u=1<<l;u&r|t[l]&r&&(t[l]|=r),a&=~u}}function Pt(t){switch(t){case 2:t=1;break;case 8:t=4;break;case 32:t=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:t=128;break;case 268435456:t=134217728;break;default:t=0}return t}function Vt(t){return t&=-t,2<t?8<t?(t&134217727)!==0?32:268435456:8:2}function $r(){var t=Z.p;return t!==0?t:(t=window.event,t===void 0?32:ky(t.type))}function Lo(t,r){var a=Z.p;try{return Z.p=t,r()}finally{Z.p=a}}var Ot=Math.random().toString(36).slice(2),pt="__reactFiber$"+Ot,ct="__reactProps$"+Ot,Qt="__reactContainer$"+Ot,Qn="__reactEvents$"+Ot,gn="__reactListeners$"+Ot,qr="__reactHandles$"+Ot,Yr="__reactResources$"+Ot,Kn="__reactMarker$"+Ot;function eu(t){delete t[pt],delete t[ct],delete t[Qn],delete t[gn],delete t[qr]}function Fr(t){var r=t[pt];if(r)return r;for(var a=t.parentNode;a;){if(r=a[Qt]||a[pt]){if(a=r.alternate,r.child!==null||a!==null&&a.child!==null)for(t=yy(t);t!==null;){if(a=t[pt])return a;t=yy(t)}return r}t=a,a=t.parentNode}return null}function Wr(t){if(t=t[pt]||t[Qt]){var r=t.tag;if(r===5||r===6||r===13||r===26||r===27||r===3)return t}return null}function ia(t){var r=t.tag;if(r===5||r===26||r===27||r===6)return t.stateNode;throw Error(s(33))}function Qr(t){var r=t[Yr];return r||(r=t[Yr]={hoistableStyles:new Map,hoistableScripts:new Map}),r}function Rt(t){t[Kn]=!0}var ng=new Set,ig={};function ur(t,r){Kr(t,r),Kr(t+"Capture",r)}function Kr(t,r){for(ig[t]=r,t=0;t<r.length;t++)ng.add(r[t])}var pS=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),rg={},sg={};function gS(t){return Ve.call(sg,t)?!0:Ve.call(rg,t)?!1:pS.test(t)?sg[t]=!0:(rg[t]=!0,!1)}function Po(t,r,a){if(gS(r))if(a===null)t.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":t.removeAttribute(r);return;case"boolean":var l=r.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){t.removeAttribute(r);return}}t.setAttribute(r,""+a)}}function Uo(t,r,a){if(a===null)t.removeAttribute(r);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(r);return}t.setAttribute(r,""+a)}}function Xn(t,r,a,l){if(l===null)t.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":t.removeAttribute(a);return}t.setAttributeNS(r,a,""+l)}}var tu,ag;function Xr(t){if(tu===void 0)try{throw Error()}catch(a){var r=a.stack.trim().match(/\n( *(at )?)/);tu=r&&r[1]||"",ag=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+tu+t+ag}var nu=!1;function iu(t,r){if(!t||nu)return"";nu=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(r){var Y=function(){throw Error()};if(Object.defineProperty(Y.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Y,[])}catch(M){var k=M}Reflect.construct(t,[],Y)}else{try{Y.call()}catch(M){k=M}t.call(Y.prototype)}}else{try{throw Error()}catch(M){k=M}(Y=t())&&typeof Y.catch=="function"&&Y.catch(function(){})}}catch(M){if(M&&k&&typeof M.stack=="string")return[M.stack,k.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var u=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");u&&u.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var f=l.DetermineComponentFrameRoot(),m=f[0],y=f[1];if(m&&y){var S=m.split(`
`),A=y.split(`
`);for(u=l=0;l<S.length&&!S[l].includes("DetermineComponentFrameRoot");)l++;for(;u<A.length&&!A[u].includes("DetermineComponentFrameRoot");)u++;if(l===S.length||u===A.length)for(l=S.length-1,u=A.length-1;1<=l&&0<=u&&S[l]!==A[u];)u--;for(;1<=l&&0<=u;l--,u--)if(S[l]!==A[u]){if(l!==1||u!==1)do if(l--,u--,0>u||S[l]!==A[u]){var H=`
`+S[l].replace(" at new "," at ");return t.displayName&&H.includes("<anonymous>")&&(H=H.replace("<anonymous>",t.displayName)),H}while(1<=l&&0<=u);break}}}finally{nu=!1,Error.prepareStackTrace=a}return(a=t?t.displayName||t.name:"")?Xr(a):""}function mS(t){switch(t.tag){case 26:case 27:case 5:return Xr(t.type);case 16:return Xr("Lazy");case 13:return Xr("Suspense");case 19:return Xr("SuspenseList");case 0:case 15:return iu(t.type,!1);case 11:return iu(t.type.render,!1);case 1:return iu(t.type,!0);case 31:return Xr("Activity");default:return""}}function og(t){try{var r="";do r+=mS(t),t=t.return;while(t);return r}catch(a){return`
Error generating stack: `+a.message+`
`+a.stack}}function mn(t){switch(typeof t){case"bigint":case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function lg(t){var r=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(r==="checkbox"||r==="radio")}function vS(t){var r=lg(t)?"checked":"value",a=Object.getOwnPropertyDescriptor(t.constructor.prototype,r),l=""+t[r];if(!t.hasOwnProperty(r)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var u=a.get,f=a.set;return Object.defineProperty(t,r,{configurable:!0,get:function(){return u.call(this)},set:function(m){l=""+m,f.call(this,m)}}),Object.defineProperty(t,r,{enumerable:a.enumerable}),{getValue:function(){return l},setValue:function(m){l=""+m},stopTracking:function(){t._valueTracker=null,delete t[r]}}}}function zo(t){t._valueTracker||(t._valueTracker=vS(t))}function cg(t){if(!t)return!1;var r=t._valueTracker;if(!r)return!0;var a=r.getValue(),l="";return t&&(l=lg(t)?t.checked?"true":"false":t.value),t=l,t!==a?(r.setValue(t),!0):!1}function Ho(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}var yS=/[\n"\\]/g;function vn(t){return t.replace(yS,function(r){return"\\"+r.charCodeAt(0).toString(16)+" "})}function ru(t,r,a,l,u,f,m,y){t.name="",m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"?t.type=m:t.removeAttribute("type"),r!=null?m==="number"?(r===0&&t.value===""||t.value!=r)&&(t.value=""+mn(r)):t.value!==""+mn(r)&&(t.value=""+mn(r)):m!=="submit"&&m!=="reset"||t.removeAttribute("value"),r!=null?su(t,m,mn(r)):a!=null?su(t,m,mn(a)):l!=null&&t.removeAttribute("value"),u==null&&f!=null&&(t.defaultChecked=!!f),u!=null&&(t.checked=u&&typeof u!="function"&&typeof u!="symbol"),y!=null&&typeof y!="function"&&typeof y!="symbol"&&typeof y!="boolean"?t.name=""+mn(y):t.removeAttribute("name")}function ug(t,r,a,l,u,f,m,y){if(f!=null&&typeof f!="function"&&typeof f!="symbol"&&typeof f!="boolean"&&(t.type=f),r!=null||a!=null){if(!(f!=="submit"&&f!=="reset"||r!=null))return;a=a!=null?""+mn(a):"",r=r!=null?""+mn(r):a,y||r===t.value||(t.value=r),t.defaultValue=r}l=l??u,l=typeof l!="function"&&typeof l!="symbol"&&!!l,t.checked=y?t.checked:!!l,t.defaultChecked=!!l,m!=null&&typeof m!="function"&&typeof m!="symbol"&&typeof m!="boolean"&&(t.name=m)}function su(t,r,a){r==="number"&&Ho(t.ownerDocument)===t||t.defaultValue===""+a||(t.defaultValue=""+a)}function Zr(t,r,a,l){if(t=t.options,r){r={};for(var u=0;u<a.length;u++)r["$"+a[u]]=!0;for(a=0;a<t.length;a++)u=r.hasOwnProperty("$"+t[a].value),t[a].selected!==u&&(t[a].selected=u),u&&l&&(t[a].defaultSelected=!0)}else{for(a=""+mn(a),r=null,u=0;u<t.length;u++){if(t[u].value===a){t[u].selected=!0,l&&(t[u].defaultSelected=!0);return}r!==null||t[u].disabled||(r=t[u])}r!==null&&(r.selected=!0)}}function dg(t,r,a){if(r!=null&&(r=""+mn(r),r!==t.value&&(t.value=r),a==null)){t.defaultValue!==r&&(t.defaultValue=r);return}t.defaultValue=a!=null?""+mn(a):""}function fg(t,r,a,l){if(r==null){if(l!=null){if(a!=null)throw Error(s(92));if(Le(l)){if(1<l.length)throw Error(s(93));l=l[0]}a=l}a==null&&(a=""),r=a}a=mn(r),t.defaultValue=a,l=t.textContent,l===a&&l!==""&&l!==null&&(t.value=l)}function Jr(t,r){if(r){var a=t.firstChild;if(a&&a===t.lastChild&&a.nodeType===3){a.nodeValue=r;return}}t.textContent=r}var _S=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function hg(t,r,a){var l=r.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?t.setProperty(r,""):r==="float"?t.cssFloat="":t[r]="":l?t.setProperty(r,a):typeof a!="number"||a===0||_S.has(r)?r==="float"?t.cssFloat=a:t[r]=(""+a).trim():t[r]=a+"px"}function pg(t,r,a){if(r!=null&&typeof r!="object")throw Error(s(62));if(t=t.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||r!=null&&r.hasOwnProperty(l)||(l.indexOf("--")===0?t.setProperty(l,""):l==="float"?t.cssFloat="":t[l]="");for(var u in r)l=r[u],r.hasOwnProperty(u)&&a[u]!==l&&hg(t,u,l)}else for(var f in r)r.hasOwnProperty(f)&&hg(t,f,r[f])}function au(t){if(t.indexOf("-")===-1)return!1;switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var bS=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ES=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Bo(t){return ES.test(""+t)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":t}var ou=null;function lu(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var es=null,ts=null;function gg(t){var r=Wr(t);if(r&&(t=r.stateNode)){var a=t[ct]||null;e:switch(t=r.stateNode,r.type){case"input":if(ru(t,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),r=a.name,a.type==="radio"&&r!=null){for(a=t;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+vn(""+r)+'"][type="radio"]'),r=0;r<a.length;r++){var l=a[r];if(l!==t&&l.form===t.form){var u=l[ct]||null;if(!u)throw Error(s(90));ru(l,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name)}}for(r=0;r<a.length;r++)l=a[r],l.form===t.form&&cg(l)}break e;case"textarea":dg(t,a.value,a.defaultValue);break e;case"select":r=a.value,r!=null&&Zr(t,!!a.multiple,r,!1)}}}var cu=!1;function mg(t,r,a){if(cu)return t(r,a);cu=!0;try{var l=t(r);return l}finally{if(cu=!1,(es!==null||ts!==null)&&(Ol(),es&&(r=es,t=ts,ts=es=null,gg(r),t)))for(r=0;r<t.length;r++)gg(t[r])}}function ra(t,r){var a=t.stateNode;if(a===null)return null;var l=a[ct]||null;if(l===null)return null;a=l[r];e:switch(r){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(t=t.type,l=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!l;break e;default:t=!1}if(t)return null;if(a&&typeof a!="function")throw Error(s(231,r,typeof a));return a}var Zn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),uu=!1;if(Zn)try{var sa={};Object.defineProperty(sa,"passive",{get:function(){uu=!0}}),window.addEventListener("test",sa,sa),window.removeEventListener("test",sa,sa)}catch{uu=!1}var Ti=null,du=null,Vo=null;function vg(){if(Vo)return Vo;var t,r=du,a=r.length,l,u="value"in Ti?Ti.value:Ti.textContent,f=u.length;for(t=0;t<a&&r[t]===u[t];t++);var m=a-t;for(l=1;l<=m&&r[a-l]===u[f-l];l++);return Vo=u.slice(t,1<l?1-l:void 0)}function Go(t){var r=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&r===13&&(t=13)):t=r,t===10&&(t=13),32<=t||t===13?t:0}function $o(){return!0}function yg(){return!1}function Kt(t){function r(a,l,u,f,m){this._reactName=a,this._targetInst=u,this.type=l,this.nativeEvent=f,this.target=m,this.currentTarget=null;for(var y in t)t.hasOwnProperty(y)&&(a=t[y],this[y]=a?a(f):f[y]);return this.isDefaultPrevented=(f.defaultPrevented!=null?f.defaultPrevented:f.returnValue===!1)?$o:yg,this.isPropagationStopped=yg,this}return _(r.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=$o)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=$o)},persist:function(){},isPersistent:$o}),r}var dr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},qo=Kt(dr),aa=_({},dr,{view:0,detail:0}),SS=Kt(aa),fu,hu,oa,Yo=_({},aa,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:gu,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==oa&&(oa&&t.type==="mousemove"?(fu=t.screenX-oa.screenX,hu=t.screenY-oa.screenY):hu=fu=0,oa=t),fu)},movementY:function(t){return"movementY"in t?t.movementY:hu}}),_g=Kt(Yo),TS=_({},Yo,{dataTransfer:0}),CS=Kt(TS),wS=_({},aa,{relatedTarget:0}),pu=Kt(wS),OS=_({},dr,{animationName:0,elapsedTime:0,pseudoElement:0}),RS=Kt(OS),NS=_({},dr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),xS=Kt(NS),AS=_({},dr,{data:0}),bg=Kt(AS),DS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},IS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function MS(t){var r=this.nativeEvent;return r.getModifierState?r.getModifierState(t):(t=kS[t])?!!r[t]:!1}function gu(){return MS}var jS=_({},aa,{key:function(t){if(t.key){var r=DS[t.key]||t.key;if(r!=="Unidentified")return r}return t.type==="keypress"?(t=Go(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?IS[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:gu,charCode:function(t){return t.type==="keypress"?Go(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Go(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),LS=Kt(jS),PS=_({},Yo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Eg=Kt(PS),US=_({},aa,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:gu}),zS=Kt(US),HS=_({},dr,{propertyName:0,elapsedTime:0,pseudoElement:0}),BS=Kt(HS),VS=_({},Yo,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),GS=Kt(VS),$S=_({},dr,{newState:0,oldState:0}),qS=Kt($S),YS=[9,13,27,32],mu=Zn&&"CompositionEvent"in window,la=null;Zn&&"documentMode"in document&&(la=document.documentMode);var FS=Zn&&"TextEvent"in window&&!la,Sg=Zn&&(!mu||la&&8<la&&11>=la),Tg=" ",Cg=!1;function wg(t,r){switch(t){case"keyup":return YS.indexOf(r.keyCode)!==-1;case"keydown":return r.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Og(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ns=!1;function WS(t,r){switch(t){case"compositionend":return Og(r);case"keypress":return r.which!==32?null:(Cg=!0,Tg);case"textInput":return t=r.data,t===Tg&&Cg?null:t;default:return null}}function QS(t,r){if(ns)return t==="compositionend"||!mu&&wg(t,r)?(t=vg(),Vo=du=Ti=null,ns=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(r.ctrlKey||r.altKey||r.metaKey)||r.ctrlKey&&r.altKey){if(r.char&&1<r.char.length)return r.char;if(r.which)return String.fromCharCode(r.which)}return null;case"compositionend":return Sg&&r.locale!=="ko"?null:r.data;default:return null}}var KS={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Rg(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r==="input"?!!KS[t.type]:r==="textarea"}function Ng(t,r,a,l){es?ts?ts.push(l):ts=[l]:es=l,r=Il(r,"onChange"),0<r.length&&(a=new qo("onChange","change",null,a,l),t.push({event:a,listeners:r}))}var ca=null,ua=null;function XS(t){ly(t,0)}function Fo(t){var r=ia(t);if(cg(r))return t}function xg(t,r){if(t==="change")return r}var Ag=!1;if(Zn){var vu;if(Zn){var yu="oninput"in document;if(!yu){var Dg=document.createElement("div");Dg.setAttribute("oninput","return;"),yu=typeof Dg.oninput=="function"}vu=yu}else vu=!1;Ag=vu&&(!document.documentMode||9<document.documentMode)}function Ig(){ca&&(ca.detachEvent("onpropertychange",kg),ua=ca=null)}function kg(t){if(t.propertyName==="value"&&Fo(ua)){var r=[];Ng(r,ua,t,lu(t)),mg(XS,r)}}function ZS(t,r,a){t==="focusin"?(Ig(),ca=r,ua=a,ca.attachEvent("onpropertychange",kg)):t==="focusout"&&Ig()}function JS(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Fo(ua)}function eT(t,r){if(t==="click")return Fo(r)}function tT(t,r){if(t==="input"||t==="change")return Fo(r)}function nT(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var on=typeof Object.is=="function"?Object.is:nT;function da(t,r){if(on(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var a=Object.keys(t),l=Object.keys(r);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var u=a[l];if(!Ve.call(r,u)||!on(t[u],r[u]))return!1}return!0}function Mg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function jg(t,r){var a=Mg(t);t=0;for(var l;a;){if(a.nodeType===3){if(l=t+a.textContent.length,t<=r&&l>=r)return{node:a,offset:r-t};t=l}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Mg(a)}}function Lg(t,r){return t&&r?t===r?!0:t&&t.nodeType===3?!1:r&&r.nodeType===3?Lg(t,r.parentNode):"contains"in t?t.contains(r):t.compareDocumentPosition?!!(t.compareDocumentPosition(r)&16):!1:!1}function Pg(t){t=t!=null&&t.ownerDocument!=null&&t.ownerDocument.defaultView!=null?t.ownerDocument.defaultView:window;for(var r=Ho(t.document);r instanceof t.HTMLIFrameElement;){try{var a=typeof r.contentWindow.location.href=="string"}catch{a=!1}if(a)t=r.contentWindow;else break;r=Ho(t.document)}return r}function _u(t){var r=t&&t.nodeName&&t.nodeName.toLowerCase();return r&&(r==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||r==="textarea"||t.contentEditable==="true")}var iT=Zn&&"documentMode"in document&&11>=document.documentMode,is=null,bu=null,fa=null,Eu=!1;function Ug(t,r,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Eu||is==null||is!==Ho(l)||(l=is,"selectionStart"in l&&_u(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),fa&&da(fa,l)||(fa=l,l=Il(bu,"onSelect"),0<l.length&&(r=new qo("onSelect","select",null,r,a),t.push({event:r,listeners:l}),r.target=is)))}function fr(t,r){var a={};return a[t.toLowerCase()]=r.toLowerCase(),a["Webkit"+t]="webkit"+r,a["Moz"+t]="moz"+r,a}var rs={animationend:fr("Animation","AnimationEnd"),animationiteration:fr("Animation","AnimationIteration"),animationstart:fr("Animation","AnimationStart"),transitionrun:fr("Transition","TransitionRun"),transitionstart:fr("Transition","TransitionStart"),transitioncancel:fr("Transition","TransitionCancel"),transitionend:fr("Transition","TransitionEnd")},Su={},zg={};Zn&&(zg=document.createElement("div").style,"AnimationEvent"in window||(delete rs.animationend.animation,delete rs.animationiteration.animation,delete rs.animationstart.animation),"TransitionEvent"in window||delete rs.transitionend.transition);function hr(t){if(Su[t])return Su[t];if(!rs[t])return t;var r=rs[t],a;for(a in r)if(r.hasOwnProperty(a)&&a in zg)return Su[t]=r[a];return t}var Hg=hr("animationend"),Bg=hr("animationiteration"),Vg=hr("animationstart"),rT=hr("transitionrun"),sT=hr("transitionstart"),aT=hr("transitioncancel"),Gg=hr("transitionend"),$g=new Map,Tu="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Tu.push("scrollEnd");function Nn(t,r){$g.set(t,r),ur(r,[t])}var qg=new WeakMap;function yn(t,r){if(typeof t=="object"&&t!==null){var a=qg.get(t);return a!==void 0?a:(r={value:t,source:r,stack:og(r)},qg.set(t,r),r)}return{value:t,source:r,stack:og(r)}}var _n=[],ss=0,Cu=0;function Wo(){for(var t=ss,r=Cu=ss=0;r<t;){var a=_n[r];_n[r++]=null;var l=_n[r];_n[r++]=null;var u=_n[r];_n[r++]=null;var f=_n[r];if(_n[r++]=null,l!==null&&u!==null){var m=l.pending;m===null?u.next=u:(u.next=m.next,m.next=u),l.pending=u}f!==0&&Yg(a,u,f)}}function Qo(t,r,a,l){_n[ss++]=t,_n[ss++]=r,_n[ss++]=a,_n[ss++]=l,Cu|=l,t.lanes|=l,t=t.alternate,t!==null&&(t.lanes|=l)}function wu(t,r,a,l){return Qo(t,r,a,l),Ko(t)}function as(t,r){return Qo(t,null,null,r),Ko(t)}function Yg(t,r,a){t.lanes|=a;var l=t.alternate;l!==null&&(l.lanes|=a);for(var u=!1,f=t.return;f!==null;)f.childLanes|=a,l=f.alternate,l!==null&&(l.childLanes|=a),f.tag===22&&(t=f.stateNode,t===null||t._visibility&1||(u=!0)),t=f,f=f.return;return t.tag===3?(f=t.stateNode,u&&r!==null&&(u=31-Wt(a),t=f.hiddenUpdates,l=t[u],l===null?t[u]=[r]:l.push(r),r.lane=a|536870912),f):null}function Ko(t){if(50<Pa)throw Pa=0,Dd=null,Error(s(185));for(var r=t.return;r!==null;)t=r,r=t.return;return t.tag===3?t.stateNode:null}var os={};function oT(t,r,a,l){this.tag=t,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ln(t,r,a,l){return new oT(t,r,a,l)}function Ou(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Jn(t,r){var a=t.alternate;return a===null?(a=ln(t.tag,r,t.key,t.mode),a.elementType=t.elementType,a.type=t.type,a.stateNode=t.stateNode,a.alternate=t,t.alternate=a):(a.pendingProps=r,a.type=t.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=t.flags&65011712,a.childLanes=t.childLanes,a.lanes=t.lanes,a.child=t.child,a.memoizedProps=t.memoizedProps,a.memoizedState=t.memoizedState,a.updateQueue=t.updateQueue,r=t.dependencies,a.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},a.sibling=t.sibling,a.index=t.index,a.ref=t.ref,a.refCleanup=t.refCleanup,a}function Fg(t,r){t.flags&=65011714;var a=t.alternate;return a===null?(t.childLanes=0,t.lanes=r,t.child=null,t.subtreeFlags=0,t.memoizedProps=null,t.memoizedState=null,t.updateQueue=null,t.dependencies=null,t.stateNode=null):(t.childLanes=a.childLanes,t.lanes=a.lanes,t.child=a.child,t.subtreeFlags=0,t.deletions=null,t.memoizedProps=a.memoizedProps,t.memoizedState=a.memoizedState,t.updateQueue=a.updateQueue,t.type=a.type,r=a.dependencies,t.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),t}function Xo(t,r,a,l,u,f){var m=0;if(l=t,typeof t=="function")Ou(t)&&(m=1);else if(typeof t=="string")m=cC(t,a,ee.current)?26:t==="html"||t==="head"||t==="body"?27:5;else e:switch(t){case ue:return t=ln(31,a,r,u),t.elementType=ue,t.lanes=f,t;case C:return pr(a.children,u,f,r);case P:m=8,u|=24;break;case N:return t=ln(12,a,r,u|2),t.elementType=N,t.lanes=f,t;case z:return t=ln(13,a,r,u),t.elementType=z,t.lanes=f,t;case se:return t=ln(19,a,r,u),t.elementType=se,t.lanes=f,t;default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case U:case te:m=10;break e;case F:m=9;break e;case K:m=11;break e;case de:m=14;break e;case ae:m=16,l=null;break e}m=29,a=Error(s(130,t===null?"null":typeof t,"")),l=null}return r=ln(m,a,r,u),r.elementType=t,r.type=l,r.lanes=f,r}function pr(t,r,a,l){return t=ln(7,t,l,r),t.lanes=a,t}function Ru(t,r,a){return t=ln(6,t,null,r),t.lanes=a,t}function Nu(t,r,a){return r=ln(4,t.children!==null?t.children:[],t.key,r),r.lanes=a,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}var ls=[],cs=0,Zo=null,Jo=0,bn=[],En=0,gr=null,ei=1,ti="";function mr(t,r){ls[cs++]=Jo,ls[cs++]=Zo,Zo=t,Jo=r}function Wg(t,r,a){bn[En++]=ei,bn[En++]=ti,bn[En++]=gr,gr=t;var l=ei;t=ti;var u=32-Wt(l)-1;l&=~(1<<u),a+=1;var f=32-Wt(r)+u;if(30<f){var m=u-u%5;f=(l&(1<<m)-1).toString(32),l>>=m,u-=m,ei=1<<32-Wt(r)+u|a<<u|l,ti=f+t}else ei=1<<f|a<<u|l,ti=t}function xu(t){t.return!==null&&(mr(t,1),Wg(t,1,0))}function Au(t){for(;t===Zo;)Zo=ls[--cs],ls[cs]=null,Jo=ls[--cs],ls[cs]=null;for(;t===gr;)gr=bn[--En],bn[En]=null,ti=bn[--En],bn[En]=null,ei=bn[--En],bn[En]=null}var Gt=null,dt=null,Ye=!1,vr=null,zn=!1,Du=Error(s(519));function yr(t){var r=Error(s(418,""));throw ga(yn(r,t)),Du}function Qg(t){var r=t.stateNode,a=t.type,l=t.memoizedProps;switch(r[pt]=t,r[ct]=l,a){case"dialog":Ue("cancel",r),Ue("close",r);break;case"iframe":case"object":case"embed":Ue("load",r);break;case"video":case"audio":for(a=0;a<za.length;a++)Ue(za[a],r);break;case"source":Ue("error",r);break;case"img":case"image":case"link":Ue("error",r),Ue("load",r);break;case"details":Ue("toggle",r);break;case"input":Ue("invalid",r),ug(r,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0),zo(r);break;case"select":Ue("invalid",r);break;case"textarea":Ue("invalid",r),fg(r,l.value,l.defaultValue,l.children),zo(r)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||r.textContent===""+a||l.suppressHydrationWarning===!0||fy(r.textContent,a)?(l.popover!=null&&(Ue("beforetoggle",r),Ue("toggle",r)),l.onScroll!=null&&Ue("scroll",r),l.onScrollEnd!=null&&Ue("scrollend",r),l.onClick!=null&&(r.onclick=kl),r=!0):r=!1,r||yr(t)}function Kg(t){for(Gt=t.return;Gt;)switch(Gt.tag){case 5:case 13:zn=!1;return;case 27:case 3:zn=!0;return;default:Gt=Gt.return}}function ha(t){if(t!==Gt)return!1;if(!Ye)return Kg(t),Ye=!0,!1;var r=t.tag,a;if((a=r!==3&&r!==27)&&((a=r===5)&&(a=t.type,a=!(a!=="form"&&a!=="button")||Fd(t.type,t.memoizedProps)),a=!a),a&&dt&&yr(t),Kg(t),r===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(s(317));e:{for(t=t.nextSibling,r=0;t;){if(t.nodeType===8)if(a=t.data,a==="/$"){if(r===0){dt=An(t.nextSibling);break e}r--}else a!=="$"&&a!=="$!"&&a!=="$?"||r++;t=t.nextSibling}dt=null}}else r===27?(r=dt,zi(t.type)?(t=Xd,Xd=null,dt=t):dt=r):dt=Gt?An(t.stateNode.nextSibling):null;return!0}function pa(){dt=Gt=null,Ye=!1}function Xg(){var t=vr;return t!==null&&(Jt===null?Jt=t:Jt.push.apply(Jt,t),vr=null),t}function ga(t){vr===null?vr=[t]:vr.push(t)}var Iu=V(null),_r=null,ni=null;function Ci(t,r,a){$(Iu,r._currentValue),r._currentValue=a}function ii(t){t._currentValue=Iu.current,I(Iu)}function ku(t,r,a){for(;t!==null;){var l=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,l!==null&&(l.childLanes|=r)):l!==null&&(l.childLanes&r)!==r&&(l.childLanes|=r),t===a)break;t=t.return}}function Mu(t,r,a,l){var u=t.child;for(u!==null&&(u.return=t);u!==null;){var f=u.dependencies;if(f!==null){var m=u.child;f=f.firstContext;e:for(;f!==null;){var y=f;f=u;for(var S=0;S<r.length;S++)if(y.context===r[S]){f.lanes|=a,y=f.alternate,y!==null&&(y.lanes|=a),ku(f.return,a,t),l||(m=null);break e}f=y.next}}else if(u.tag===18){if(m=u.return,m===null)throw Error(s(341));m.lanes|=a,f=m.alternate,f!==null&&(f.lanes|=a),ku(m,a,t),m=null}else m=u.child;if(m!==null)m.return=u;else for(m=u;m!==null;){if(m===t){m=null;break}if(u=m.sibling,u!==null){u.return=m.return,m=u;break}m=m.return}u=m}}function ma(t,r,a,l){t=null;for(var u=r,f=!1;u!==null;){if(!f){if((u.flags&524288)!==0)f=!0;else if((u.flags&262144)!==0)break}if(u.tag===10){var m=u.alternate;if(m===null)throw Error(s(387));if(m=m.memoizedProps,m!==null){var y=u.type;on(u.pendingProps.value,m.value)||(t!==null?t.push(y):t=[y])}}else if(u===q.current){if(m=u.alternate,m===null)throw Error(s(387));m.memoizedState.memoizedState!==u.memoizedState.memoizedState&&(t!==null?t.push(qa):t=[qa])}u=u.return}t!==null&&Mu(r,t,a,l),r.flags|=262144}function el(t){for(t=t.firstContext;t!==null;){if(!on(t.context._currentValue,t.memoizedValue))return!0;t=t.next}return!1}function br(t){_r=t,ni=null,t=t.dependencies,t!==null&&(t.firstContext=null)}function Ut(t){return Zg(_r,t)}function tl(t,r){return _r===null&&br(t),Zg(t,r)}function Zg(t,r){var a=r._currentValue;if(r={context:r,memoizedValue:a,next:null},ni===null){if(t===null)throw Error(s(308));ni=r,t.dependencies={lanes:0,firstContext:r},t.flags|=524288}else ni=ni.next=r;return a}var lT=typeof AbortController<"u"?AbortController:function(){var t=[],r=this.signal={aborted:!1,addEventListener:function(a,l){t.push(l)}};this.abort=function(){r.aborted=!0,t.forEach(function(a){return a()})}},cT=i.unstable_scheduleCallback,uT=i.unstable_NormalPriority,Et={$$typeof:te,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ju(){return{controller:new lT,data:new Map,refCount:0}}function va(t){t.refCount--,t.refCount===0&&cT(uT,function(){t.controller.abort()})}var ya=null,Lu=0,us=0,ds=null;function dT(t,r){if(ya===null){var a=ya=[];Lu=0,us=Ud(),ds={status:"pending",value:void 0,then:function(l){a.push(l)}}}return Lu++,r.then(Jg,Jg),r}function Jg(){if(--Lu===0&&ya!==null){ds!==null&&(ds.status="fulfilled");var t=ya;ya=null,us=0,ds=null;for(var r=0;r<t.length;r++)(0,t[r])()}}function fT(t,r){var a=[],l={status:"pending",value:null,reason:null,then:function(u){a.push(u)}};return t.then(function(){l.status="fulfilled",l.value=r;for(var u=0;u<a.length;u++)(0,a[u])(r)},function(u){for(l.status="rejected",l.reason=u,u=0;u<a.length;u++)(0,a[u])(void 0)}),l}var em=j.S;j.S=function(t,r){typeof r=="object"&&r!==null&&typeof r.then=="function"&&dT(t,r),em!==null&&em(t,r)};var Er=V(null);function Pu(){var t=Er.current;return t!==null?t:st.pooledCache}function nl(t,r){r===null?$(Er,Er.current):$(Er,r.pool)}function tm(){var t=Pu();return t===null?null:{parent:Et._currentValue,pool:t}}var _a=Error(s(460)),nm=Error(s(474)),il=Error(s(542)),Uu={then:function(){}};function im(t){return t=t.status,t==="fulfilled"||t==="rejected"}function rl(){}function rm(t,r,a){switch(a=t[a],a===void 0?t.push(r):a!==r&&(r.then(rl,rl),r=a),r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,am(t),t;default:if(typeof r.status=="string")r.then(rl,rl);else{if(t=st,t!==null&&100<t.shellSuspendCounter)throw Error(s(482));t=r,t.status="pending",t.then(function(l){if(r.status==="pending"){var u=r;u.status="fulfilled",u.value=l}},function(l){if(r.status==="pending"){var u=r;u.status="rejected",u.reason=l}})}switch(r.status){case"fulfilled":return r.value;case"rejected":throw t=r.reason,am(t),t}throw ba=r,_a}}var ba=null;function sm(){if(ba===null)throw Error(s(459));var t=ba;return ba=null,t}function am(t){if(t===_a||t===il)throw Error(s(483))}var wi=!1;function zu(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Hu(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,callbacks:null})}function Oi(t){return{lane:t,tag:0,payload:null,callback:null,next:null}}function Ri(t,r,a){var l=t.updateQueue;if(l===null)return null;if(l=l.shared,(We&2)!==0){var u=l.pending;return u===null?r.next=r:(r.next=u.next,u.next=r),l.pending=r,r=Ko(t),Yg(t,null,a),r}return Qo(t,l,r,a),Ko(t)}function Ea(t,r,a){if(r=r.updateQueue,r!==null&&(r=r.shared,(a&4194048)!==0)){var l=r.lanes;l&=t.pendingLanes,a|=l,r.lanes=a,bt(t,a)}}function Bu(t,r){var a=t.updateQueue,l=t.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var u=null,f=null;if(a=a.firstBaseUpdate,a!==null){do{var m={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};f===null?u=f=m:f=f.next=m,a=a.next}while(a!==null);f===null?u=f=r:f=f.next=r}else u=f=r;a={baseState:l.baseState,firstBaseUpdate:u,lastBaseUpdate:f,shared:l.shared,callbacks:l.callbacks},t.updateQueue=a;return}t=a.lastBaseUpdate,t===null?a.firstBaseUpdate=r:t.next=r,a.lastBaseUpdate=r}var Vu=!1;function Sa(){if(Vu){var t=ds;if(t!==null)throw t}}function Ta(t,r,a,l){Vu=!1;var u=t.updateQueue;wi=!1;var f=u.firstBaseUpdate,m=u.lastBaseUpdate,y=u.shared.pending;if(y!==null){u.shared.pending=null;var S=y,A=S.next;S.next=null,m===null?f=A:m.next=A,m=S;var H=t.alternate;H!==null&&(H=H.updateQueue,y=H.lastBaseUpdate,y!==m&&(y===null?H.firstBaseUpdate=A:y.next=A,H.lastBaseUpdate=S))}if(f!==null){var Y=u.baseState;m=0,H=A=S=null,y=f;do{var k=y.lane&-536870913,M=k!==y.lane;if(M?(Be&k)===k:(l&k)===k){k!==0&&k===us&&(Vu=!0),H!==null&&(H=H.next={lane:0,tag:y.tag,payload:y.payload,callback:null,next:null});e:{var _e=t,me=y;k=r;var Je=a;switch(me.tag){case 1:if(_e=me.payload,typeof _e=="function"){Y=_e.call(Je,Y,k);break e}Y=_e;break e;case 3:_e.flags=_e.flags&-65537|128;case 0:if(_e=me.payload,k=typeof _e=="function"?_e.call(Je,Y,k):_e,k==null)break e;Y=_({},Y,k);break e;case 2:wi=!0}}k=y.callback,k!==null&&(t.flags|=64,M&&(t.flags|=8192),M=u.callbacks,M===null?u.callbacks=[k]:M.push(k))}else M={lane:k,tag:y.tag,payload:y.payload,callback:y.callback,next:null},H===null?(A=H=M,S=Y):H=H.next=M,m|=k;if(y=y.next,y===null){if(y=u.shared.pending,y===null)break;M=y,y=M.next,M.next=null,u.lastBaseUpdate=M,u.shared.pending=null}}while(!0);H===null&&(S=Y),u.baseState=S,u.firstBaseUpdate=A,u.lastBaseUpdate=H,f===null&&(u.shared.lanes=0),ji|=m,t.lanes=m,t.memoizedState=Y}}function om(t,r){if(typeof t!="function")throw Error(s(191,t));t.call(r)}function lm(t,r){var a=t.callbacks;if(a!==null)for(t.callbacks=null,t=0;t<a.length;t++)om(a[t],r)}var fs=V(null),sl=V(0);function cm(t,r){t=ui,$(sl,t),$(fs,r),ui=t|r.baseLanes}function Gu(){$(sl,ui),$(fs,fs.current)}function $u(){ui=sl.current,I(fs),I(sl)}var Ni=0,De=null,Xe=null,yt=null,al=!1,hs=!1,Sr=!1,ol=0,Ca=0,ps=null,hT=0;function gt(){throw Error(s(321))}function qu(t,r){if(r===null)return!1;for(var a=0;a<r.length&&a<t.length;a++)if(!on(t[a],r[a]))return!1;return!0}function Yu(t,r,a,l,u,f){return Ni=f,De=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,j.H=t===null||t.memoizedState===null?Ym:Fm,Sr=!1,f=a(l,u),Sr=!1,hs&&(f=dm(r,a,l,u)),um(t),f}function um(t){j.H=hl;var r=Xe!==null&&Xe.next!==null;if(Ni=0,yt=Xe=De=null,al=!1,Ca=0,ps=null,r)throw Error(s(300));t===null||Nt||(t=t.dependencies,t!==null&&el(t)&&(Nt=!0))}function dm(t,r,a,l){De=t;var u=0;do{if(hs&&(ps=null),Ca=0,hs=!1,25<=u)throw Error(s(301));if(u+=1,yt=Xe=null,t.updateQueue!=null){var f=t.updateQueue;f.lastEffect=null,f.events=null,f.stores=null,f.memoCache!=null&&(f.memoCache.index=0)}j.H=bT,f=r(a,l)}while(hs);return f}function pT(){var t=j.H,r=t.useState()[0];return r=typeof r.then=="function"?wa(r):r,t=t.useState()[0],(Xe!==null?Xe.memoizedState:null)!==t&&(De.flags|=1024),r}function Fu(){var t=ol!==0;return ol=0,t}function Wu(t,r,a){r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~a}function Qu(t){if(al){for(t=t.memoizedState;t!==null;){var r=t.queue;r!==null&&(r.pending=null),t=t.next}al=!1}Ni=0,yt=Xe=De=null,hs=!1,Ca=ol=0,ps=null}function Xt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return yt===null?De.memoizedState=yt=t:yt=yt.next=t,yt}function _t(){if(Xe===null){var t=De.alternate;t=t!==null?t.memoizedState:null}else t=Xe.next;var r=yt===null?De.memoizedState:yt.next;if(r!==null)yt=r,Xe=t;else{if(t===null)throw De.alternate===null?Error(s(467)):Error(s(310));Xe=t,t={memoizedState:Xe.memoizedState,baseState:Xe.baseState,baseQueue:Xe.baseQueue,queue:Xe.queue,next:null},yt===null?De.memoizedState=yt=t:yt=yt.next=t}return yt}function Ku(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function wa(t){var r=Ca;return Ca+=1,ps===null&&(ps=[]),t=rm(ps,t,r),r=De,(yt===null?r.memoizedState:yt.next)===null&&(r=r.alternate,j.H=r===null||r.memoizedState===null?Ym:Fm),t}function ll(t){if(t!==null&&typeof t=="object"){if(typeof t.then=="function")return wa(t);if(t.$$typeof===te)return Ut(t)}throw Error(s(438,String(t)))}function Xu(t){var r=null,a=De.updateQueue;if(a!==null&&(r=a.memoCache),r==null){var l=De.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(r={data:l.data.map(function(u){return u.slice()}),index:0})))}if(r==null&&(r={data:[],index:0}),a===null&&(a=Ku(),De.updateQueue=a),a.memoCache=r,a=r.data[r.index],a===void 0)for(a=r.data[r.index]=Array(t),l=0;l<t;l++)a[l]=Ne;return r.index++,a}function ri(t,r){return typeof r=="function"?r(t):r}function cl(t){var r=_t();return Zu(r,Xe,t)}function Zu(t,r,a){var l=t.queue;if(l===null)throw Error(s(311));l.lastRenderedReducer=a;var u=t.baseQueue,f=l.pending;if(f!==null){if(u!==null){var m=u.next;u.next=f.next,f.next=m}r.baseQueue=u=f,l.pending=null}if(f=t.baseState,u===null)t.memoizedState=f;else{r=u.next;var y=m=null,S=null,A=r,H=!1;do{var Y=A.lane&-536870913;if(Y!==A.lane?(Be&Y)===Y:(Ni&Y)===Y){var k=A.revertLane;if(k===0)S!==null&&(S=S.next={lane:0,revertLane:0,action:A.action,hasEagerState:A.hasEagerState,eagerState:A.eagerState,next:null}),Y===us&&(H=!0);else if((Ni&k)===k){A=A.next,k===us&&(H=!0);continue}else Y={lane:0,revertLane:A.revertLane,action:A.action,hasEagerState:A.hasEagerState,eagerState:A.eagerState,next:null},S===null?(y=S=Y,m=f):S=S.next=Y,De.lanes|=k,ji|=k;Y=A.action,Sr&&a(f,Y),f=A.hasEagerState?A.eagerState:a(f,Y)}else k={lane:Y,revertLane:A.revertLane,action:A.action,hasEagerState:A.hasEagerState,eagerState:A.eagerState,next:null},S===null?(y=S=k,m=f):S=S.next=k,De.lanes|=Y,ji|=Y;A=A.next}while(A!==null&&A!==r);if(S===null?m=f:S.next=y,!on(f,t.memoizedState)&&(Nt=!0,H&&(a=ds,a!==null)))throw a;t.memoizedState=f,t.baseState=m,t.baseQueue=S,l.lastRenderedState=f}return u===null&&(l.lanes=0),[t.memoizedState,l.dispatch]}function Ju(t){var r=_t(),a=r.queue;if(a===null)throw Error(s(311));a.lastRenderedReducer=t;var l=a.dispatch,u=a.pending,f=r.memoizedState;if(u!==null){a.pending=null;var m=u=u.next;do f=t(f,m.action),m=m.next;while(m!==u);on(f,r.memoizedState)||(Nt=!0),r.memoizedState=f,r.baseQueue===null&&(r.baseState=f),a.lastRenderedState=f}return[f,l]}function fm(t,r,a){var l=De,u=_t(),f=Ye;if(f){if(a===void 0)throw Error(s(407));a=a()}else a=r();var m=!on((Xe||u).memoizedState,a);m&&(u.memoizedState=a,Nt=!0),u=u.queue;var y=gm.bind(null,l,u,t);if(Oa(2048,8,y,[t]),u.getSnapshot!==r||m||yt!==null&&yt.memoizedState.tag&1){if(l.flags|=2048,gs(9,ul(),pm.bind(null,l,u,a,r),null),st===null)throw Error(s(349));f||(Ni&124)!==0||hm(l,r,a)}return a}function hm(t,r,a){t.flags|=16384,t={getSnapshot:r,value:a},r=De.updateQueue,r===null?(r=Ku(),De.updateQueue=r,r.stores=[t]):(a=r.stores,a===null?r.stores=[t]:a.push(t))}function pm(t,r,a,l){r.value=a,r.getSnapshot=l,mm(r)&&vm(t)}function gm(t,r,a){return a(function(){mm(r)&&vm(t)})}function mm(t){var r=t.getSnapshot;t=t.value;try{var a=r();return!on(t,a)}catch{return!0}}function vm(t){var r=as(t,2);r!==null&&hn(r,t,2)}function ed(t){var r=Xt();if(typeof t=="function"){var a=t;if(t=a(),Sr){Wn(!0);try{a()}finally{Wn(!1)}}}return r.memoizedState=r.baseState=t,r.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ri,lastRenderedState:t},r}function ym(t,r,a,l){return t.baseState=a,Zu(t,Xe,typeof l=="function"?l:ri)}function gT(t,r,a,l,u){if(fl(t))throw Error(s(485));if(t=r.action,t!==null){var f={payload:u,action:t,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(m){f.listeners.push(m)}};j.T!==null?a(!0):f.isTransition=!1,l(f),a=r.pending,a===null?(f.next=r.pending=f,_m(r,f)):(f.next=a.next,r.pending=a.next=f)}}function _m(t,r){var a=r.action,l=r.payload,u=t.state;if(r.isTransition){var f=j.T,m={};j.T=m;try{var y=a(u,l),S=j.S;S!==null&&S(m,y),bm(t,r,y)}catch(A){td(t,r,A)}finally{j.T=f}}else try{f=a(u,l),bm(t,r,f)}catch(A){td(t,r,A)}}function bm(t,r,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){Em(t,r,l)},function(l){return td(t,r,l)}):Em(t,r,a)}function Em(t,r,a){r.status="fulfilled",r.value=a,Sm(r),t.state=a,r=t.pending,r!==null&&(a=r.next,a===r?t.pending=null:(a=a.next,r.next=a,_m(t,a)))}function td(t,r,a){var l=t.pending;if(t.pending=null,l!==null){l=l.next;do r.status="rejected",r.reason=a,Sm(r),r=r.next;while(r!==l)}t.action=null}function Sm(t){t=t.listeners;for(var r=0;r<t.length;r++)(0,t[r])()}function Tm(t,r){return r}function Cm(t,r){if(Ye){var a=st.formState;if(a!==null){e:{var l=De;if(Ye){if(dt){t:{for(var u=dt,f=zn;u.nodeType!==8;){if(!f){u=null;break t}if(u=An(u.nextSibling),u===null){u=null;break t}}f=u.data,u=f==="F!"||f==="F"?u:null}if(u){dt=An(u.nextSibling),l=u.data==="F!";break e}}yr(l)}l=!1}l&&(r=a[0])}}return a=Xt(),a.memoizedState=a.baseState=r,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Tm,lastRenderedState:r},a.queue=l,a=Gm.bind(null,De,l),l.dispatch=a,l=ed(!1),f=ad.bind(null,De,!1,l.queue),l=Xt(),u={state:r,dispatch:null,action:t,pending:null},l.queue=u,a=gT.bind(null,De,u,f,a),u.dispatch=a,l.memoizedState=t,[r,a,!1]}function wm(t){var r=_t();return Om(r,Xe,t)}function Om(t,r,a){if(r=Zu(t,r,Tm)[0],t=cl(ri)[0],typeof r=="object"&&r!==null&&typeof r.then=="function")try{var l=wa(r)}catch(m){throw m===_a?il:m}else l=r;r=_t();var u=r.queue,f=u.dispatch;return a!==r.memoizedState&&(De.flags|=2048,gs(9,ul(),mT.bind(null,u,a),null)),[l,f,t]}function mT(t,r){t.action=r}function Rm(t){var r=_t(),a=Xe;if(a!==null)return Om(r,a,t);_t(),r=r.memoizedState,a=_t();var l=a.queue.dispatch;return a.memoizedState=t,[r,l,!1]}function gs(t,r,a,l){return t={tag:t,create:a,deps:l,inst:r,next:null},r=De.updateQueue,r===null&&(r=Ku(),De.updateQueue=r),a=r.lastEffect,a===null?r.lastEffect=t.next=t:(l=a.next,a.next=t,t.next=l,r.lastEffect=t),t}function ul(){return{destroy:void 0,resource:void 0}}function Nm(){return _t().memoizedState}function dl(t,r,a,l){var u=Xt();l=l===void 0?null:l,De.flags|=t,u.memoizedState=gs(1|r,ul(),a,l)}function Oa(t,r,a,l){var u=_t();l=l===void 0?null:l;var f=u.memoizedState.inst;Xe!==null&&l!==null&&qu(l,Xe.memoizedState.deps)?u.memoizedState=gs(r,f,a,l):(De.flags|=t,u.memoizedState=gs(1|r,f,a,l))}function xm(t,r){dl(8390656,8,t,r)}function Am(t,r){Oa(2048,8,t,r)}function Dm(t,r){return Oa(4,2,t,r)}function Im(t,r){return Oa(4,4,t,r)}function km(t,r){if(typeof r=="function"){t=t();var a=r(t);return function(){typeof a=="function"?a():r(null)}}if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function Mm(t,r,a){a=a!=null?a.concat([t]):null,Oa(4,4,km.bind(null,r,t),a)}function nd(){}function jm(t,r){var a=_t();r=r===void 0?null:r;var l=a.memoizedState;return r!==null&&qu(r,l[1])?l[0]:(a.memoizedState=[t,r],t)}function Lm(t,r){var a=_t();r=r===void 0?null:r;var l=a.memoizedState;if(r!==null&&qu(r,l[1]))return l[0];if(l=t(),Sr){Wn(!0);try{t()}finally{Wn(!1)}}return a.memoizedState=[l,r],l}function id(t,r,a){return a===void 0||(Ni&1073741824)!==0?t.memoizedState=r:(t.memoizedState=a,t=zv(),De.lanes|=t,ji|=t,a)}function Pm(t,r,a,l){return on(a,r)?a:fs.current!==null?(t=id(t,a,l),on(t,r)||(Nt=!0),t):(Ni&42)===0?(Nt=!0,t.memoizedState=a):(t=zv(),De.lanes|=t,ji|=t,r)}function Um(t,r,a,l,u){var f=Z.p;Z.p=f!==0&&8>f?f:8;var m=j.T,y={};j.T=y,ad(t,!1,r,a);try{var S=u(),A=j.S;if(A!==null&&A(y,S),S!==null&&typeof S=="object"&&typeof S.then=="function"){var H=fT(S,l);Ra(t,r,H,fn(t))}else Ra(t,r,l,fn(t))}catch(Y){Ra(t,r,{then:function(){},status:"rejected",reason:Y},fn())}finally{Z.p=f,j.T=m}}function vT(){}function rd(t,r,a,l){if(t.tag!==5)throw Error(s(476));var u=zm(t).queue;Um(t,u,r,le,a===null?vT:function(){return Hm(t),a(l)})}function zm(t){var r=t.memoizedState;if(r!==null)return r;r={memoizedState:le,baseState:le,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ri,lastRenderedState:le},next:null};var a={};return r.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ri,lastRenderedState:a},next:null},t.memoizedState=r,t=t.alternate,t!==null&&(t.memoizedState=r),r}function Hm(t){var r=zm(t).next.queue;Ra(t,r,{},fn())}function sd(){return Ut(qa)}function Bm(){return _t().memoizedState}function Vm(){return _t().memoizedState}function yT(t){for(var r=t.return;r!==null;){switch(r.tag){case 24:case 3:var a=fn();t=Oi(a);var l=Ri(r,t,a);l!==null&&(hn(l,r,a),Ea(l,r,a)),r={cache:ju()},t.payload=r;return}r=r.return}}function _T(t,r,a){var l=fn();a={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null},fl(t)?$m(r,a):(a=wu(t,r,a,l),a!==null&&(hn(a,t,l),qm(a,r,l)))}function Gm(t,r,a){var l=fn();Ra(t,r,a,l)}function Ra(t,r,a,l){var u={lane:l,revertLane:0,action:a,hasEagerState:!1,eagerState:null,next:null};if(fl(t))$m(r,u);else{var f=t.alternate;if(t.lanes===0&&(f===null||f.lanes===0)&&(f=r.lastRenderedReducer,f!==null))try{var m=r.lastRenderedState,y=f(m,a);if(u.hasEagerState=!0,u.eagerState=y,on(y,m))return Qo(t,r,u,0),st===null&&Wo(),!1}catch{}finally{}if(a=wu(t,r,u,l),a!==null)return hn(a,t,l),qm(a,r,l),!0}return!1}function ad(t,r,a,l){if(l={lane:2,revertLane:Ud(),action:l,hasEagerState:!1,eagerState:null,next:null},fl(t)){if(r)throw Error(s(479))}else r=wu(t,a,l,2),r!==null&&hn(r,t,2)}function fl(t){var r=t.alternate;return t===De||r!==null&&r===De}function $m(t,r){hs=al=!0;var a=t.pending;a===null?r.next=r:(r.next=a.next,a.next=r),t.pending=r}function qm(t,r,a){if((a&4194048)!==0){var l=r.lanes;l&=t.pendingLanes,a|=l,r.lanes=a,bt(t,a)}}var hl={readContext:Ut,use:ll,useCallback:gt,useContext:gt,useEffect:gt,useImperativeHandle:gt,useLayoutEffect:gt,useInsertionEffect:gt,useMemo:gt,useReducer:gt,useRef:gt,useState:gt,useDebugValue:gt,useDeferredValue:gt,useTransition:gt,useSyncExternalStore:gt,useId:gt,useHostTransitionStatus:gt,useFormState:gt,useActionState:gt,useOptimistic:gt,useMemoCache:gt,useCacheRefresh:gt},Ym={readContext:Ut,use:ll,useCallback:function(t,r){return Xt().memoizedState=[t,r===void 0?null:r],t},useContext:Ut,useEffect:xm,useImperativeHandle:function(t,r,a){a=a!=null?a.concat([t]):null,dl(4194308,4,km.bind(null,r,t),a)},useLayoutEffect:function(t,r){return dl(4194308,4,t,r)},useInsertionEffect:function(t,r){dl(4,2,t,r)},useMemo:function(t,r){var a=Xt();r=r===void 0?null:r;var l=t();if(Sr){Wn(!0);try{t()}finally{Wn(!1)}}return a.memoizedState=[l,r],l},useReducer:function(t,r,a){var l=Xt();if(a!==void 0){var u=a(r);if(Sr){Wn(!0);try{a(r)}finally{Wn(!1)}}}else u=r;return l.memoizedState=l.baseState=u,t={pending:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:u},l.queue=t,t=t.dispatch=_T.bind(null,De,t),[l.memoizedState,t]},useRef:function(t){var r=Xt();return t={current:t},r.memoizedState=t},useState:function(t){t=ed(t);var r=t.queue,a=Gm.bind(null,De,r);return r.dispatch=a,[t.memoizedState,a]},useDebugValue:nd,useDeferredValue:function(t,r){var a=Xt();return id(a,t,r)},useTransition:function(){var t=ed(!1);return t=Um.bind(null,De,t.queue,!0,!1),Xt().memoizedState=t,[!1,t]},useSyncExternalStore:function(t,r,a){var l=De,u=Xt();if(Ye){if(a===void 0)throw Error(s(407));a=a()}else{if(a=r(),st===null)throw Error(s(349));(Be&124)!==0||hm(l,r,a)}u.memoizedState=a;var f={value:a,getSnapshot:r};return u.queue=f,xm(gm.bind(null,l,f,t),[t]),l.flags|=2048,gs(9,ul(),pm.bind(null,l,f,a,r),null),a},useId:function(){var t=Xt(),r=st.identifierPrefix;if(Ye){var a=ti,l=ei;a=(l&~(1<<32-Wt(l)-1)).toString(32)+a,r="«"+r+"R"+a,a=ol++,0<a&&(r+="H"+a.toString(32)),r+="»"}else a=hT++,r="«"+r+"r"+a.toString(32)+"»";return t.memoizedState=r},useHostTransitionStatus:sd,useFormState:Cm,useActionState:Cm,useOptimistic:function(t){var r=Xt();r.memoizedState=r.baseState=t;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return r.queue=a,r=ad.bind(null,De,!0,a),a.dispatch=r,[t,r]},useMemoCache:Xu,useCacheRefresh:function(){return Xt().memoizedState=yT.bind(null,De)}},Fm={readContext:Ut,use:ll,useCallback:jm,useContext:Ut,useEffect:Am,useImperativeHandle:Mm,useInsertionEffect:Dm,useLayoutEffect:Im,useMemo:Lm,useReducer:cl,useRef:Nm,useState:function(){return cl(ri)},useDebugValue:nd,useDeferredValue:function(t,r){var a=_t();return Pm(a,Xe.memoizedState,t,r)},useTransition:function(){var t=cl(ri)[0],r=_t().memoizedState;return[typeof t=="boolean"?t:wa(t),r]},useSyncExternalStore:fm,useId:Bm,useHostTransitionStatus:sd,useFormState:wm,useActionState:wm,useOptimistic:function(t,r){var a=_t();return ym(a,Xe,t,r)},useMemoCache:Xu,useCacheRefresh:Vm},bT={readContext:Ut,use:ll,useCallback:jm,useContext:Ut,useEffect:Am,useImperativeHandle:Mm,useInsertionEffect:Dm,useLayoutEffect:Im,useMemo:Lm,useReducer:Ju,useRef:Nm,useState:function(){return Ju(ri)},useDebugValue:nd,useDeferredValue:function(t,r){var a=_t();return Xe===null?id(a,t,r):Pm(a,Xe.memoizedState,t,r)},useTransition:function(){var t=Ju(ri)[0],r=_t().memoizedState;return[typeof t=="boolean"?t:wa(t),r]},useSyncExternalStore:fm,useId:Bm,useHostTransitionStatus:sd,useFormState:Rm,useActionState:Rm,useOptimistic:function(t,r){var a=_t();return Xe!==null?ym(a,Xe,t,r):(a.baseState=t,[t,a.queue.dispatch])},useMemoCache:Xu,useCacheRefresh:Vm},ms=null,Na=0;function pl(t){var r=Na;return Na+=1,ms===null&&(ms=[]),rm(ms,t,r)}function xa(t,r){r=r.props.ref,t.ref=r!==void 0?r:null}function gl(t,r){throw r.$$typeof===b?Error(s(525)):(t=Object.prototype.toString.call(r),Error(s(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t)))}function Wm(t){var r=t._init;return r(t._payload)}function Qm(t){function r(R,w){if(t){var x=R.deletions;x===null?(R.deletions=[w],R.flags|=16):x.push(w)}}function a(R,w){if(!t)return null;for(;w!==null;)r(R,w),w=w.sibling;return null}function l(R){for(var w=new Map;R!==null;)R.key!==null?w.set(R.key,R):w.set(R.index,R),R=R.sibling;return w}function u(R,w){return R=Jn(R,w),R.index=0,R.sibling=null,R}function f(R,w,x){return R.index=x,t?(x=R.alternate,x!==null?(x=x.index,x<w?(R.flags|=67108866,w):x):(R.flags|=67108866,w)):(R.flags|=1048576,w)}function m(R){return t&&R.alternate===null&&(R.flags|=67108866),R}function y(R,w,x,G){return w===null||w.tag!==6?(w=Ru(x,R.mode,G),w.return=R,w):(w=u(w,x),w.return=R,w)}function S(R,w,x,G){var oe=x.type;return oe===C?H(R,w,x.props.children,G,x.key):w!==null&&(w.elementType===oe||typeof oe=="object"&&oe!==null&&oe.$$typeof===ae&&Wm(oe)===w.type)?(w=u(w,x.props),xa(w,x),w.return=R,w):(w=Xo(x.type,x.key,x.props,null,R.mode,G),xa(w,x),w.return=R,w)}function A(R,w,x,G){return w===null||w.tag!==4||w.stateNode.containerInfo!==x.containerInfo||w.stateNode.implementation!==x.implementation?(w=Nu(x,R.mode,G),w.return=R,w):(w=u(w,x.children||[]),w.return=R,w)}function H(R,w,x,G,oe){return w===null||w.tag!==7?(w=pr(x,R.mode,G,oe),w.return=R,w):(w=u(w,x),w.return=R,w)}function Y(R,w,x){if(typeof w=="string"&&w!==""||typeof w=="number"||typeof w=="bigint")return w=Ru(""+w,R.mode,x),w.return=R,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case E:return x=Xo(w.type,w.key,w.props,null,R.mode,x),xa(x,w),x.return=R,x;case O:return w=Nu(w,R.mode,x),w.return=R,w;case ae:var G=w._init;return w=G(w._payload),Y(R,w,x)}if(Le(w)||fe(w))return w=pr(w,R.mode,x,null),w.return=R,w;if(typeof w.then=="function")return Y(R,pl(w),x);if(w.$$typeof===te)return Y(R,tl(R,w),x);gl(R,w)}return null}function k(R,w,x,G){var oe=w!==null?w.key:null;if(typeof x=="string"&&x!==""||typeof x=="number"||typeof x=="bigint")return oe!==null?null:y(R,w,""+x,G);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case E:return x.key===oe?S(R,w,x,G):null;case O:return x.key===oe?A(R,w,x,G):null;case ae:return oe=x._init,x=oe(x._payload),k(R,w,x,G)}if(Le(x)||fe(x))return oe!==null?null:H(R,w,x,G,null);if(typeof x.then=="function")return k(R,w,pl(x),G);if(x.$$typeof===te)return k(R,w,tl(R,x),G);gl(R,x)}return null}function M(R,w,x,G,oe){if(typeof G=="string"&&G!==""||typeof G=="number"||typeof G=="bigint")return R=R.get(x)||null,y(w,R,""+G,oe);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case E:return R=R.get(G.key===null?x:G.key)||null,S(w,R,G,oe);case O:return R=R.get(G.key===null?x:G.key)||null,A(w,R,G,oe);case ae:var ke=G._init;return G=ke(G._payload),M(R,w,x,G,oe)}if(Le(G)||fe(G))return R=R.get(x)||null,H(w,R,G,oe,null);if(typeof G.then=="function")return M(R,w,x,pl(G),oe);if(G.$$typeof===te)return M(R,w,x,tl(w,G),oe);gl(w,G)}return null}function _e(R,w,x,G){for(var oe=null,ke=null,he=w,ve=w=0,At=null;he!==null&&ve<x.length;ve++){he.index>ve?(At=he,he=null):At=he.sibling;var $e=k(R,he,x[ve],G);if($e===null){he===null&&(he=At);break}t&&he&&$e.alternate===null&&r(R,he),w=f($e,w,ve),ke===null?oe=$e:ke.sibling=$e,ke=$e,he=At}if(ve===x.length)return a(R,he),Ye&&mr(R,ve),oe;if(he===null){for(;ve<x.length;ve++)he=Y(R,x[ve],G),he!==null&&(w=f(he,w,ve),ke===null?oe=he:ke.sibling=he,ke=he);return Ye&&mr(R,ve),oe}for(he=l(he);ve<x.length;ve++)At=M(he,R,ve,x[ve],G),At!==null&&(t&&At.alternate!==null&&he.delete(At.key===null?ve:At.key),w=f(At,w,ve),ke===null?oe=At:ke.sibling=At,ke=At);return t&&he.forEach(function($i){return r(R,$i)}),Ye&&mr(R,ve),oe}function me(R,w,x,G){if(x==null)throw Error(s(151));for(var oe=null,ke=null,he=w,ve=w=0,At=null,$e=x.next();he!==null&&!$e.done;ve++,$e=x.next()){he.index>ve?(At=he,he=null):At=he.sibling;var $i=k(R,he,$e.value,G);if($i===null){he===null&&(he=At);break}t&&he&&$i.alternate===null&&r(R,he),w=f($i,w,ve),ke===null?oe=$i:ke.sibling=$i,ke=$i,he=At}if($e.done)return a(R,he),Ye&&mr(R,ve),oe;if(he===null){for(;!$e.done;ve++,$e=x.next())$e=Y(R,$e.value,G),$e!==null&&(w=f($e,w,ve),ke===null?oe=$e:ke.sibling=$e,ke=$e);return Ye&&mr(R,ve),oe}for(he=l(he);!$e.done;ve++,$e=x.next())$e=M(he,R,ve,$e.value,G),$e!==null&&(t&&$e.alternate!==null&&he.delete($e.key===null?ve:$e.key),w=f($e,w,ve),ke===null?oe=$e:ke.sibling=$e,ke=$e);return t&&he.forEach(function(EC){return r(R,EC)}),Ye&&mr(R,ve),oe}function Je(R,w,x,G){if(typeof x=="object"&&x!==null&&x.type===C&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case E:e:{for(var oe=x.key;w!==null;){if(w.key===oe){if(oe=x.type,oe===C){if(w.tag===7){a(R,w.sibling),G=u(w,x.props.children),G.return=R,R=G;break e}}else if(w.elementType===oe||typeof oe=="object"&&oe!==null&&oe.$$typeof===ae&&Wm(oe)===w.type){a(R,w.sibling),G=u(w,x.props),xa(G,x),G.return=R,R=G;break e}a(R,w);break}else r(R,w);w=w.sibling}x.type===C?(G=pr(x.props.children,R.mode,G,x.key),G.return=R,R=G):(G=Xo(x.type,x.key,x.props,null,R.mode,G),xa(G,x),G.return=R,R=G)}return m(R);case O:e:{for(oe=x.key;w!==null;){if(w.key===oe)if(w.tag===4&&w.stateNode.containerInfo===x.containerInfo&&w.stateNode.implementation===x.implementation){a(R,w.sibling),G=u(w,x.children||[]),G.return=R,R=G;break e}else{a(R,w);break}else r(R,w);w=w.sibling}G=Nu(x,R.mode,G),G.return=R,R=G}return m(R);case ae:return oe=x._init,x=oe(x._payload),Je(R,w,x,G)}if(Le(x))return _e(R,w,x,G);if(fe(x)){if(oe=fe(x),typeof oe!="function")throw Error(s(150));return x=oe.call(x),me(R,w,x,G)}if(typeof x.then=="function")return Je(R,w,pl(x),G);if(x.$$typeof===te)return Je(R,w,tl(R,x),G);gl(R,x)}return typeof x=="string"&&x!==""||typeof x=="number"||typeof x=="bigint"?(x=""+x,w!==null&&w.tag===6?(a(R,w.sibling),G=u(w,x),G.return=R,R=G):(a(R,w),G=Ru(x,R.mode,G),G.return=R,R=G),m(R)):a(R,w)}return function(R,w,x,G){try{Na=0;var oe=Je(R,w,x,G);return ms=null,oe}catch(he){if(he===_a||he===il)throw he;var ke=ln(29,he,null,R.mode);return ke.lanes=G,ke.return=R,ke}finally{}}}var vs=Qm(!0),Km=Qm(!1),Sn=V(null),Hn=null;function xi(t){var r=t.alternate;$(St,St.current&1),$(Sn,t),Hn===null&&(r===null||fs.current!==null||r.memoizedState!==null)&&(Hn=t)}function Xm(t){if(t.tag===22){if($(St,St.current),$(Sn,t),Hn===null){var r=t.alternate;r!==null&&r.memoizedState!==null&&(Hn=t)}}else Ai()}function Ai(){$(St,St.current),$(Sn,Sn.current)}function si(t){I(Sn),Hn===t&&(Hn=null),I(St)}var St=V(0);function ml(t){for(var r=t;r!==null;){if(r.tag===13){var a=r.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||Kd(a)))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}function od(t,r,a,l){r=t.memoizedState,a=a(l,r),a=a==null?r:_({},r,a),t.memoizedState=a,t.lanes===0&&(t.updateQueue.baseState=a)}var ld={enqueueSetState:function(t,r,a){t=t._reactInternals;var l=fn(),u=Oi(l);u.payload=r,a!=null&&(u.callback=a),r=Ri(t,u,l),r!==null&&(hn(r,t,l),Ea(r,t,l))},enqueueReplaceState:function(t,r,a){t=t._reactInternals;var l=fn(),u=Oi(l);u.tag=1,u.payload=r,a!=null&&(u.callback=a),r=Ri(t,u,l),r!==null&&(hn(r,t,l),Ea(r,t,l))},enqueueForceUpdate:function(t,r){t=t._reactInternals;var a=fn(),l=Oi(a);l.tag=2,r!=null&&(l.callback=r),r=Ri(t,l,a),r!==null&&(hn(r,t,a),Ea(r,t,a))}};function Zm(t,r,a,l,u,f,m){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(l,f,m):r.prototype&&r.prototype.isPureReactComponent?!da(a,l)||!da(u,f):!0}function Jm(t,r,a,l){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(a,l),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(a,l),r.state!==t&&ld.enqueueReplaceState(r,r.state,null)}function Tr(t,r){var a=r;if("ref"in r){a={};for(var l in r)l!=="ref"&&(a[l]=r[l])}if(t=t.defaultProps){a===r&&(a=_({},a));for(var u in t)a[u]===void 0&&(a[u]=t[u])}return a}var vl=typeof reportError=="function"?reportError:function(t){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var r=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof t=="object"&&t!==null&&typeof t.message=="string"?String(t.message):String(t),error:t});if(!window.dispatchEvent(r))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",t);return}console.error(t)};function ev(t){vl(t)}function tv(t){console.error(t)}function nv(t){vl(t)}function yl(t,r){try{var a=t.onUncaughtError;a(r.value,{componentStack:r.stack})}catch(l){setTimeout(function(){throw l})}}function iv(t,r,a){try{var l=t.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:r.tag===1?r.stateNode:null})}catch(u){setTimeout(function(){throw u})}}function cd(t,r,a){return a=Oi(a),a.tag=3,a.payload={element:null},a.callback=function(){yl(t,r)},a}function rv(t){return t=Oi(t),t.tag=3,t}function sv(t,r,a,l){var u=a.type.getDerivedStateFromError;if(typeof u=="function"){var f=l.value;t.payload=function(){return u(f)},t.callback=function(){iv(r,a,l)}}var m=a.stateNode;m!==null&&typeof m.componentDidCatch=="function"&&(t.callback=function(){iv(r,a,l),typeof u!="function"&&(Li===null?Li=new Set([this]):Li.add(this));var y=l.stack;this.componentDidCatch(l.value,{componentStack:y!==null?y:""})})}function ET(t,r,a,l,u){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(r=a.alternate,r!==null&&ma(r,a,u,!0),a=Sn.current,a!==null){switch(a.tag){case 13:return Hn===null?kd():a.alternate===null&&ft===0&&(ft=3),a.flags&=-257,a.flags|=65536,a.lanes=u,l===Uu?a.flags|=16384:(r=a.updateQueue,r===null?a.updateQueue=new Set([l]):r.add(l),jd(t,l,u)),!1;case 22:return a.flags|=65536,l===Uu?a.flags|=16384:(r=a.updateQueue,r===null?(r={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=r):(a=r.retryQueue,a===null?r.retryQueue=new Set([l]):a.add(l)),jd(t,l,u)),!1}throw Error(s(435,a.tag))}return jd(t,l,u),kd(),!1}if(Ye)return r=Sn.current,r!==null?((r.flags&65536)===0&&(r.flags|=256),r.flags|=65536,r.lanes=u,l!==Du&&(t=Error(s(422),{cause:l}),ga(yn(t,a)))):(l!==Du&&(r=Error(s(423),{cause:l}),ga(yn(r,a))),t=t.current.alternate,t.flags|=65536,u&=-u,t.lanes|=u,l=yn(l,a),u=cd(t.stateNode,l,u),Bu(t,u),ft!==4&&(ft=2)),!1;var f=Error(s(520),{cause:l});if(f=yn(f,a),La===null?La=[f]:La.push(f),ft!==4&&(ft=2),r===null)return!0;l=yn(l,a),a=r;do{switch(a.tag){case 3:return a.flags|=65536,t=u&-u,a.lanes|=t,t=cd(a.stateNode,l,t),Bu(a,t),!1;case 1:if(r=a.type,f=a.stateNode,(a.flags&128)===0&&(typeof r.getDerivedStateFromError=="function"||f!==null&&typeof f.componentDidCatch=="function"&&(Li===null||!Li.has(f))))return a.flags|=65536,u&=-u,a.lanes|=u,u=rv(u),sv(u,t,a,l),Bu(a,u),!1}a=a.return}while(a!==null);return!1}var av=Error(s(461)),Nt=!1;function Mt(t,r,a,l){r.child=t===null?Km(r,null,a,l):vs(r,t.child,a,l)}function ov(t,r,a,l,u){a=a.render;var f=r.ref;if("ref"in l){var m={};for(var y in l)y!=="ref"&&(m[y]=l[y])}else m=l;return br(r),l=Yu(t,r,a,m,f,u),y=Fu(),t!==null&&!Nt?(Wu(t,r,u),ai(t,r,u)):(Ye&&y&&xu(r),r.flags|=1,Mt(t,r,l,u),r.child)}function lv(t,r,a,l,u){if(t===null){var f=a.type;return typeof f=="function"&&!Ou(f)&&f.defaultProps===void 0&&a.compare===null?(r.tag=15,r.type=f,cv(t,r,f,l,u)):(t=Xo(a.type,null,l,r,r.mode,u),t.ref=r.ref,t.return=r,r.child=t)}if(f=t.child,!vd(t,u)){var m=f.memoizedProps;if(a=a.compare,a=a!==null?a:da,a(m,l)&&t.ref===r.ref)return ai(t,r,u)}return r.flags|=1,t=Jn(f,l),t.ref=r.ref,t.return=r,r.child=t}function cv(t,r,a,l,u){if(t!==null){var f=t.memoizedProps;if(da(f,l)&&t.ref===r.ref)if(Nt=!1,r.pendingProps=l=f,vd(t,u))(t.flags&131072)!==0&&(Nt=!0);else return r.lanes=t.lanes,ai(t,r,u)}return ud(t,r,a,l,u)}function uv(t,r,a){var l=r.pendingProps,u=l.children,f=t!==null?t.memoizedState:null;if(l.mode==="hidden"){if((r.flags&128)!==0){if(l=f!==null?f.baseLanes|a:a,t!==null){for(u=r.child=t.child,f=0;u!==null;)f=f|u.lanes|u.childLanes,u=u.sibling;r.childLanes=f&~l}else r.childLanes=0,r.child=null;return dv(t,r,l,a)}if((a&536870912)!==0)r.memoizedState={baseLanes:0,cachePool:null},t!==null&&nl(r,f!==null?f.cachePool:null),f!==null?cm(r,f):Gu(),Xm(r);else return r.lanes=r.childLanes=536870912,dv(t,r,f!==null?f.baseLanes|a:a,a)}else f!==null?(nl(r,f.cachePool),cm(r,f),Ai(),r.memoizedState=null):(t!==null&&nl(r,null),Gu(),Ai());return Mt(t,r,u,a),r.child}function dv(t,r,a,l){var u=Pu();return u=u===null?null:{parent:Et._currentValue,pool:u},r.memoizedState={baseLanes:a,cachePool:u},t!==null&&nl(r,null),Gu(),Xm(r),t!==null&&ma(t,r,l,!0),null}function _l(t,r){var a=r.ref;if(a===null)t!==null&&t.ref!==null&&(r.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(s(284));(t===null||t.ref!==a)&&(r.flags|=4194816)}}function ud(t,r,a,l,u){return br(r),a=Yu(t,r,a,l,void 0,u),l=Fu(),t!==null&&!Nt?(Wu(t,r,u),ai(t,r,u)):(Ye&&l&&xu(r),r.flags|=1,Mt(t,r,a,u),r.child)}function fv(t,r,a,l,u,f){return br(r),r.updateQueue=null,a=dm(r,l,a,u),um(t),l=Fu(),t!==null&&!Nt?(Wu(t,r,f),ai(t,r,f)):(Ye&&l&&xu(r),r.flags|=1,Mt(t,r,a,f),r.child)}function hv(t,r,a,l,u){if(br(r),r.stateNode===null){var f=os,m=a.contextType;typeof m=="object"&&m!==null&&(f=Ut(m)),f=new a(l,f),r.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=ld,r.stateNode=f,f._reactInternals=r,f=r.stateNode,f.props=l,f.state=r.memoizedState,f.refs={},zu(r),m=a.contextType,f.context=typeof m=="object"&&m!==null?Ut(m):os,f.state=r.memoizedState,m=a.getDerivedStateFromProps,typeof m=="function"&&(od(r,a,m,l),f.state=r.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(m=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),m!==f.state&&ld.enqueueReplaceState(f,f.state,null),Ta(r,l,f,u),Sa(),f.state=r.memoizedState),typeof f.componentDidMount=="function"&&(r.flags|=4194308),l=!0}else if(t===null){f=r.stateNode;var y=r.memoizedProps,S=Tr(a,y);f.props=S;var A=f.context,H=a.contextType;m=os,typeof H=="object"&&H!==null&&(m=Ut(H));var Y=a.getDerivedStateFromProps;H=typeof Y=="function"||typeof f.getSnapshotBeforeUpdate=="function",y=r.pendingProps!==y,H||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(y||A!==m)&&Jm(r,f,l,m),wi=!1;var k=r.memoizedState;f.state=k,Ta(r,l,f,u),Sa(),A=r.memoizedState,y||k!==A||wi?(typeof Y=="function"&&(od(r,a,Y,l),A=r.memoizedState),(S=wi||Zm(r,a,S,l,k,A,m))?(H||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount()),typeof f.componentDidMount=="function"&&(r.flags|=4194308)):(typeof f.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=l,r.memoizedState=A),f.props=l,f.state=A,f.context=m,l=S):(typeof f.componentDidMount=="function"&&(r.flags|=4194308),l=!1)}else{f=r.stateNode,Hu(t,r),m=r.memoizedProps,H=Tr(a,m),f.props=H,Y=r.pendingProps,k=f.context,A=a.contextType,S=os,typeof A=="object"&&A!==null&&(S=Ut(A)),y=a.getDerivedStateFromProps,(A=typeof y=="function"||typeof f.getSnapshotBeforeUpdate=="function")||typeof f.UNSAFE_componentWillReceiveProps!="function"&&typeof f.componentWillReceiveProps!="function"||(m!==Y||k!==S)&&Jm(r,f,l,S),wi=!1,k=r.memoizedState,f.state=k,Ta(r,l,f,u),Sa();var M=r.memoizedState;m!==Y||k!==M||wi||t!==null&&t.dependencies!==null&&el(t.dependencies)?(typeof y=="function"&&(od(r,a,y,l),M=r.memoizedState),(H=wi||Zm(r,a,H,l,k,M,S)||t!==null&&t.dependencies!==null&&el(t.dependencies))?(A||typeof f.UNSAFE_componentWillUpdate!="function"&&typeof f.componentWillUpdate!="function"||(typeof f.componentWillUpdate=="function"&&f.componentWillUpdate(l,M,S),typeof f.UNSAFE_componentWillUpdate=="function"&&f.UNSAFE_componentWillUpdate(l,M,S)),typeof f.componentDidUpdate=="function"&&(r.flags|=4),typeof f.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof f.componentDidUpdate!="function"||m===t.memoizedProps&&k===t.memoizedState||(r.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||m===t.memoizedProps&&k===t.memoizedState||(r.flags|=1024),r.memoizedProps=l,r.memoizedState=M),f.props=l,f.state=M,f.context=S,l=H):(typeof f.componentDidUpdate!="function"||m===t.memoizedProps&&k===t.memoizedState||(r.flags|=4),typeof f.getSnapshotBeforeUpdate!="function"||m===t.memoizedProps&&k===t.memoizedState||(r.flags|=1024),l=!1)}return f=l,_l(t,r),l=(r.flags&128)!==0,f||l?(f=r.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:f.render(),r.flags|=1,t!==null&&l?(r.child=vs(r,t.child,null,u),r.child=vs(r,null,a,u)):Mt(t,r,a,u),r.memoizedState=f.state,t=r.child):t=ai(t,r,u),t}function pv(t,r,a,l){return pa(),r.flags|=256,Mt(t,r,a,l),r.child}var dd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function fd(t){return{baseLanes:t,cachePool:tm()}}function hd(t,r,a){return t=t!==null?t.childLanes&~a:0,r&&(t|=Tn),t}function gv(t,r,a){var l=r.pendingProps,u=!1,f=(r.flags&128)!==0,m;if((m=f)||(m=t!==null&&t.memoizedState===null?!1:(St.current&2)!==0),m&&(u=!0,r.flags&=-129),m=(r.flags&32)!==0,r.flags&=-33,t===null){if(Ye){if(u?xi(r):Ai(),Ye){var y=dt,S;if(S=y){e:{for(S=y,y=zn;S.nodeType!==8;){if(!y){y=null;break e}if(S=An(S.nextSibling),S===null){y=null;break e}}y=S}y!==null?(r.memoizedState={dehydrated:y,treeContext:gr!==null?{id:ei,overflow:ti}:null,retryLane:536870912,hydrationErrors:null},S=ln(18,null,null,0),S.stateNode=y,S.return=r,r.child=S,Gt=r,dt=null,S=!0):S=!1}S||yr(r)}if(y=r.memoizedState,y!==null&&(y=y.dehydrated,y!==null))return Kd(y)?r.lanes=32:r.lanes=536870912,null;si(r)}return y=l.children,l=l.fallback,u?(Ai(),u=r.mode,y=bl({mode:"hidden",children:y},u),l=pr(l,u,a,null),y.return=r,l.return=r,y.sibling=l,r.child=y,u=r.child,u.memoizedState=fd(a),u.childLanes=hd(t,m,a),r.memoizedState=dd,l):(xi(r),pd(r,y))}if(S=t.memoizedState,S!==null&&(y=S.dehydrated,y!==null)){if(f)r.flags&256?(xi(r),r.flags&=-257,r=gd(t,r,a)):r.memoizedState!==null?(Ai(),r.child=t.child,r.flags|=128,r=null):(Ai(),u=l.fallback,y=r.mode,l=bl({mode:"visible",children:l.children},y),u=pr(u,y,a,null),u.flags|=2,l.return=r,u.return=r,l.sibling=u,r.child=l,vs(r,t.child,null,a),l=r.child,l.memoizedState=fd(a),l.childLanes=hd(t,m,a),r.memoizedState=dd,r=u);else if(xi(r),Kd(y)){if(m=y.nextSibling&&y.nextSibling.dataset,m)var A=m.dgst;m=A,l=Error(s(419)),l.stack="",l.digest=m,ga({value:l,source:null,stack:null}),r=gd(t,r,a)}else if(Nt||ma(t,r,a,!1),m=(a&t.childLanes)!==0,Nt||m){if(m=st,m!==null&&(l=a&-a,l=(l&42)!==0?1:Pt(l),l=(l&(m.suspendedLanes|a))!==0?0:l,l!==0&&l!==S.retryLane))throw S.retryLane=l,as(t,l),hn(m,t,l),av;y.data==="$?"||kd(),r=gd(t,r,a)}else y.data==="$?"?(r.flags|=192,r.child=t.child,r=null):(t=S.treeContext,dt=An(y.nextSibling),Gt=r,Ye=!0,vr=null,zn=!1,t!==null&&(bn[En++]=ei,bn[En++]=ti,bn[En++]=gr,ei=t.id,ti=t.overflow,gr=r),r=pd(r,l.children),r.flags|=4096);return r}return u?(Ai(),u=l.fallback,y=r.mode,S=t.child,A=S.sibling,l=Jn(S,{mode:"hidden",children:l.children}),l.subtreeFlags=S.subtreeFlags&65011712,A!==null?u=Jn(A,u):(u=pr(u,y,a,null),u.flags|=2),u.return=r,l.return=r,l.sibling=u,r.child=l,l=u,u=r.child,y=t.child.memoizedState,y===null?y=fd(a):(S=y.cachePool,S!==null?(A=Et._currentValue,S=S.parent!==A?{parent:A,pool:A}:S):S=tm(),y={baseLanes:y.baseLanes|a,cachePool:S}),u.memoizedState=y,u.childLanes=hd(t,m,a),r.memoizedState=dd,l):(xi(r),a=t.child,t=a.sibling,a=Jn(a,{mode:"visible",children:l.children}),a.return=r,a.sibling=null,t!==null&&(m=r.deletions,m===null?(r.deletions=[t],r.flags|=16):m.push(t)),r.child=a,r.memoizedState=null,a)}function pd(t,r){return r=bl({mode:"visible",children:r},t.mode),r.return=t,t.child=r}function bl(t,r){return t=ln(22,t,null,r),t.lanes=0,t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},t}function gd(t,r,a){return vs(r,t.child,null,a),t=pd(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function mv(t,r,a){t.lanes|=r;var l=t.alternate;l!==null&&(l.lanes|=r),ku(t.return,r,a)}function md(t,r,a,l,u){var f=t.memoizedState;f===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:u}:(f.isBackwards=r,f.rendering=null,f.renderingStartTime=0,f.last=l,f.tail=a,f.tailMode=u)}function vv(t,r,a){var l=r.pendingProps,u=l.revealOrder,f=l.tail;if(Mt(t,r,l.children,a),l=St.current,(l&2)!==0)l=l&1|2,r.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&mv(t,a,r);else if(t.tag===19)mv(t,a,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}l&=1}switch($(St,l),u){case"forwards":for(a=r.child,u=null;a!==null;)t=a.alternate,t!==null&&ml(t)===null&&(u=a),a=a.sibling;a=u,a===null?(u=r.child,r.child=null):(u=a.sibling,a.sibling=null),md(r,!1,u,a,f);break;case"backwards":for(a=null,u=r.child,r.child=null;u!==null;){if(t=u.alternate,t!==null&&ml(t)===null){r.child=u;break}t=u.sibling,u.sibling=a,a=u,u=t}md(r,!0,a,null,f);break;case"together":md(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function ai(t,r,a){if(t!==null&&(r.dependencies=t.dependencies),ji|=r.lanes,(a&r.childLanes)===0)if(t!==null){if(ma(t,r,a,!1),(a&r.childLanes)===0)return null}else return null;if(t!==null&&r.child!==t.child)throw Error(s(153));if(r.child!==null){for(t=r.child,a=Jn(t,t.pendingProps),r.child=a,a.return=r;t.sibling!==null;)t=t.sibling,a=a.sibling=Jn(t,t.pendingProps),a.return=r;a.sibling=null}return r.child}function vd(t,r){return(t.lanes&r)!==0?!0:(t=t.dependencies,!!(t!==null&&el(t)))}function ST(t,r,a){switch(r.tag){case 3:ne(r,r.stateNode.containerInfo),Ci(r,Et,t.memoizedState.cache),pa();break;case 27:case 5:Fe(r);break;case 4:ne(r,r.stateNode.containerInfo);break;case 10:Ci(r,r.type,r.memoizedProps.value);break;case 13:var l=r.memoizedState;if(l!==null)return l.dehydrated!==null?(xi(r),r.flags|=128,null):(a&r.child.childLanes)!==0?gv(t,r,a):(xi(r),t=ai(t,r,a),t!==null?t.sibling:null);xi(r);break;case 19:var u=(t.flags&128)!==0;if(l=(a&r.childLanes)!==0,l||(ma(t,r,a,!1),l=(a&r.childLanes)!==0),u){if(l)return vv(t,r,a);r.flags|=128}if(u=r.memoizedState,u!==null&&(u.rendering=null,u.tail=null,u.lastEffect=null),$(St,St.current),l)break;return null;case 22:case 23:return r.lanes=0,uv(t,r,a);case 24:Ci(r,Et,t.memoizedState.cache)}return ai(t,r,a)}function yv(t,r,a){if(t!==null)if(t.memoizedProps!==r.pendingProps)Nt=!0;else{if(!vd(t,a)&&(r.flags&128)===0)return Nt=!1,ST(t,r,a);Nt=(t.flags&131072)!==0}else Nt=!1,Ye&&(r.flags&1048576)!==0&&Wg(r,Jo,r.index);switch(r.lanes=0,r.tag){case 16:e:{t=r.pendingProps;var l=r.elementType,u=l._init;if(l=u(l._payload),r.type=l,typeof l=="function")Ou(l)?(t=Tr(l,t),r.tag=1,r=hv(null,r,l,t,a)):(r.tag=0,r=ud(null,r,l,t,a));else{if(l!=null){if(u=l.$$typeof,u===K){r.tag=11,r=ov(null,r,l,t,a);break e}else if(u===de){r.tag=14,r=lv(null,r,l,t,a);break e}}throw r=Ke(l)||l,Error(s(306,r,""))}}return r;case 0:return ud(t,r,r.type,r.pendingProps,a);case 1:return l=r.type,u=Tr(l,r.pendingProps),hv(t,r,l,u,a);case 3:e:{if(ne(r,r.stateNode.containerInfo),t===null)throw Error(s(387));l=r.pendingProps;var f=r.memoizedState;u=f.element,Hu(t,r),Ta(r,l,null,a);var m=r.memoizedState;if(l=m.cache,Ci(r,Et,l),l!==f.cache&&Mu(r,[Et],a,!0),Sa(),l=m.element,f.isDehydrated)if(f={element:l,isDehydrated:!1,cache:m.cache},r.updateQueue.baseState=f,r.memoizedState=f,r.flags&256){r=pv(t,r,l,a);break e}else if(l!==u){u=yn(Error(s(424)),r),ga(u),r=pv(t,r,l,a);break e}else{switch(t=r.stateNode.containerInfo,t.nodeType){case 9:t=t.body;break;default:t=t.nodeName==="HTML"?t.ownerDocument.body:t}for(dt=An(t.firstChild),Gt=r,Ye=!0,vr=null,zn=!0,a=Km(r,null,l,a),r.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(pa(),l===u){r=ai(t,r,a);break e}Mt(t,r,l,a)}r=r.child}return r;case 26:return _l(t,r),t===null?(a=Sy(r.type,null,r.pendingProps,null))?r.memoizedState=a:Ye||(a=r.type,t=r.pendingProps,l=Ml(B.current).createElement(a),l[pt]=r,l[ct]=t,Lt(l,a,t),Rt(l),r.stateNode=l):r.memoizedState=Sy(r.type,t.memoizedProps,r.pendingProps,t.memoizedState),null;case 27:return Fe(r),t===null&&Ye&&(l=r.stateNode=_y(r.type,r.pendingProps,B.current),Gt=r,zn=!0,u=dt,zi(r.type)?(Xd=u,dt=An(l.firstChild)):dt=u),Mt(t,r,r.pendingProps.children,a),_l(t,r),t===null&&(r.flags|=4194304),r.child;case 5:return t===null&&Ye&&((u=l=dt)&&(l=KT(l,r.type,r.pendingProps,zn),l!==null?(r.stateNode=l,Gt=r,dt=An(l.firstChild),zn=!1,u=!0):u=!1),u||yr(r)),Fe(r),u=r.type,f=r.pendingProps,m=t!==null?t.memoizedProps:null,l=f.children,Fd(u,f)?l=null:m!==null&&Fd(u,m)&&(r.flags|=32),r.memoizedState!==null&&(u=Yu(t,r,pT,null,null,a),qa._currentValue=u),_l(t,r),Mt(t,r,l,a),r.child;case 6:return t===null&&Ye&&((t=a=dt)&&(a=XT(a,r.pendingProps,zn),a!==null?(r.stateNode=a,Gt=r,dt=null,t=!0):t=!1),t||yr(r)),null;case 13:return gv(t,r,a);case 4:return ne(r,r.stateNode.containerInfo),l=r.pendingProps,t===null?r.child=vs(r,null,l,a):Mt(t,r,l,a),r.child;case 11:return ov(t,r,r.type,r.pendingProps,a);case 7:return Mt(t,r,r.pendingProps,a),r.child;case 8:return Mt(t,r,r.pendingProps.children,a),r.child;case 12:return Mt(t,r,r.pendingProps.children,a),r.child;case 10:return l=r.pendingProps,Ci(r,r.type,l.value),Mt(t,r,l.children,a),r.child;case 9:return u=r.type._context,l=r.pendingProps.children,br(r),u=Ut(u),l=l(u),r.flags|=1,Mt(t,r,l,a),r.child;case 14:return lv(t,r,r.type,r.pendingProps,a);case 15:return cv(t,r,r.type,r.pendingProps,a);case 19:return vv(t,r,a);case 31:return l=r.pendingProps,a=r.mode,l={mode:l.mode,children:l.children},t===null?(a=bl(l,a),a.ref=r.ref,r.child=a,a.return=r,r=a):(a=Jn(t.child,l),a.ref=r.ref,r.child=a,a.return=r,r=a),r;case 22:return uv(t,r,a);case 24:return br(r),l=Ut(Et),t===null?(u=Pu(),u===null&&(u=st,f=ju(),u.pooledCache=f,f.refCount++,f!==null&&(u.pooledCacheLanes|=a),u=f),r.memoizedState={parent:l,cache:u},zu(r),Ci(r,Et,u)):((t.lanes&a)!==0&&(Hu(t,r),Ta(r,null,null,a),Sa()),u=t.memoizedState,f=r.memoizedState,u.parent!==l?(u={parent:l,cache:l},r.memoizedState=u,r.lanes===0&&(r.memoizedState=r.updateQueue.baseState=u),Ci(r,Et,l)):(l=f.cache,Ci(r,Et,l),l!==u.cache&&Mu(r,[Et],a,!0))),Mt(t,r,r.pendingProps.children,a),r.child;case 29:throw r.pendingProps}throw Error(s(156,r.tag))}function oi(t){t.flags|=4}function _v(t,r){if(r.type!=="stylesheet"||(r.state.loading&4)!==0)t.flags&=-16777217;else if(t.flags|=16777216,!Ry(r)){if(r=Sn.current,r!==null&&((Be&4194048)===Be?Hn!==null:(Be&62914560)!==Be&&(Be&536870912)===0||r!==Hn))throw ba=Uu,nm;t.flags|=8192}}function El(t,r){r!==null&&(t.flags|=4),t.flags&16384&&(r=t.tag!==22?Ge():536870912,t.lanes|=r,Es|=r)}function Aa(t,r){if(!Ye)switch(t.tailMode){case"hidden":r=t.tail;for(var a=null;r!==null;)r.alternate!==null&&(a=r),r=r.sibling;a===null?t.tail=null:a.sibling=null;break;case"collapsed":a=t.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:l.sibling=null}}function ut(t){var r=t.alternate!==null&&t.alternate.child===t.child,a=0,l=0;if(r)for(var u=t.child;u!==null;)a|=u.lanes|u.childLanes,l|=u.subtreeFlags&65011712,l|=u.flags&65011712,u.return=t,u=u.sibling;else for(u=t.child;u!==null;)a|=u.lanes|u.childLanes,l|=u.subtreeFlags,l|=u.flags,u.return=t,u=u.sibling;return t.subtreeFlags|=l,t.childLanes=a,r}function TT(t,r,a){var l=r.pendingProps;switch(Au(r),r.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ut(r),null;case 1:return ut(r),null;case 3:return a=r.stateNode,l=null,t!==null&&(l=t.memoizedState.cache),r.memoizedState.cache!==l&&(r.flags|=2048),ii(Et),Ce(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(t===null||t.child===null)&&(ha(r)?oi(r):t===null||t.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,Xg())),ut(r),null;case 26:return a=r.memoizedState,t===null?(oi(r),a!==null?(ut(r),_v(r,a)):(ut(r),r.flags&=-16777217)):a?a!==t.memoizedState?(oi(r),ut(r),_v(r,a)):(ut(r),r.flags&=-16777217):(t.memoizedProps!==l&&oi(r),ut(r),r.flags&=-16777217),null;case 27:tt(r),a=B.current;var u=r.type;if(t!==null&&r.stateNode!=null)t.memoizedProps!==l&&oi(r);else{if(!l){if(r.stateNode===null)throw Error(s(166));return ut(r),null}t=ee.current,ha(r)?Qg(r):(t=_y(u,l,a),r.stateNode=t,oi(r))}return ut(r),null;case 5:if(tt(r),a=r.type,t!==null&&r.stateNode!=null)t.memoizedProps!==l&&oi(r);else{if(!l){if(r.stateNode===null)throw Error(s(166));return ut(r),null}if(t=ee.current,ha(r))Qg(r);else{switch(u=Ml(B.current),t){case 1:t=u.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:t=u.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":t=u.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":t=u.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":t=u.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild);break;case"select":t=typeof l.is=="string"?u.createElement("select",{is:l.is}):u.createElement("select"),l.multiple?t.multiple=!0:l.size&&(t.size=l.size);break;default:t=typeof l.is=="string"?u.createElement(a,{is:l.is}):u.createElement(a)}}t[pt]=r,t[ct]=l;e:for(u=r.child;u!==null;){if(u.tag===5||u.tag===6)t.appendChild(u.stateNode);else if(u.tag!==4&&u.tag!==27&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===r)break e;for(;u.sibling===null;){if(u.return===null||u.return===r)break e;u=u.return}u.sibling.return=u.return,u=u.sibling}r.stateNode=t;e:switch(Lt(t,a,l),a){case"button":case"input":case"select":case"textarea":t=!!l.autoFocus;break e;case"img":t=!0;break e;default:t=!1}t&&oi(r)}}return ut(r),r.flags&=-16777217,null;case 6:if(t&&r.stateNode!=null)t.memoizedProps!==l&&oi(r);else{if(typeof l!="string"&&r.stateNode===null)throw Error(s(166));if(t=B.current,ha(r)){if(t=r.stateNode,a=r.memoizedProps,l=null,u=Gt,u!==null)switch(u.tag){case 27:case 5:l=u.memoizedProps}t[pt]=r,t=!!(t.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||fy(t.nodeValue,a)),t||yr(r)}else t=Ml(t).createTextNode(l),t[pt]=r,r.stateNode=t}return ut(r),null;case 13:if(l=r.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(u=ha(r),l!==null&&l.dehydrated!==null){if(t===null){if(!u)throw Error(s(318));if(u=r.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(s(317));u[pt]=r}else pa(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;ut(r),u=!1}else u=Xg(),t!==null&&t.memoizedState!==null&&(t.memoizedState.hydrationErrors=u),u=!0;if(!u)return r.flags&256?(si(r),r):(si(r),null)}if(si(r),(r.flags&128)!==0)return r.lanes=a,r;if(a=l!==null,t=t!==null&&t.memoizedState!==null,a){l=r.child,u=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(u=l.alternate.memoizedState.cachePool.pool);var f=null;l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(f=l.memoizedState.cachePool.pool),f!==u&&(l.flags|=2048)}return a!==t&&a&&(r.child.flags|=8192),El(r,r.updateQueue),ut(r),null;case 4:return Ce(),t===null&&Vd(r.stateNode.containerInfo),ut(r),null;case 10:return ii(r.type),ut(r),null;case 19:if(I(St),u=r.memoizedState,u===null)return ut(r),null;if(l=(r.flags&128)!==0,f=u.rendering,f===null)if(l)Aa(u,!1);else{if(ft!==0||t!==null&&(t.flags&128)!==0)for(t=r.child;t!==null;){if(f=ml(t),f!==null){for(r.flags|=128,Aa(u,!1),t=f.updateQueue,r.updateQueue=t,El(r,t),r.subtreeFlags=0,t=a,a=r.child;a!==null;)Fg(a,t),a=a.sibling;return $(St,St.current&1|2),r.child}t=t.sibling}u.tail!==null&&Bt()>Cl&&(r.flags|=128,l=!0,Aa(u,!1),r.lanes=4194304)}else{if(!l)if(t=ml(f),t!==null){if(r.flags|=128,l=!0,t=t.updateQueue,r.updateQueue=t,El(r,t),Aa(u,!0),u.tail===null&&u.tailMode==="hidden"&&!f.alternate&&!Ye)return ut(r),null}else 2*Bt()-u.renderingStartTime>Cl&&a!==536870912&&(r.flags|=128,l=!0,Aa(u,!1),r.lanes=4194304);u.isBackwards?(f.sibling=r.child,r.child=f):(t=u.last,t!==null?t.sibling=f:r.child=f,u.last=f)}return u.tail!==null?(r=u.tail,u.rendering=r,u.tail=r.sibling,u.renderingStartTime=Bt(),r.sibling=null,t=St.current,$(St,l?t&1|2:t&1),r):(ut(r),null);case 22:case 23:return si(r),$u(),l=r.memoizedState!==null,t!==null?t.memoizedState!==null!==l&&(r.flags|=8192):l&&(r.flags|=8192),l?(a&536870912)!==0&&(r.flags&128)===0&&(ut(r),r.subtreeFlags&6&&(r.flags|=8192)):ut(r),a=r.updateQueue,a!==null&&El(r,a.retryQueue),a=null,t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),l=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(l=r.memoizedState.cachePool.pool),l!==a&&(r.flags|=2048),t!==null&&I(Er),null;case 24:return a=null,t!==null&&(a=t.memoizedState.cache),r.memoizedState.cache!==a&&(r.flags|=2048),ii(Et),ut(r),null;case 25:return null;case 30:return null}throw Error(s(156,r.tag))}function CT(t,r){switch(Au(r),r.tag){case 1:return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return ii(Et),Ce(),t=r.flags,(t&65536)!==0&&(t&128)===0?(r.flags=t&-65537|128,r):null;case 26:case 27:case 5:return tt(r),null;case 13:if(si(r),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(s(340));pa()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return I(St),null;case 4:return Ce(),null;case 10:return ii(r.type),null;case 22:case 23:return si(r),$u(),t!==null&&I(Er),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 24:return ii(Et),null;case 25:return null;default:return null}}function bv(t,r){switch(Au(r),r.tag){case 3:ii(Et),Ce();break;case 26:case 27:case 5:tt(r);break;case 4:Ce();break;case 13:si(r);break;case 19:I(St);break;case 10:ii(r.type);break;case 22:case 23:si(r),$u(),t!==null&&I(Er);break;case 24:ii(Et)}}function Da(t,r){try{var a=r.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var u=l.next;a=u;do{if((a.tag&t)===t){l=void 0;var f=a.create,m=a.inst;l=f(),m.destroy=l}a=a.next}while(a!==u)}}catch(y){nt(r,r.return,y)}}function Di(t,r,a){try{var l=r.updateQueue,u=l!==null?l.lastEffect:null;if(u!==null){var f=u.next;l=f;do{if((l.tag&t)===t){var m=l.inst,y=m.destroy;if(y!==void 0){m.destroy=void 0,u=r;var S=a,A=y;try{A()}catch(H){nt(u,S,H)}}}l=l.next}while(l!==f)}}catch(H){nt(r,r.return,H)}}function Ev(t){var r=t.updateQueue;if(r!==null){var a=t.stateNode;try{lm(r,a)}catch(l){nt(t,t.return,l)}}}function Sv(t,r,a){a.props=Tr(t.type,t.memoizedProps),a.state=t.memoizedState;try{a.componentWillUnmount()}catch(l){nt(t,r,l)}}function Ia(t,r){try{var a=t.ref;if(a!==null){switch(t.tag){case 26:case 27:case 5:var l=t.stateNode;break;case 30:l=t.stateNode;break;default:l=t.stateNode}typeof a=="function"?t.refCleanup=a(l):a.current=l}}catch(u){nt(t,r,u)}}function Bn(t,r){var a=t.ref,l=t.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(u){nt(t,r,u)}finally{t.refCleanup=null,t=t.alternate,t!=null&&(t.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(u){nt(t,r,u)}else a.current=null}function Tv(t){var r=t.type,a=t.memoizedProps,l=t.stateNode;try{e:switch(r){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break e;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(u){nt(t,t.return,u)}}function yd(t,r,a){try{var l=t.stateNode;qT(l,t.type,a,r),l[ct]=r}catch(u){nt(t,t.return,u)}}function Cv(t){return t.tag===5||t.tag===3||t.tag===26||t.tag===27&&zi(t.type)||t.tag===4}function _d(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Cv(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.tag===27&&zi(t.type)||t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function bd(t,r,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,r?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(t,r):(r=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,r.appendChild(t),a=a._reactRootContainer,a!=null||r.onclick!==null||(r.onclick=kl));else if(l!==4&&(l===27&&zi(t.type)&&(a=t.stateNode,r=null),t=t.child,t!==null))for(bd(t,r,a),t=t.sibling;t!==null;)bd(t,r,a),t=t.sibling}function Sl(t,r,a){var l=t.tag;if(l===5||l===6)t=t.stateNode,r?a.insertBefore(t,r):a.appendChild(t);else if(l!==4&&(l===27&&zi(t.type)&&(a=t.stateNode),t=t.child,t!==null))for(Sl(t,r,a),t=t.sibling;t!==null;)Sl(t,r,a),t=t.sibling}function wv(t){var r=t.stateNode,a=t.memoizedProps;try{for(var l=t.type,u=r.attributes;u.length;)r.removeAttributeNode(u[0]);Lt(r,l,a),r[pt]=t,r[ct]=a}catch(f){nt(t,t.return,f)}}var li=!1,mt=!1,Ed=!1,Ov=typeof WeakSet=="function"?WeakSet:Set,xt=null;function wT(t,r){if(t=t.containerInfo,qd=Hl,t=Pg(t),_u(t)){if("selectionStart"in t)var a={start:t.selectionStart,end:t.selectionEnd};else e:{a=(a=t.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var u=l.anchorOffset,f=l.focusNode;l=l.focusOffset;try{a.nodeType,f.nodeType}catch{a=null;break e}var m=0,y=-1,S=-1,A=0,H=0,Y=t,k=null;t:for(;;){for(var M;Y!==a||u!==0&&Y.nodeType!==3||(y=m+u),Y!==f||l!==0&&Y.nodeType!==3||(S=m+l),Y.nodeType===3&&(m+=Y.nodeValue.length),(M=Y.firstChild)!==null;)k=Y,Y=M;for(;;){if(Y===t)break t;if(k===a&&++A===u&&(y=m),k===f&&++H===l&&(S=m),(M=Y.nextSibling)!==null)break;Y=k,k=Y.parentNode}Y=M}a=y===-1||S===-1?null:{start:y,end:S}}else a=null}a=a||{start:0,end:0}}else a=null;for(Yd={focusedElem:t,selectionRange:a},Hl=!1,xt=r;xt!==null;)if(r=xt,t=r.child,(r.subtreeFlags&1024)!==0&&t!==null)t.return=r,xt=t;else for(;xt!==null;){switch(r=xt,f=r.alternate,t=r.flags,r.tag){case 0:break;case 11:case 15:break;case 1:if((t&1024)!==0&&f!==null){t=void 0,a=r,u=f.memoizedProps,f=f.memoizedState,l=a.stateNode;try{var _e=Tr(a.type,u,a.elementType===a.type);t=l.getSnapshotBeforeUpdate(_e,f),l.__reactInternalSnapshotBeforeUpdate=t}catch(me){nt(a,a.return,me)}}break;case 3:if((t&1024)!==0){if(t=r.stateNode.containerInfo,a=t.nodeType,a===9)Qd(t);else if(a===1)switch(t.nodeName){case"HEAD":case"HTML":case"BODY":Qd(t);break;default:t.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((t&1024)!==0)throw Error(s(163))}if(t=r.sibling,t!==null){t.return=r.return,xt=t;break}xt=r.return}}function Rv(t,r,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:Ii(t,a),l&4&&Da(5,a);break;case 1:if(Ii(t,a),l&4)if(t=a.stateNode,r===null)try{t.componentDidMount()}catch(m){nt(a,a.return,m)}else{var u=Tr(a.type,r.memoizedProps);r=r.memoizedState;try{t.componentDidUpdate(u,r,t.__reactInternalSnapshotBeforeUpdate)}catch(m){nt(a,a.return,m)}}l&64&&Ev(a),l&512&&Ia(a,a.return);break;case 3:if(Ii(t,a),l&64&&(t=a.updateQueue,t!==null)){if(r=null,a.child!==null)switch(a.child.tag){case 27:case 5:r=a.child.stateNode;break;case 1:r=a.child.stateNode}try{lm(t,r)}catch(m){nt(a,a.return,m)}}break;case 27:r===null&&l&4&&wv(a);case 26:case 5:Ii(t,a),r===null&&l&4&&Tv(a),l&512&&Ia(a,a.return);break;case 12:Ii(t,a);break;case 13:Ii(t,a),l&4&&Av(t,a),l&64&&(t=a.memoizedState,t!==null&&(t=t.dehydrated,t!==null&&(a=MT.bind(null,a),ZT(t,a))));break;case 22:if(l=a.memoizedState!==null||li,!l){r=r!==null&&r.memoizedState!==null||mt,u=li;var f=mt;li=l,(mt=r)&&!f?ki(t,a,(a.subtreeFlags&8772)!==0):Ii(t,a),li=u,mt=f}break;case 30:break;default:Ii(t,a)}}function Nv(t){var r=t.alternate;r!==null&&(t.alternate=null,Nv(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&eu(r)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}var lt=null,Zt=!1;function ci(t,r,a){for(a=a.child;a!==null;)xv(t,r,a),a=a.sibling}function xv(t,r,a){if(Ft&&typeof Ft.onCommitFiberUnmount=="function")try{Ft.onCommitFiberUnmount(Vr,a)}catch{}switch(a.tag){case 26:mt||Bn(a,r),ci(t,r,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:mt||Bn(a,r);var l=lt,u=Zt;zi(a.type)&&(lt=a.stateNode,Zt=!1),ci(t,r,a),Ba(a.stateNode),lt=l,Zt=u;break;case 5:mt||Bn(a,r);case 6:if(l=lt,u=Zt,lt=null,ci(t,r,a),lt=l,Zt=u,lt!==null)if(Zt)try{(lt.nodeType===9?lt.body:lt.nodeName==="HTML"?lt.ownerDocument.body:lt).removeChild(a.stateNode)}catch(f){nt(a,r,f)}else try{lt.removeChild(a.stateNode)}catch(f){nt(a,r,f)}break;case 18:lt!==null&&(Zt?(t=lt,vy(t.nodeType===9?t.body:t.nodeName==="HTML"?t.ownerDocument.body:t,a.stateNode),Qa(t)):vy(lt,a.stateNode));break;case 4:l=lt,u=Zt,lt=a.stateNode.containerInfo,Zt=!0,ci(t,r,a),lt=l,Zt=u;break;case 0:case 11:case 14:case 15:mt||Di(2,a,r),mt||Di(4,a,r),ci(t,r,a);break;case 1:mt||(Bn(a,r),l=a.stateNode,typeof l.componentWillUnmount=="function"&&Sv(a,r,l)),ci(t,r,a);break;case 21:ci(t,r,a);break;case 22:mt=(l=mt)||a.memoizedState!==null,ci(t,r,a),mt=l;break;default:ci(t,r,a)}}function Av(t,r){if(r.memoizedState===null&&(t=r.alternate,t!==null&&(t=t.memoizedState,t!==null&&(t=t.dehydrated,t!==null))))try{Qa(t)}catch(a){nt(r,r.return,a)}}function OT(t){switch(t.tag){case 13:case 19:var r=t.stateNode;return r===null&&(r=t.stateNode=new Ov),r;case 22:return t=t.stateNode,r=t._retryCache,r===null&&(r=t._retryCache=new Ov),r;default:throw Error(s(435,t.tag))}}function Sd(t,r){var a=OT(t);r.forEach(function(l){var u=jT.bind(null,t,l);a.has(l)||(a.add(l),l.then(u,u))})}function cn(t,r){var a=r.deletions;if(a!==null)for(var l=0;l<a.length;l++){var u=a[l],f=t,m=r,y=m;e:for(;y!==null;){switch(y.tag){case 27:if(zi(y.type)){lt=y.stateNode,Zt=!1;break e}break;case 5:lt=y.stateNode,Zt=!1;break e;case 3:case 4:lt=y.stateNode.containerInfo,Zt=!0;break e}y=y.return}if(lt===null)throw Error(s(160));xv(f,m,u),lt=null,Zt=!1,f=u.alternate,f!==null&&(f.return=null),u.return=null}if(r.subtreeFlags&13878)for(r=r.child;r!==null;)Dv(r,t),r=r.sibling}var xn=null;function Dv(t,r){var a=t.alternate,l=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:cn(r,t),un(t),l&4&&(Di(3,t,t.return),Da(3,t),Di(5,t,t.return));break;case 1:cn(r,t),un(t),l&512&&(mt||a===null||Bn(a,a.return)),l&64&&li&&(t=t.updateQueue,t!==null&&(l=t.callbacks,l!==null&&(a=t.shared.hiddenCallbacks,t.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var u=xn;if(cn(r,t),un(t),l&512&&(mt||a===null||Bn(a,a.return)),l&4){var f=a!==null?a.memoizedState:null;if(l=t.memoizedState,a===null)if(l===null)if(t.stateNode===null){e:{l=t.type,a=t.memoizedProps,u=u.ownerDocument||u;t:switch(l){case"title":f=u.getElementsByTagName("title")[0],(!f||f[Kn]||f[pt]||f.namespaceURI==="http://www.w3.org/2000/svg"||f.hasAttribute("itemprop"))&&(f=u.createElement(l),u.head.insertBefore(f,u.querySelector("head > title"))),Lt(f,l,a),f[pt]=t,Rt(f),l=f;break e;case"link":var m=wy("link","href",u).get(l+(a.href||""));if(m){for(var y=0;y<m.length;y++)if(f=m[y],f.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&f.getAttribute("rel")===(a.rel==null?null:a.rel)&&f.getAttribute("title")===(a.title==null?null:a.title)&&f.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){m.splice(y,1);break t}}f=u.createElement(l),Lt(f,l,a),u.head.appendChild(f);break;case"meta":if(m=wy("meta","content",u).get(l+(a.content||""))){for(y=0;y<m.length;y++)if(f=m[y],f.getAttribute("content")===(a.content==null?null:""+a.content)&&f.getAttribute("name")===(a.name==null?null:a.name)&&f.getAttribute("property")===(a.property==null?null:a.property)&&f.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&f.getAttribute("charset")===(a.charSet==null?null:a.charSet)){m.splice(y,1);break t}}f=u.createElement(l),Lt(f,l,a),u.head.appendChild(f);break;default:throw Error(s(468,l))}f[pt]=t,Rt(f),l=f}t.stateNode=l}else Oy(u,t.type,t.stateNode);else t.stateNode=Cy(u,l,t.memoizedProps);else f!==l?(f===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):f.count--,l===null?Oy(u,t.type,t.stateNode):Cy(u,l,t.memoizedProps)):l===null&&t.stateNode!==null&&yd(t,t.memoizedProps,a.memoizedProps)}break;case 27:cn(r,t),un(t),l&512&&(mt||a===null||Bn(a,a.return)),a!==null&&l&4&&yd(t,t.memoizedProps,a.memoizedProps);break;case 5:if(cn(r,t),un(t),l&512&&(mt||a===null||Bn(a,a.return)),t.flags&32){u=t.stateNode;try{Jr(u,"")}catch(M){nt(t,t.return,M)}}l&4&&t.stateNode!=null&&(u=t.memoizedProps,yd(t,u,a!==null?a.memoizedProps:u)),l&1024&&(Ed=!0);break;case 6:if(cn(r,t),un(t),l&4){if(t.stateNode===null)throw Error(s(162));l=t.memoizedProps,a=t.stateNode;try{a.nodeValue=l}catch(M){nt(t,t.return,M)}}break;case 3:if(Pl=null,u=xn,xn=jl(r.containerInfo),cn(r,t),xn=u,un(t),l&4&&a!==null&&a.memoizedState.isDehydrated)try{Qa(r.containerInfo)}catch(M){nt(t,t.return,M)}Ed&&(Ed=!1,Iv(t));break;case 4:l=xn,xn=jl(t.stateNode.containerInfo),cn(r,t),un(t),xn=l;break;case 12:cn(r,t),un(t);break;case 13:cn(r,t),un(t),t.child.flags&8192&&t.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(Nd=Bt()),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Sd(t,l)));break;case 22:u=t.memoizedState!==null;var S=a!==null&&a.memoizedState!==null,A=li,H=mt;if(li=A||u,mt=H||S,cn(r,t),mt=H,li=A,un(t),l&8192)e:for(r=t.stateNode,r._visibility=u?r._visibility&-2:r._visibility|1,u&&(a===null||S||li||mt||Cr(t)),a=null,r=t;;){if(r.tag===5||r.tag===26){if(a===null){S=a=r;try{if(f=S.stateNode,u)m=f.style,typeof m.setProperty=="function"?m.setProperty("display","none","important"):m.display="none";else{y=S.stateNode;var Y=S.memoizedProps.style,k=Y!=null&&Y.hasOwnProperty("display")?Y.display:null;y.style.display=k==null||typeof k=="boolean"?"":(""+k).trim()}}catch(M){nt(S,S.return,M)}}}else if(r.tag===6){if(a===null){S=r;try{S.stateNode.nodeValue=u?"":S.memoizedProps}catch(M){nt(S,S.return,M)}}}else if((r.tag!==22&&r.tag!==23||r.memoizedState===null||r===t)&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break e;for(;r.sibling===null;){if(r.return===null||r.return===t)break e;a===r&&(a=null),r=r.return}a===r&&(a=null),r.sibling.return=r.return,r=r.sibling}l&4&&(l=t.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,Sd(t,a))));break;case 19:cn(r,t),un(t),l&4&&(l=t.updateQueue,l!==null&&(t.updateQueue=null,Sd(t,l)));break;case 30:break;case 21:break;default:cn(r,t),un(t)}}function un(t){var r=t.flags;if(r&2){try{for(var a,l=t.return;l!==null;){if(Cv(l)){a=l;break}l=l.return}if(a==null)throw Error(s(160));switch(a.tag){case 27:var u=a.stateNode,f=_d(t);Sl(t,f,u);break;case 5:var m=a.stateNode;a.flags&32&&(Jr(m,""),a.flags&=-33);var y=_d(t);Sl(t,y,m);break;case 3:case 4:var S=a.stateNode.containerInfo,A=_d(t);bd(t,A,S);break;default:throw Error(s(161))}}catch(H){nt(t,t.return,H)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function Iv(t){if(t.subtreeFlags&1024)for(t=t.child;t!==null;){var r=t;Iv(r),r.tag===5&&r.flags&1024&&r.stateNode.reset(),t=t.sibling}}function Ii(t,r){if(r.subtreeFlags&8772)for(r=r.child;r!==null;)Rv(t,r.alternate,r),r=r.sibling}function Cr(t){for(t=t.child;t!==null;){var r=t;switch(r.tag){case 0:case 11:case 14:case 15:Di(4,r,r.return),Cr(r);break;case 1:Bn(r,r.return);var a=r.stateNode;typeof a.componentWillUnmount=="function"&&Sv(r,r.return,a),Cr(r);break;case 27:Ba(r.stateNode);case 26:case 5:Bn(r,r.return),Cr(r);break;case 22:r.memoizedState===null&&Cr(r);break;case 30:Cr(r);break;default:Cr(r)}t=t.sibling}}function ki(t,r,a){for(a=a&&(r.subtreeFlags&8772)!==0,r=r.child;r!==null;){var l=r.alternate,u=t,f=r,m=f.flags;switch(f.tag){case 0:case 11:case 15:ki(u,f,a),Da(4,f);break;case 1:if(ki(u,f,a),l=f,u=l.stateNode,typeof u.componentDidMount=="function")try{u.componentDidMount()}catch(A){nt(l,l.return,A)}if(l=f,u=l.updateQueue,u!==null){var y=l.stateNode;try{var S=u.shared.hiddenCallbacks;if(S!==null)for(u.shared.hiddenCallbacks=null,u=0;u<S.length;u++)om(S[u],y)}catch(A){nt(l,l.return,A)}}a&&m&64&&Ev(f),Ia(f,f.return);break;case 27:wv(f);case 26:case 5:ki(u,f,a),a&&l===null&&m&4&&Tv(f),Ia(f,f.return);break;case 12:ki(u,f,a);break;case 13:ki(u,f,a),a&&m&4&&Av(u,f);break;case 22:f.memoizedState===null&&ki(u,f,a),Ia(f,f.return);break;case 30:break;default:ki(u,f,a)}r=r.sibling}}function Td(t,r){var a=null;t!==null&&t.memoizedState!==null&&t.memoizedState.cachePool!==null&&(a=t.memoizedState.cachePool.pool),t=null,r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(t=r.memoizedState.cachePool.pool),t!==a&&(t!=null&&t.refCount++,a!=null&&va(a))}function Cd(t,r){t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&va(t))}function Vn(t,r,a,l){if(r.subtreeFlags&10256)for(r=r.child;r!==null;)kv(t,r,a,l),r=r.sibling}function kv(t,r,a,l){var u=r.flags;switch(r.tag){case 0:case 11:case 15:Vn(t,r,a,l),u&2048&&Da(9,r);break;case 1:Vn(t,r,a,l);break;case 3:Vn(t,r,a,l),u&2048&&(t=null,r.alternate!==null&&(t=r.alternate.memoizedState.cache),r=r.memoizedState.cache,r!==t&&(r.refCount++,t!=null&&va(t)));break;case 12:if(u&2048){Vn(t,r,a,l),t=r.stateNode;try{var f=r.memoizedProps,m=f.id,y=f.onPostCommit;typeof y=="function"&&y(m,r.alternate===null?"mount":"update",t.passiveEffectDuration,-0)}catch(S){nt(r,r.return,S)}}else Vn(t,r,a,l);break;case 13:Vn(t,r,a,l);break;case 23:break;case 22:f=r.stateNode,m=r.alternate,r.memoizedState!==null?f._visibility&2?Vn(t,r,a,l):ka(t,r):f._visibility&2?Vn(t,r,a,l):(f._visibility|=2,ys(t,r,a,l,(r.subtreeFlags&10256)!==0)),u&2048&&Td(m,r);break;case 24:Vn(t,r,a,l),u&2048&&Cd(r.alternate,r);break;default:Vn(t,r,a,l)}}function ys(t,r,a,l,u){for(u=u&&(r.subtreeFlags&10256)!==0,r=r.child;r!==null;){var f=t,m=r,y=a,S=l,A=m.flags;switch(m.tag){case 0:case 11:case 15:ys(f,m,y,S,u),Da(8,m);break;case 23:break;case 22:var H=m.stateNode;m.memoizedState!==null?H._visibility&2?ys(f,m,y,S,u):ka(f,m):(H._visibility|=2,ys(f,m,y,S,u)),u&&A&2048&&Td(m.alternate,m);break;case 24:ys(f,m,y,S,u),u&&A&2048&&Cd(m.alternate,m);break;default:ys(f,m,y,S,u)}r=r.sibling}}function ka(t,r){if(r.subtreeFlags&10256)for(r=r.child;r!==null;){var a=t,l=r,u=l.flags;switch(l.tag){case 22:ka(a,l),u&2048&&Td(l.alternate,l);break;case 24:ka(a,l),u&2048&&Cd(l.alternate,l);break;default:ka(a,l)}r=r.sibling}}var Ma=8192;function _s(t){if(t.subtreeFlags&Ma)for(t=t.child;t!==null;)Mv(t),t=t.sibling}function Mv(t){switch(t.tag){case 26:_s(t),t.flags&Ma&&t.memoizedState!==null&&dC(xn,t.memoizedState,t.memoizedProps);break;case 5:_s(t);break;case 3:case 4:var r=xn;xn=jl(t.stateNode.containerInfo),_s(t),xn=r;break;case 22:t.memoizedState===null&&(r=t.alternate,r!==null&&r.memoizedState!==null?(r=Ma,Ma=16777216,_s(t),Ma=r):_s(t));break;default:_s(t)}}function jv(t){var r=t.alternate;if(r!==null&&(t=r.child,t!==null)){r.child=null;do r=t.sibling,t.sibling=null,t=r;while(t!==null)}}function ja(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];xt=l,Pv(l,t)}jv(t)}if(t.subtreeFlags&10256)for(t=t.child;t!==null;)Lv(t),t=t.sibling}function Lv(t){switch(t.tag){case 0:case 11:case 15:ja(t),t.flags&2048&&Di(9,t,t.return);break;case 3:ja(t);break;case 12:ja(t);break;case 22:var r=t.stateNode;t.memoizedState!==null&&r._visibility&2&&(t.return===null||t.return.tag!==13)?(r._visibility&=-3,Tl(t)):ja(t);break;default:ja(t)}}function Tl(t){var r=t.deletions;if((t.flags&16)!==0){if(r!==null)for(var a=0;a<r.length;a++){var l=r[a];xt=l,Pv(l,t)}jv(t)}for(t=t.child;t!==null;){switch(r=t,r.tag){case 0:case 11:case 15:Di(8,r,r.return),Tl(r);break;case 22:a=r.stateNode,a._visibility&2&&(a._visibility&=-3,Tl(r));break;default:Tl(r)}t=t.sibling}}function Pv(t,r){for(;xt!==null;){var a=xt;switch(a.tag){case 0:case 11:case 15:Di(8,a,r);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:va(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,xt=l;else e:for(a=t;xt!==null;){l=xt;var u=l.sibling,f=l.return;if(Nv(l),l===a){xt=null;break e}if(u!==null){u.return=f,xt=u;break e}xt=f}}}var RT={getCacheForType:function(t){var r=Ut(Et),a=r.data.get(t);return a===void 0&&(a=t(),r.data.set(t,a)),a}},NT=typeof WeakMap=="function"?WeakMap:Map,We=0,st=null,Pe=null,Be=0,Qe=0,dn=null,Mi=!1,bs=!1,wd=!1,ui=0,ft=0,ji=0,wr=0,Od=0,Tn=0,Es=0,La=null,Jt=null,Rd=!1,Nd=0,Cl=1/0,wl=null,Li=null,jt=0,Pi=null,Ss=null,Ts=0,xd=0,Ad=null,Uv=null,Pa=0,Dd=null;function fn(){if((We&2)!==0&&Be!==0)return Be&-Be;if(j.T!==null){var t=us;return t!==0?t:Ud()}return $r()}function zv(){Tn===0&&(Tn=(Be&536870912)===0||Ye?Ie():536870912);var t=Sn.current;return t!==null&&(t.flags|=32),Tn}function hn(t,r,a){(t===st&&(Qe===2||Qe===9)||t.cancelPendingCommit!==null)&&(Cs(t,0),Ui(t,Be,Tn,!1)),vt(t,a),((We&2)===0||t!==st)&&(t===st&&((We&2)===0&&(wr|=a),ft===4&&Ui(t,Be,Tn,!1)),Gn(t))}function Hv(t,r,a){if((We&6)!==0)throw Error(s(327));var l=!a&&(r&124)===0&&(r&t.expiredLanes)===0||re(t,r),u=l?DT(t,r):Md(t,r,!0),f=l;do{if(u===0){bs&&!l&&Ui(t,r,0,!1);break}else{if(a=t.current.alternate,f&&!xT(a)){u=Md(t,r,!1),f=!1;continue}if(u===2){if(f=r,t.errorRecoveryDisabledLanes&f)var m=0;else m=t.pendingLanes&-536870913,m=m!==0?m:m&536870912?536870912:0;if(m!==0){r=m;e:{var y=t;u=La;var S=y.current.memoizedState.isDehydrated;if(S&&(Cs(y,m).flags|=256),m=Md(y,m,!1),m!==2){if(wd&&!S){y.errorRecoveryDisabledLanes|=f,wr|=f,u=4;break e}f=Jt,Jt=u,f!==null&&(Jt===null?Jt=f:Jt.push.apply(Jt,f))}u=m}if(f=!1,u!==2)continue}}if(u===1){Cs(t,0),Ui(t,r,0,!0);break}e:{switch(l=t,f=u,f){case 0:case 1:throw Error(s(345));case 4:if((r&4194048)!==r)break;case 6:Ui(l,r,Tn,!Mi);break e;case 2:Jt=null;break;case 3:case 5:break;default:throw Error(s(329))}if((r&62914560)===r&&(u=Nd+300-Bt(),10<u)){if(Ui(l,r,Tn,!Mi),W(l,0,!0)!==0)break e;l.timeoutHandle=gy(Bv.bind(null,l,a,Jt,wl,Rd,r,Tn,wr,Es,Mi,f,2,-0,0),u);break e}Bv(l,a,Jt,wl,Rd,r,Tn,wr,Es,Mi,f,0,-0,0)}}break}while(!0);Gn(t)}function Bv(t,r,a,l,u,f,m,y,S,A,H,Y,k,M){if(t.timeoutHandle=-1,Y=r.subtreeFlags,(Y&8192||(Y&16785408)===16785408)&&($a={stylesheets:null,count:0,unsuspend:uC},Mv(r),Y=fC(),Y!==null)){t.cancelPendingCommit=Y(Wv.bind(null,t,r,f,a,l,u,m,y,S,H,1,k,M)),Ui(t,f,m,!A);return}Wv(t,r,f,a,l,u,m,y,S)}function xT(t){for(var r=t;;){var a=r.tag;if((a===0||a===11||a===15)&&r.flags&16384&&(a=r.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var u=a[l],f=u.getSnapshot;u=u.value;try{if(!on(f(),u))return!1}catch{return!1}}if(a=r.child,r.subtreeFlags&16384&&a!==null)a.return=r,r=a;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function Ui(t,r,a,l){r&=~Od,r&=~wr,t.suspendedLanes|=r,t.pingedLanes&=~r,l&&(t.warmLanes|=r),l=t.expirationTimes;for(var u=r;0<u;){var f=31-Wt(u),m=1<<f;l[f]=-1,u&=~m}a!==0&&an(t,a,r)}function Ol(){return(We&6)===0?(Ua(0),!1):!0}function Id(){if(Pe!==null){if(Qe===0)var t=Pe.return;else t=Pe,ni=_r=null,Qu(t),ms=null,Na=0,t=Pe;for(;t!==null;)bv(t.alternate,t),t=t.return;Pe=null}}function Cs(t,r){var a=t.timeoutHandle;a!==-1&&(t.timeoutHandle=-1,FT(a)),a=t.cancelPendingCommit,a!==null&&(t.cancelPendingCommit=null,a()),Id(),st=t,Pe=a=Jn(t.current,null),Be=r,Qe=0,dn=null,Mi=!1,bs=re(t,r),wd=!1,Es=Tn=Od=wr=ji=ft=0,Jt=La=null,Rd=!1,(r&8)!==0&&(r|=r&32);var l=t.entangledLanes;if(l!==0)for(t=t.entanglements,l&=r;0<l;){var u=31-Wt(l),f=1<<u;r|=t[u],l&=~f}return ui=r,Wo(),a}function Vv(t,r){De=null,j.H=hl,r===_a||r===il?(r=sm(),Qe=3):r===nm?(r=sm(),Qe=4):Qe=r===av?8:r!==null&&typeof r=="object"&&typeof r.then=="function"?6:1,dn=r,Pe===null&&(ft=1,yl(t,yn(r,t.current)))}function Gv(){var t=j.H;return j.H=hl,t===null?hl:t}function $v(){var t=j.A;return j.A=RT,t}function kd(){ft=4,Mi||(Be&4194048)!==Be&&Sn.current!==null||(bs=!0),(ji&134217727)===0&&(wr&134217727)===0||st===null||Ui(st,Be,Tn,!1)}function Md(t,r,a){var l=We;We|=2;var u=Gv(),f=$v();(st!==t||Be!==r)&&(wl=null,Cs(t,r)),r=!1;var m=ft;e:do try{if(Qe!==0&&Pe!==null){var y=Pe,S=dn;switch(Qe){case 8:Id(),m=6;break e;case 3:case 2:case 9:case 6:Sn.current===null&&(r=!0);var A=Qe;if(Qe=0,dn=null,ws(t,y,S,A),a&&bs){m=0;break e}break;default:A=Qe,Qe=0,dn=null,ws(t,y,S,A)}}AT(),m=ft;break}catch(H){Vv(t,H)}while(!0);return r&&t.shellSuspendCounter++,ni=_r=null,We=l,j.H=u,j.A=f,Pe===null&&(st=null,Be=0,Wo()),m}function AT(){for(;Pe!==null;)qv(Pe)}function DT(t,r){var a=We;We|=2;var l=Gv(),u=$v();st!==t||Be!==r?(wl=null,Cl=Bt()+500,Cs(t,r)):bs=re(t,r);e:do try{if(Qe!==0&&Pe!==null){r=Pe;var f=dn;t:switch(Qe){case 1:Qe=0,dn=null,ws(t,r,f,1);break;case 2:case 9:if(im(f)){Qe=0,dn=null,Yv(r);break}r=function(){Qe!==2&&Qe!==9||st!==t||(Qe=7),Gn(t)},f.then(r,r);break e;case 3:Qe=7;break e;case 4:Qe=5;break e;case 7:im(f)?(Qe=0,dn=null,Yv(r)):(Qe=0,dn=null,ws(t,r,f,7));break;case 5:var m=null;switch(Pe.tag){case 26:m=Pe.memoizedState;case 5:case 27:var y=Pe;if(!m||Ry(m)){Qe=0,dn=null;var S=y.sibling;if(S!==null)Pe=S;else{var A=y.return;A!==null?(Pe=A,Rl(A)):Pe=null}break t}}Qe=0,dn=null,ws(t,r,f,5);break;case 6:Qe=0,dn=null,ws(t,r,f,6);break;case 8:Id(),ft=6;break e;default:throw Error(s(462))}}IT();break}catch(H){Vv(t,H)}while(!0);return ni=_r=null,j.H=l,j.A=u,We=a,Pe!==null?0:(st=null,Be=0,Wo(),ft)}function IT(){for(;Pe!==null&&!Un();)qv(Pe)}function qv(t){var r=yv(t.alternate,t,ui);t.memoizedProps=t.pendingProps,r===null?Rl(t):Pe=r}function Yv(t){var r=t,a=r.alternate;switch(r.tag){case 15:case 0:r=fv(a,r,r.pendingProps,r.type,void 0,Be);break;case 11:r=fv(a,r,r.pendingProps,r.type.render,r.ref,Be);break;case 5:Qu(r);default:bv(a,r),r=Pe=Fg(r,ui),r=yv(a,r,ui)}t.memoizedProps=t.pendingProps,r===null?Rl(t):Pe=r}function ws(t,r,a,l){ni=_r=null,Qu(r),ms=null,Na=0;var u=r.return;try{if(ET(t,u,r,a,Be)){ft=1,yl(t,yn(a,t.current)),Pe=null;return}}catch(f){if(u!==null)throw Pe=u,f;ft=1,yl(t,yn(a,t.current)),Pe=null;return}r.flags&32768?(Ye||l===1?t=!0:bs||(Be&536870912)!==0?t=!1:(Mi=t=!0,(l===2||l===9||l===3||l===6)&&(l=Sn.current,l!==null&&l.tag===13&&(l.flags|=16384))),Fv(r,t)):Rl(r)}function Rl(t){var r=t;do{if((r.flags&32768)!==0){Fv(r,Mi);return}t=r.return;var a=TT(r.alternate,r,ui);if(a!==null){Pe=a;return}if(r=r.sibling,r!==null){Pe=r;return}Pe=r=t}while(r!==null);ft===0&&(ft=5)}function Fv(t,r){do{var a=CT(t.alternate,t);if(a!==null){a.flags&=32767,Pe=a;return}if(a=t.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!r&&(t=t.sibling,t!==null)){Pe=t;return}Pe=t=a}while(t!==null);ft=6,Pe=null}function Wv(t,r,a,l,u,f,m,y,S){t.cancelPendingCommit=null;do Nl();while(jt!==0);if((We&6)!==0)throw Error(s(327));if(r!==null){if(r===t.current)throw Error(s(177));if(f=r.lanes|r.childLanes,f|=Cu,wt(t,a,f,m,y,S),t===st&&(Pe=st=null,Be=0),Ss=r,Pi=t,Ts=a,xd=f,Ad=u,Uv=l,(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?(t.callbackNode=null,t.callbackPriority=0,LT(Si,function(){return Jv(),null})):(t.callbackNode=null,t.callbackPriority=0),l=(r.flags&13878)!==0,(r.subtreeFlags&13878)!==0||l){l=j.T,j.T=null,u=Z.p,Z.p=2,m=We,We|=4;try{wT(t,r,a)}finally{We=m,Z.p=u,j.T=l}}jt=1,Qv(),Kv(),Xv()}}function Qv(){if(jt===1){jt=0;var t=Pi,r=Ss,a=(r.flags&13878)!==0;if((r.subtreeFlags&13878)!==0||a){a=j.T,j.T=null;var l=Z.p;Z.p=2;var u=We;We|=4;try{Dv(r,t);var f=Yd,m=Pg(t.containerInfo),y=f.focusedElem,S=f.selectionRange;if(m!==y&&y&&y.ownerDocument&&Lg(y.ownerDocument.documentElement,y)){if(S!==null&&_u(y)){var A=S.start,H=S.end;if(H===void 0&&(H=A),"selectionStart"in y)y.selectionStart=A,y.selectionEnd=Math.min(H,y.value.length);else{var Y=y.ownerDocument||document,k=Y&&Y.defaultView||window;if(k.getSelection){var M=k.getSelection(),_e=y.textContent.length,me=Math.min(S.start,_e),Je=S.end===void 0?me:Math.min(S.end,_e);!M.extend&&me>Je&&(m=Je,Je=me,me=m);var R=jg(y,me),w=jg(y,Je);if(R&&w&&(M.rangeCount!==1||M.anchorNode!==R.node||M.anchorOffset!==R.offset||M.focusNode!==w.node||M.focusOffset!==w.offset)){var x=Y.createRange();x.setStart(R.node,R.offset),M.removeAllRanges(),me>Je?(M.addRange(x),M.extend(w.node,w.offset)):(x.setEnd(w.node,w.offset),M.addRange(x))}}}}for(Y=[],M=y;M=M.parentNode;)M.nodeType===1&&Y.push({element:M,left:M.scrollLeft,top:M.scrollTop});for(typeof y.focus=="function"&&y.focus(),y=0;y<Y.length;y++){var G=Y[y];G.element.scrollLeft=G.left,G.element.scrollTop=G.top}}Hl=!!qd,Yd=qd=null}finally{We=u,Z.p=l,j.T=a}}t.current=r,jt=2}}function Kv(){if(jt===2){jt=0;var t=Pi,r=Ss,a=(r.flags&8772)!==0;if((r.subtreeFlags&8772)!==0||a){a=j.T,j.T=null;var l=Z.p;Z.p=2;var u=We;We|=4;try{Rv(t,r.alternate,r)}finally{We=u,Z.p=l,j.T=a}}jt=3}}function Xv(){if(jt===4||jt===3){jt=0,ta();var t=Pi,r=Ss,a=Ts,l=Uv;(r.subtreeFlags&10256)!==0||(r.flags&10256)!==0?jt=5:(jt=0,Ss=Pi=null,Zv(t,t.pendingLanes));var u=t.pendingLanes;if(u===0&&(Li=null),Vt(a),r=r.stateNode,Ft&&typeof Ft.onCommitFiberRoot=="function")try{Ft.onCommitFiberRoot(Vr,r,void 0,(r.current.flags&128)===128)}catch{}if(l!==null){r=j.T,u=Z.p,Z.p=2,j.T=null;try{for(var f=t.onRecoverableError,m=0;m<l.length;m++){var y=l[m];f(y.value,{componentStack:y.stack})}}finally{j.T=r,Z.p=u}}(Ts&3)!==0&&Nl(),Gn(t),u=t.pendingLanes,(a&4194090)!==0&&(u&42)!==0?t===Dd?Pa++:(Pa=0,Dd=t):Pa=0,Ua(0)}}function Zv(t,r){(t.pooledCacheLanes&=r)===0&&(r=t.pooledCache,r!=null&&(t.pooledCache=null,va(r)))}function Nl(t){return Qv(),Kv(),Xv(),Jv()}function Jv(){if(jt!==5)return!1;var t=Pi,r=xd;xd=0;var a=Vt(Ts),l=j.T,u=Z.p;try{Z.p=32>a?32:a,j.T=null,a=Ad,Ad=null;var f=Pi,m=Ts;if(jt=0,Ss=Pi=null,Ts=0,(We&6)!==0)throw Error(s(331));var y=We;if(We|=4,Lv(f.current),kv(f,f.current,m,a),We=y,Ua(0,!1),Ft&&typeof Ft.onPostCommitFiberRoot=="function")try{Ft.onPostCommitFiberRoot(Vr,f)}catch{}return!0}finally{Z.p=u,j.T=l,Zv(t,r)}}function ey(t,r,a){r=yn(a,r),r=cd(t.stateNode,r,2),t=Ri(t,r,2),t!==null&&(vt(t,2),Gn(t))}function nt(t,r,a){if(t.tag===3)ey(t,t,a);else for(;r!==null;){if(r.tag===3){ey(r,t,a);break}else if(r.tag===1){var l=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Li===null||!Li.has(l))){t=yn(a,t),a=rv(2),l=Ri(r,a,2),l!==null&&(sv(a,l,r,t),vt(l,2),Gn(l));break}}r=r.return}}function jd(t,r,a){var l=t.pingCache;if(l===null){l=t.pingCache=new NT;var u=new Set;l.set(r,u)}else u=l.get(r),u===void 0&&(u=new Set,l.set(r,u));u.has(a)||(wd=!0,u.add(a),t=kT.bind(null,t,r,a),r.then(t,t))}function kT(t,r,a){var l=t.pingCache;l!==null&&l.delete(r),t.pingedLanes|=t.suspendedLanes&a,t.warmLanes&=~a,st===t&&(Be&a)===a&&(ft===4||ft===3&&(Be&62914560)===Be&&300>Bt()-Nd?(We&2)===0&&Cs(t,0):Od|=a,Es===Be&&(Es=0)),Gn(t)}function ty(t,r){r===0&&(r=Ge()),t=as(t,r),t!==null&&(vt(t,r),Gn(t))}function MT(t){var r=t.memoizedState,a=0;r!==null&&(a=r.retryLane),ty(t,a)}function jT(t,r){var a=0;switch(t.tag){case 13:var l=t.stateNode,u=t.memoizedState;u!==null&&(a=u.retryLane);break;case 19:l=t.stateNode;break;case 22:l=t.stateNode._retryCache;break;default:throw Error(s(314))}l!==null&&l.delete(r),ty(t,a)}function LT(t,r){return Ei(t,r)}var xl=null,Os=null,Ld=!1,Al=!1,Pd=!1,Or=0;function Gn(t){t!==Os&&t.next===null&&(Os===null?xl=Os=t:Os=Os.next=t),Al=!0,Ld||(Ld=!0,UT())}function Ua(t,r){if(!Pd&&Al){Pd=!0;do for(var a=!1,l=xl;l!==null;){if(t!==0){var u=l.pendingLanes;if(u===0)var f=0;else{var m=l.suspendedLanes,y=l.pingedLanes;f=(1<<31-Wt(42|t)+1)-1,f&=u&~(m&~y),f=f&201326741?f&201326741|1:f?f|2:0}f!==0&&(a=!0,sy(l,f))}else f=Be,f=W(l,l===st?f:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(f&3)===0||re(l,f)||(a=!0,sy(l,f));l=l.next}while(a);Pd=!1}}function PT(){ny()}function ny(){Al=Ld=!1;var t=0;Or!==0&&(YT()&&(t=Or),Or=0);for(var r=Bt(),a=null,l=xl;l!==null;){var u=l.next,f=iy(l,r);f===0?(l.next=null,a===null?xl=u:a.next=u,u===null&&(Os=a)):(a=l,(t!==0||(f&3)!==0)&&(Al=!0)),l=u}Ua(t)}function iy(t,r){for(var a=t.suspendedLanes,l=t.pingedLanes,u=t.expirationTimes,f=t.pendingLanes&-62914561;0<f;){var m=31-Wt(f),y=1<<m,S=u[m];S===-1?((y&a)===0||(y&l)!==0)&&(u[m]=ge(y,r)):S<=r&&(t.expiredLanes|=y),f&=~y}if(r=st,a=Be,a=W(t,t===r?a:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l=t.callbackNode,a===0||t===r&&(Qe===2||Qe===9)||t.cancelPendingCommit!==null)return l!==null&&l!==null&&sn(l),t.callbackNode=null,t.callbackPriority=0;if((a&3)===0||re(t,a)){if(r=a&-a,r===t.callbackPriority)return r;switch(l!==null&&sn(l),Vt(a)){case 2:case 8:a=cr;break;case 32:a=Si;break;case 268435456:a=pn;break;default:a=Si}return l=ry.bind(null,t),a=Ei(a,l),t.callbackPriority=r,t.callbackNode=a,r}return l!==null&&l!==null&&sn(l),t.callbackPriority=2,t.callbackNode=null,2}function ry(t,r){if(jt!==0&&jt!==5)return t.callbackNode=null,t.callbackPriority=0,null;var a=t.callbackNode;if(Nl()&&t.callbackNode!==a)return null;var l=Be;return l=W(t,t===st?l:0,t.cancelPendingCommit!==null||t.timeoutHandle!==-1),l===0?null:(Hv(t,l,r),iy(t,Bt()),t.callbackNode!=null&&t.callbackNode===a?ry.bind(null,t):null)}function sy(t,r){if(Nl())return null;Hv(t,r,!0)}function UT(){WT(function(){(We&6)!==0?Ei(Br,PT):ny()})}function Ud(){return Or===0&&(Or=Ie()),Or}function ay(t){return t==null||typeof t=="symbol"||typeof t=="boolean"?null:typeof t=="function"?t:Bo(""+t)}function oy(t,r){var a=r.ownerDocument.createElement("input");return a.name=r.name,a.value=r.value,t.id&&a.setAttribute("form",t.id),r.parentNode.insertBefore(a,r),t=new FormData(t),a.parentNode.removeChild(a),t}function zT(t,r,a,l,u){if(r==="submit"&&a&&a.stateNode===u){var f=ay((u[ct]||null).action),m=l.submitter;m&&(r=(r=m[ct]||null)?ay(r.formAction):m.getAttribute("formAction"),r!==null&&(f=r,m=null));var y=new qo("action","action",null,l,u);t.push({event:y,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Or!==0){var S=m?oy(u,m):new FormData(u);rd(a,{pending:!0,data:S,method:u.method,action:f},null,S)}}else typeof f=="function"&&(y.preventDefault(),S=m?oy(u,m):new FormData(u),rd(a,{pending:!0,data:S,method:u.method,action:f},f,S))},currentTarget:u}]})}}for(var zd=0;zd<Tu.length;zd++){var Hd=Tu[zd],HT=Hd.toLowerCase(),BT=Hd[0].toUpperCase()+Hd.slice(1);Nn(HT,"on"+BT)}Nn(Hg,"onAnimationEnd"),Nn(Bg,"onAnimationIteration"),Nn(Vg,"onAnimationStart"),Nn("dblclick","onDoubleClick"),Nn("focusin","onFocus"),Nn("focusout","onBlur"),Nn(rT,"onTransitionRun"),Nn(sT,"onTransitionStart"),Nn(aT,"onTransitionCancel"),Nn(Gg,"onTransitionEnd"),Kr("onMouseEnter",["mouseout","mouseover"]),Kr("onMouseLeave",["mouseout","mouseover"]),Kr("onPointerEnter",["pointerout","pointerover"]),Kr("onPointerLeave",["pointerout","pointerover"]),ur("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ur("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ur("onBeforeInput",["compositionend","keypress","textInput","paste"]),ur("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ur("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ur("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var za="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),VT=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(za));function ly(t,r){r=(r&4)!==0;for(var a=0;a<t.length;a++){var l=t[a],u=l.event;l=l.listeners;e:{var f=void 0;if(r)for(var m=l.length-1;0<=m;m--){var y=l[m],S=y.instance,A=y.currentTarget;if(y=y.listener,S!==f&&u.isPropagationStopped())break e;f=y,u.currentTarget=A;try{f(u)}catch(H){vl(H)}u.currentTarget=null,f=S}else for(m=0;m<l.length;m++){if(y=l[m],S=y.instance,A=y.currentTarget,y=y.listener,S!==f&&u.isPropagationStopped())break e;f=y,u.currentTarget=A;try{f(u)}catch(H){vl(H)}u.currentTarget=null,f=S}}}}function Ue(t,r){var a=r[Qn];a===void 0&&(a=r[Qn]=new Set);var l=t+"__bubble";a.has(l)||(cy(r,t,2,!1),a.add(l))}function Bd(t,r,a){var l=0;r&&(l|=4),cy(a,t,l,r)}var Dl="_reactListening"+Math.random().toString(36).slice(2);function Vd(t){if(!t[Dl]){t[Dl]=!0,ng.forEach(function(a){a!=="selectionchange"&&(VT.has(a)||Bd(a,!1,t),Bd(a,!0,t))});var r=t.nodeType===9?t:t.ownerDocument;r===null||r[Dl]||(r[Dl]=!0,Bd("selectionchange",!1,r))}}function cy(t,r,a,l){switch(ky(r)){case 2:var u=gC;break;case 8:u=mC;break;default:u=nf}a=u.bind(null,r,a,t),u=void 0,!uu||r!=="touchstart"&&r!=="touchmove"&&r!=="wheel"||(u=!0),l?u!==void 0?t.addEventListener(r,a,{capture:!0,passive:u}):t.addEventListener(r,a,!0):u!==void 0?t.addEventListener(r,a,{passive:u}):t.addEventListener(r,a,!1)}function Gd(t,r,a,l,u){var f=l;if((r&1)===0&&(r&2)===0&&l!==null)e:for(;;){if(l===null)return;var m=l.tag;if(m===3||m===4){var y=l.stateNode.containerInfo;if(y===u)break;if(m===4)for(m=l.return;m!==null;){var S=m.tag;if((S===3||S===4)&&m.stateNode.containerInfo===u)return;m=m.return}for(;y!==null;){if(m=Fr(y),m===null)return;if(S=m.tag,S===5||S===6||S===26||S===27){l=f=m;continue e}y=y.parentNode}}l=l.return}mg(function(){var A=f,H=lu(a),Y=[];e:{var k=$g.get(t);if(k!==void 0){var M=qo,_e=t;switch(t){case"keypress":if(Go(a)===0)break e;case"keydown":case"keyup":M=LS;break;case"focusin":_e="focus",M=pu;break;case"focusout":_e="blur",M=pu;break;case"beforeblur":case"afterblur":M=pu;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":M=_g;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":M=CS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":M=zS;break;case Hg:case Bg:case Vg:M=RS;break;case Gg:M=BS;break;case"scroll":case"scrollend":M=SS;break;case"wheel":M=GS;break;case"copy":case"cut":case"paste":M=xS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":M=Eg;break;case"toggle":case"beforetoggle":M=qS}var me=(r&4)!==0,Je=!me&&(t==="scroll"||t==="scrollend"),R=me?k!==null?k+"Capture":null:k;me=[];for(var w=A,x;w!==null;){var G=w;if(x=G.stateNode,G=G.tag,G!==5&&G!==26&&G!==27||x===null||R===null||(G=ra(w,R),G!=null&&me.push(Ha(w,G,x))),Je)break;w=w.return}0<me.length&&(k=new M(k,_e,null,a,H),Y.push({event:k,listeners:me}))}}if((r&7)===0){e:{if(k=t==="mouseover"||t==="pointerover",M=t==="mouseout"||t==="pointerout",k&&a!==ou&&(_e=a.relatedTarget||a.fromElement)&&(Fr(_e)||_e[Qt]))break e;if((M||k)&&(k=H.window===H?H:(k=H.ownerDocument)?k.defaultView||k.parentWindow:window,M?(_e=a.relatedTarget||a.toElement,M=A,_e=_e?Fr(_e):null,_e!==null&&(Je=c(_e),me=_e.tag,_e!==Je||me!==5&&me!==27&&me!==6)&&(_e=null)):(M=null,_e=A),M!==_e)){if(me=_g,G="onMouseLeave",R="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(me=Eg,G="onPointerLeave",R="onPointerEnter",w="pointer"),Je=M==null?k:ia(M),x=_e==null?k:ia(_e),k=new me(G,w+"leave",M,a,H),k.target=Je,k.relatedTarget=x,G=null,Fr(H)===A&&(me=new me(R,w+"enter",_e,a,H),me.target=x,me.relatedTarget=Je,G=me),Je=G,M&&_e)t:{for(me=M,R=_e,w=0,x=me;x;x=Rs(x))w++;for(x=0,G=R;G;G=Rs(G))x++;for(;0<w-x;)me=Rs(me),w--;for(;0<x-w;)R=Rs(R),x--;for(;w--;){if(me===R||R!==null&&me===R.alternate)break t;me=Rs(me),R=Rs(R)}me=null}else me=null;M!==null&&uy(Y,k,M,me,!1),_e!==null&&Je!==null&&uy(Y,Je,_e,me,!0)}}e:{if(k=A?ia(A):window,M=k.nodeName&&k.nodeName.toLowerCase(),M==="select"||M==="input"&&k.type==="file")var oe=xg;else if(Rg(k))if(Ag)oe=tT;else{oe=JS;var ke=ZS}else M=k.nodeName,!M||M.toLowerCase()!=="input"||k.type!=="checkbox"&&k.type!=="radio"?A&&au(A.elementType)&&(oe=xg):oe=eT;if(oe&&(oe=oe(t,A))){Ng(Y,oe,a,H);break e}ke&&ke(t,k,A),t==="focusout"&&A&&k.type==="number"&&A.memoizedProps.value!=null&&su(k,"number",k.value)}switch(ke=A?ia(A):window,t){case"focusin":(Rg(ke)||ke.contentEditable==="true")&&(is=ke,bu=A,fa=null);break;case"focusout":fa=bu=is=null;break;case"mousedown":Eu=!0;break;case"contextmenu":case"mouseup":case"dragend":Eu=!1,Ug(Y,a,H);break;case"selectionchange":if(iT)break;case"keydown":case"keyup":Ug(Y,a,H)}var he;if(mu)e:{switch(t){case"compositionstart":var ve="onCompositionStart";break e;case"compositionend":ve="onCompositionEnd";break e;case"compositionupdate":ve="onCompositionUpdate";break e}ve=void 0}else ns?wg(t,a)&&(ve="onCompositionEnd"):t==="keydown"&&a.keyCode===229&&(ve="onCompositionStart");ve&&(Sg&&a.locale!=="ko"&&(ns||ve!=="onCompositionStart"?ve==="onCompositionEnd"&&ns&&(he=vg()):(Ti=H,du="value"in Ti?Ti.value:Ti.textContent,ns=!0)),ke=Il(A,ve),0<ke.length&&(ve=new bg(ve,t,null,a,H),Y.push({event:ve,listeners:ke}),he?ve.data=he:(he=Og(a),he!==null&&(ve.data=he)))),(he=FS?WS(t,a):QS(t,a))&&(ve=Il(A,"onBeforeInput"),0<ve.length&&(ke=new bg("onBeforeInput","beforeinput",null,a,H),Y.push({event:ke,listeners:ve}),ke.data=he)),zT(Y,t,A,a,H)}ly(Y,r)})}function Ha(t,r,a){return{instance:t,listener:r,currentTarget:a}}function Il(t,r){for(var a=r+"Capture",l=[];t!==null;){var u=t,f=u.stateNode;if(u=u.tag,u!==5&&u!==26&&u!==27||f===null||(u=ra(t,a),u!=null&&l.unshift(Ha(t,u,f)),u=ra(t,r),u!=null&&l.push(Ha(t,u,f))),t.tag===3)return l;t=t.return}return[]}function Rs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5&&t.tag!==27);return t||null}function uy(t,r,a,l,u){for(var f=r._reactName,m=[];a!==null&&a!==l;){var y=a,S=y.alternate,A=y.stateNode;if(y=y.tag,S!==null&&S===l)break;y!==5&&y!==26&&y!==27||A===null||(S=A,u?(A=ra(a,f),A!=null&&m.unshift(Ha(a,A,S))):u||(A=ra(a,f),A!=null&&m.push(Ha(a,A,S)))),a=a.return}m.length!==0&&t.push({event:r,listeners:m})}var GT=/\r\n?/g,$T=/\u0000|\uFFFD/g;function dy(t){return(typeof t=="string"?t:""+t).replace(GT,`
`).replace($T,"")}function fy(t,r){return r=dy(r),dy(t)===r}function kl(){}function Ze(t,r,a,l,u,f){switch(a){case"children":typeof l=="string"?r==="body"||r==="textarea"&&l===""||Jr(t,l):(typeof l=="number"||typeof l=="bigint")&&r!=="body"&&Jr(t,""+l);break;case"className":Uo(t,"class",l);break;case"tabIndex":Uo(t,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Uo(t,a,l);break;case"style":pg(t,l,f);break;case"data":if(r!=="object"){Uo(t,"data",l);break}case"src":case"href":if(l===""&&(r!=="a"||a!=="href")){t.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Bo(""+l),t.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){t.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof f=="function"&&(a==="formAction"?(r!=="input"&&Ze(t,r,"name",u.name,u,null),Ze(t,r,"formEncType",u.formEncType,u,null),Ze(t,r,"formMethod",u.formMethod,u,null),Ze(t,r,"formTarget",u.formTarget,u,null)):(Ze(t,r,"encType",u.encType,u,null),Ze(t,r,"method",u.method,u,null),Ze(t,r,"target",u.target,u,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){t.removeAttribute(a);break}l=Bo(""+l),t.setAttribute(a,l);break;case"onClick":l!=null&&(t.onclick=kl);break;case"onScroll":l!=null&&Ue("scroll",t);break;case"onScrollEnd":l!=null&&Ue("scrollend",t);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(u.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"multiple":t.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":t.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){t.removeAttribute("xlink:href");break}a=Bo(""+l),t.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""+l):t.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,""):t.removeAttribute(a);break;case"capture":case"download":l===!0?t.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?t.setAttribute(a,l):t.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?t.setAttribute(a,l):t.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?t.removeAttribute(a):t.setAttribute(a,l);break;case"popover":Ue("beforetoggle",t),Ue("toggle",t),Po(t,"popover",l);break;case"xlinkActuate":Xn(t,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Xn(t,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Xn(t,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Xn(t,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Xn(t,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Xn(t,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Xn(t,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Xn(t,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Xn(t,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":Po(t,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=bS.get(a)||a,Po(t,a,l))}}function $d(t,r,a,l,u,f){switch(a){case"style":pg(t,l,f);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(s(61));if(a=l.__html,a!=null){if(u.children!=null)throw Error(s(60));t.innerHTML=a}}break;case"children":typeof l=="string"?Jr(t,l):(typeof l=="number"||typeof l=="bigint")&&Jr(t,""+l);break;case"onScroll":l!=null&&Ue("scroll",t);break;case"onScrollEnd":l!=null&&Ue("scrollend",t);break;case"onClick":l!=null&&(t.onclick=kl);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ig.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(u=a.endsWith("Capture"),r=a.slice(2,u?a.length-7:void 0),f=t[ct]||null,f=f!=null?f[a]:null,typeof f=="function"&&t.removeEventListener(r,f,u),typeof l=="function")){typeof f!="function"&&f!==null&&(a in t?t[a]=null:t.hasAttribute(a)&&t.removeAttribute(a)),t.addEventListener(r,l,u);break e}a in t?t[a]=l:l===!0?t.setAttribute(a,""):Po(t,a,l)}}}function Lt(t,r,a){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ue("error",t),Ue("load",t);var l=!1,u=!1,f;for(f in a)if(a.hasOwnProperty(f)){var m=a[f];if(m!=null)switch(f){case"src":l=!0;break;case"srcSet":u=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:Ze(t,r,f,m,a,null)}}u&&Ze(t,r,"srcSet",a.srcSet,a,null),l&&Ze(t,r,"src",a.src,a,null);return;case"input":Ue("invalid",t);var y=f=m=u=null,S=null,A=null;for(l in a)if(a.hasOwnProperty(l)){var H=a[l];if(H!=null)switch(l){case"name":u=H;break;case"type":m=H;break;case"checked":S=H;break;case"defaultChecked":A=H;break;case"value":f=H;break;case"defaultValue":y=H;break;case"children":case"dangerouslySetInnerHTML":if(H!=null)throw Error(s(137,r));break;default:Ze(t,r,l,H,a,null)}}ug(t,f,y,S,A,m,u,!1),zo(t);return;case"select":Ue("invalid",t),l=m=f=null;for(u in a)if(a.hasOwnProperty(u)&&(y=a[u],y!=null))switch(u){case"value":f=y;break;case"defaultValue":m=y;break;case"multiple":l=y;default:Ze(t,r,u,y,a,null)}r=f,a=m,t.multiple=!!l,r!=null?Zr(t,!!l,r,!1):a!=null&&Zr(t,!!l,a,!0);return;case"textarea":Ue("invalid",t),f=u=l=null;for(m in a)if(a.hasOwnProperty(m)&&(y=a[m],y!=null))switch(m){case"value":l=y;break;case"defaultValue":u=y;break;case"children":f=y;break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(s(91));break;default:Ze(t,r,m,y,a,null)}fg(t,l,u,f),zo(t);return;case"option":for(S in a)if(a.hasOwnProperty(S)&&(l=a[S],l!=null))switch(S){case"selected":t.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:Ze(t,r,S,l,a,null)}return;case"dialog":Ue("beforetoggle",t),Ue("toggle",t),Ue("cancel",t),Ue("close",t);break;case"iframe":case"object":Ue("load",t);break;case"video":case"audio":for(l=0;l<za.length;l++)Ue(za[l],t);break;case"image":Ue("error",t),Ue("load",t);break;case"details":Ue("toggle",t);break;case"embed":case"source":case"link":Ue("error",t),Ue("load",t);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(A in a)if(a.hasOwnProperty(A)&&(l=a[A],l!=null))switch(A){case"children":case"dangerouslySetInnerHTML":throw Error(s(137,r));default:Ze(t,r,A,l,a,null)}return;default:if(au(r)){for(H in a)a.hasOwnProperty(H)&&(l=a[H],l!==void 0&&$d(t,r,H,l,a,void 0));return}}for(y in a)a.hasOwnProperty(y)&&(l=a[y],l!=null&&Ze(t,r,y,l,a,null))}function qT(t,r,a,l){switch(r){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var u=null,f=null,m=null,y=null,S=null,A=null,H=null;for(M in a){var Y=a[M];if(a.hasOwnProperty(M)&&Y!=null)switch(M){case"checked":break;case"value":break;case"defaultValue":S=Y;default:l.hasOwnProperty(M)||Ze(t,r,M,null,l,Y)}}for(var k in l){var M=l[k];if(Y=a[k],l.hasOwnProperty(k)&&(M!=null||Y!=null))switch(k){case"type":f=M;break;case"name":u=M;break;case"checked":A=M;break;case"defaultChecked":H=M;break;case"value":m=M;break;case"defaultValue":y=M;break;case"children":case"dangerouslySetInnerHTML":if(M!=null)throw Error(s(137,r));break;default:M!==Y&&Ze(t,r,k,M,l,Y)}}ru(t,m,y,S,A,H,f,u);return;case"select":M=m=y=k=null;for(f in a)if(S=a[f],a.hasOwnProperty(f)&&S!=null)switch(f){case"value":break;case"multiple":M=S;default:l.hasOwnProperty(f)||Ze(t,r,f,null,l,S)}for(u in l)if(f=l[u],S=a[u],l.hasOwnProperty(u)&&(f!=null||S!=null))switch(u){case"value":k=f;break;case"defaultValue":y=f;break;case"multiple":m=f;default:f!==S&&Ze(t,r,u,f,l,S)}r=y,a=m,l=M,k!=null?Zr(t,!!a,k,!1):!!l!=!!a&&(r!=null?Zr(t,!!a,r,!0):Zr(t,!!a,a?[]:"",!1));return;case"textarea":M=k=null;for(y in a)if(u=a[y],a.hasOwnProperty(y)&&u!=null&&!l.hasOwnProperty(y))switch(y){case"value":break;case"children":break;default:Ze(t,r,y,null,l,u)}for(m in l)if(u=l[m],f=a[m],l.hasOwnProperty(m)&&(u!=null||f!=null))switch(m){case"value":k=u;break;case"defaultValue":M=u;break;case"children":break;case"dangerouslySetInnerHTML":if(u!=null)throw Error(s(91));break;default:u!==f&&Ze(t,r,m,u,l,f)}dg(t,k,M);return;case"option":for(var _e in a)if(k=a[_e],a.hasOwnProperty(_e)&&k!=null&&!l.hasOwnProperty(_e))switch(_e){case"selected":t.selected=!1;break;default:Ze(t,r,_e,null,l,k)}for(S in l)if(k=l[S],M=a[S],l.hasOwnProperty(S)&&k!==M&&(k!=null||M!=null))switch(S){case"selected":t.selected=k&&typeof k!="function"&&typeof k!="symbol";break;default:Ze(t,r,S,k,l,M)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var me in a)k=a[me],a.hasOwnProperty(me)&&k!=null&&!l.hasOwnProperty(me)&&Ze(t,r,me,null,l,k);for(A in l)if(k=l[A],M=a[A],l.hasOwnProperty(A)&&k!==M&&(k!=null||M!=null))switch(A){case"children":case"dangerouslySetInnerHTML":if(k!=null)throw Error(s(137,r));break;default:Ze(t,r,A,k,l,M)}return;default:if(au(r)){for(var Je in a)k=a[Je],a.hasOwnProperty(Je)&&k!==void 0&&!l.hasOwnProperty(Je)&&$d(t,r,Je,void 0,l,k);for(H in l)k=l[H],M=a[H],!l.hasOwnProperty(H)||k===M||k===void 0&&M===void 0||$d(t,r,H,k,l,M);return}}for(var R in a)k=a[R],a.hasOwnProperty(R)&&k!=null&&!l.hasOwnProperty(R)&&Ze(t,r,R,null,l,k);for(Y in l)k=l[Y],M=a[Y],!l.hasOwnProperty(Y)||k===M||k==null&&M==null||Ze(t,r,Y,k,l,M)}var qd=null,Yd=null;function Ml(t){return t.nodeType===9?t:t.ownerDocument}function hy(t){switch(t){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function py(t,r){if(t===0)switch(r){case"svg":return 1;case"math":return 2;default:return 0}return t===1&&r==="foreignObject"?0:t}function Fd(t,r){return t==="textarea"||t==="noscript"||typeof r.children=="string"||typeof r.children=="number"||typeof r.children=="bigint"||typeof r.dangerouslySetInnerHTML=="object"&&r.dangerouslySetInnerHTML!==null&&r.dangerouslySetInnerHTML.__html!=null}var Wd=null;function YT(){var t=window.event;return t&&t.type==="popstate"?t===Wd?!1:(Wd=t,!0):(Wd=null,!1)}var gy=typeof setTimeout=="function"?setTimeout:void 0,FT=typeof clearTimeout=="function"?clearTimeout:void 0,my=typeof Promise=="function"?Promise:void 0,WT=typeof queueMicrotask=="function"?queueMicrotask:typeof my<"u"?function(t){return my.resolve(null).then(t).catch(QT)}:gy;function QT(t){setTimeout(function(){throw t})}function zi(t){return t==="head"}function vy(t,r){var a=r,l=0,u=0;do{var f=a.nextSibling;if(t.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(0<l&&8>l){a=l;var m=t.ownerDocument;if(a&1&&Ba(m.documentElement),a&2&&Ba(m.body),a&4)for(a=m.head,Ba(a),m=a.firstChild;m;){var y=m.nextSibling,S=m.nodeName;m[Kn]||S==="SCRIPT"||S==="STYLE"||S==="LINK"&&m.rel.toLowerCase()==="stylesheet"||a.removeChild(m),m=y}}if(u===0){t.removeChild(f),Qa(r);return}u--}else a==="$"||a==="$?"||a==="$!"?u++:l=a.charCodeAt(0)-48;else l=0;a=f}while(a);Qa(r)}function Qd(t){var r=t.firstChild;for(r&&r.nodeType===10&&(r=r.nextSibling);r;){var a=r;switch(r=r.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":Qd(a),eu(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}t.removeChild(a)}}function KT(t,r,a,l){for(;t.nodeType===1;){var u=a;if(t.nodeName.toLowerCase()!==r.toLowerCase()){if(!l&&(t.nodeName!=="INPUT"||t.type!=="hidden"))break}else if(l){if(!t[Kn])switch(r){case"meta":if(!t.hasAttribute("itemprop"))break;return t;case"link":if(f=t.getAttribute("rel"),f==="stylesheet"&&t.hasAttribute("data-precedence"))break;if(f!==u.rel||t.getAttribute("href")!==(u.href==null||u.href===""?null:u.href)||t.getAttribute("crossorigin")!==(u.crossOrigin==null?null:u.crossOrigin)||t.getAttribute("title")!==(u.title==null?null:u.title))break;return t;case"style":if(t.hasAttribute("data-precedence"))break;return t;case"script":if(f=t.getAttribute("src"),(f!==(u.src==null?null:u.src)||t.getAttribute("type")!==(u.type==null?null:u.type)||t.getAttribute("crossorigin")!==(u.crossOrigin==null?null:u.crossOrigin))&&f&&t.hasAttribute("async")&&!t.hasAttribute("itemprop"))break;return t;default:return t}}else if(r==="input"&&t.type==="hidden"){var f=u.name==null?null:""+u.name;if(u.type==="hidden"&&t.getAttribute("name")===f)return t}else return t;if(t=An(t.nextSibling),t===null)break}return null}function XT(t,r,a){if(r==="")return null;for(;t.nodeType!==3;)if((t.nodeType!==1||t.nodeName!=="INPUT"||t.type!=="hidden")&&!a||(t=An(t.nextSibling),t===null))return null;return t}function Kd(t){return t.data==="$!"||t.data==="$?"&&t.ownerDocument.readyState==="complete"}function ZT(t,r){var a=t.ownerDocument;if(t.data!=="$?"||a.readyState==="complete")r();else{var l=function(){r(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),t._reactRetry=l}}function An(t){for(;t!=null;t=t.nextSibling){var r=t.nodeType;if(r===1||r===3)break;if(r===8){if(r=t.data,r==="$"||r==="$!"||r==="$?"||r==="F!"||r==="F")break;if(r==="/$")return null}}return t}var Xd=null;function yy(t){t=t.previousSibling;for(var r=0;t;){if(t.nodeType===8){var a=t.data;if(a==="$"||a==="$!"||a==="$?"){if(r===0)return t;r--}else a==="/$"&&r++}t=t.previousSibling}return null}function _y(t,r,a){switch(r=Ml(a),t){case"html":if(t=r.documentElement,!t)throw Error(s(452));return t;case"head":if(t=r.head,!t)throw Error(s(453));return t;case"body":if(t=r.body,!t)throw Error(s(454));return t;default:throw Error(s(451))}}function Ba(t){for(var r=t.attributes;r.length;)t.removeAttributeNode(r[0]);eu(t)}var Cn=new Map,by=new Set;function jl(t){return typeof t.getRootNode=="function"?t.getRootNode():t.nodeType===9?t:t.ownerDocument}var di=Z.d;Z.d={f:JT,r:eC,D:tC,C:nC,L:iC,m:rC,X:aC,S:sC,M:oC};function JT(){var t=di.f(),r=Ol();return t||r}function eC(t){var r=Wr(t);r!==null&&r.tag===5&&r.type==="form"?Hm(r):di.r(t)}var Ns=typeof document>"u"?null:document;function Ey(t,r,a){var l=Ns;if(l&&typeof r=="string"&&r){var u=vn(r);u='link[rel="'+t+'"][href="'+u+'"]',typeof a=="string"&&(u+='[crossorigin="'+a+'"]'),by.has(u)||(by.add(u),t={rel:t,crossOrigin:a,href:r},l.querySelector(u)===null&&(r=l.createElement("link"),Lt(r,"link",t),Rt(r),l.head.appendChild(r)))}}function tC(t){di.D(t),Ey("dns-prefetch",t,null)}function nC(t,r){di.C(t,r),Ey("preconnect",t,r)}function iC(t,r,a){di.L(t,r,a);var l=Ns;if(l&&t&&r){var u='link[rel="preload"][as="'+vn(r)+'"]';r==="image"&&a&&a.imageSrcSet?(u+='[imagesrcset="'+vn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(u+='[imagesizes="'+vn(a.imageSizes)+'"]')):u+='[href="'+vn(t)+'"]';var f=u;switch(r){case"style":f=xs(t);break;case"script":f=As(t)}Cn.has(f)||(t=_({rel:"preload",href:r==="image"&&a&&a.imageSrcSet?void 0:t,as:r},a),Cn.set(f,t),l.querySelector(u)!==null||r==="style"&&l.querySelector(Va(f))||r==="script"&&l.querySelector(Ga(f))||(r=l.createElement("link"),Lt(r,"link",t),Rt(r),l.head.appendChild(r)))}}function rC(t,r){di.m(t,r);var a=Ns;if(a&&t){var l=r&&typeof r.as=="string"?r.as:"script",u='link[rel="modulepreload"][as="'+vn(l)+'"][href="'+vn(t)+'"]',f=u;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":f=As(t)}if(!Cn.has(f)&&(t=_({rel:"modulepreload",href:t},r),Cn.set(f,t),a.querySelector(u)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Ga(f)))return}l=a.createElement("link"),Lt(l,"link",t),Rt(l),a.head.appendChild(l)}}}function sC(t,r,a){di.S(t,r,a);var l=Ns;if(l&&t){var u=Qr(l).hoistableStyles,f=xs(t);r=r||"default";var m=u.get(f);if(!m){var y={loading:0,preload:null};if(m=l.querySelector(Va(f)))y.loading=5;else{t=_({rel:"stylesheet",href:t,"data-precedence":r},a),(a=Cn.get(f))&&Zd(t,a);var S=m=l.createElement("link");Rt(S),Lt(S,"link",t),S._p=new Promise(function(A,H){S.onload=A,S.onerror=H}),S.addEventListener("load",function(){y.loading|=1}),S.addEventListener("error",function(){y.loading|=2}),y.loading|=4,Ll(m,r,l)}m={type:"stylesheet",instance:m,count:1,state:y},u.set(f,m)}}}function aC(t,r){di.X(t,r);var a=Ns;if(a&&t){var l=Qr(a).hoistableScripts,u=As(t),f=l.get(u);f||(f=a.querySelector(Ga(u)),f||(t=_({src:t,async:!0},r),(r=Cn.get(u))&&Jd(t,r),f=a.createElement("script"),Rt(f),Lt(f,"link",t),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(u,f))}}function oC(t,r){di.M(t,r);var a=Ns;if(a&&t){var l=Qr(a).hoistableScripts,u=As(t),f=l.get(u);f||(f=a.querySelector(Ga(u)),f||(t=_({src:t,async:!0,type:"module"},r),(r=Cn.get(u))&&Jd(t,r),f=a.createElement("script"),Rt(f),Lt(f,"link",t),a.head.appendChild(f)),f={type:"script",instance:f,count:1,state:null},l.set(u,f))}}function Sy(t,r,a,l){var u=(u=B.current)?jl(u):null;if(!u)throw Error(s(446));switch(t){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(r=xs(a.href),a=Qr(u).hoistableStyles,l=a.get(r),l||(l={type:"style",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){t=xs(a.href);var f=Qr(u).hoistableStyles,m=f.get(t);if(m||(u=u.ownerDocument||u,m={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},f.set(t,m),(f=u.querySelector(Va(t)))&&!f._p&&(m.instance=f,m.state.loading=5),Cn.has(t)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Cn.set(t,a),f||lC(u,t,a,m.state))),r&&l===null)throw Error(s(528,""));return m}if(r&&l!==null)throw Error(s(529,""));return null;case"script":return r=a.async,a=a.src,typeof a=="string"&&r&&typeof r!="function"&&typeof r!="symbol"?(r=As(a),a=Qr(u).hoistableScripts,l=a.get(r),l||(l={type:"script",instance:null,count:0,state:null},a.set(r,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(s(444,t))}}function xs(t){return'href="'+vn(t)+'"'}function Va(t){return'link[rel="stylesheet"]['+t+"]"}function Ty(t){return _({},t,{"data-precedence":t.precedence,precedence:null})}function lC(t,r,a,l){t.querySelector('link[rel="preload"][as="style"]['+r+"]")?l.loading=1:(r=t.createElement("link"),l.preload=r,r.addEventListener("load",function(){return l.loading|=1}),r.addEventListener("error",function(){return l.loading|=2}),Lt(r,"link",a),Rt(r),t.head.appendChild(r))}function As(t){return'[src="'+vn(t)+'"]'}function Ga(t){return"script[async]"+t}function Cy(t,r,a){if(r.count++,r.instance===null)switch(r.type){case"style":var l=t.querySelector('style[data-href~="'+vn(a.href)+'"]');if(l)return r.instance=l,Rt(l),l;var u=_({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(t.ownerDocument||t).createElement("style"),Rt(l),Lt(l,"style",u),Ll(l,a.precedence,t),r.instance=l;case"stylesheet":u=xs(a.href);var f=t.querySelector(Va(u));if(f)return r.state.loading|=4,r.instance=f,Rt(f),f;l=Ty(a),(u=Cn.get(u))&&Zd(l,u),f=(t.ownerDocument||t).createElement("link"),Rt(f);var m=f;return m._p=new Promise(function(y,S){m.onload=y,m.onerror=S}),Lt(f,"link",l),r.state.loading|=4,Ll(f,a.precedence,t),r.instance=f;case"script":return f=As(a.src),(u=t.querySelector(Ga(f)))?(r.instance=u,Rt(u),u):(l=a,(u=Cn.get(f))&&(l=_({},a),Jd(l,u)),t=t.ownerDocument||t,u=t.createElement("script"),Rt(u),Lt(u,"link",l),t.head.appendChild(u),r.instance=u);case"void":return null;default:throw Error(s(443,r.type))}else r.type==="stylesheet"&&(r.state.loading&4)===0&&(l=r.instance,r.state.loading|=4,Ll(l,a.precedence,t));return r.instance}function Ll(t,r,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),u=l.length?l[l.length-1]:null,f=u,m=0;m<l.length;m++){var y=l[m];if(y.dataset.precedence===r)f=y;else if(f!==u)break}f?f.parentNode.insertBefore(t,f.nextSibling):(r=a.nodeType===9?a.head:a,r.insertBefore(t,r.firstChild))}function Zd(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.title==null&&(t.title=r.title)}function Jd(t,r){t.crossOrigin==null&&(t.crossOrigin=r.crossOrigin),t.referrerPolicy==null&&(t.referrerPolicy=r.referrerPolicy),t.integrity==null&&(t.integrity=r.integrity)}var Pl=null;function wy(t,r,a){if(Pl===null){var l=new Map,u=Pl=new Map;u.set(a,l)}else u=Pl,l=u.get(a),l||(l=new Map,u.set(a,l));if(l.has(t))return l;for(l.set(t,null),a=a.getElementsByTagName(t),u=0;u<a.length;u++){var f=a[u];if(!(f[Kn]||f[pt]||t==="link"&&f.getAttribute("rel")==="stylesheet")&&f.namespaceURI!=="http://www.w3.org/2000/svg"){var m=f.getAttribute(r)||"";m=t+m;var y=l.get(m);y?y.push(f):l.set(m,[f])}}return l}function Oy(t,r,a){t=t.ownerDocument||t,t.head.insertBefore(a,r==="title"?t.querySelector("head > title"):null)}function cC(t,r,a){if(a===1||r.itemProp!=null)return!1;switch(t){case"meta":case"title":return!0;case"style":if(typeof r.precedence!="string"||typeof r.href!="string"||r.href==="")break;return!0;case"link":if(typeof r.rel!="string"||typeof r.href!="string"||r.href===""||r.onLoad||r.onError)break;switch(r.rel){case"stylesheet":return t=r.disabled,typeof r.precedence=="string"&&t==null;default:return!0}case"script":if(r.async&&typeof r.async!="function"&&typeof r.async!="symbol"&&!r.onLoad&&!r.onError&&r.src&&typeof r.src=="string")return!0}return!1}function Ry(t){return!(t.type==="stylesheet"&&(t.state.loading&3)===0)}var $a=null;function uC(){}function dC(t,r,a){if($a===null)throw Error(s(475));var l=$a;if(r.type==="stylesheet"&&(typeof a.media!="string"||matchMedia(a.media).matches!==!1)&&(r.state.loading&4)===0){if(r.instance===null){var u=xs(a.href),f=t.querySelector(Va(u));if(f){t=f._p,t!==null&&typeof t=="object"&&typeof t.then=="function"&&(l.count++,l=Ul.bind(l),t.then(l,l)),r.state.loading|=4,r.instance=f,Rt(f);return}f=t.ownerDocument||t,a=Ty(a),(u=Cn.get(u))&&Zd(a,u),f=f.createElement("link"),Rt(f);var m=f;m._p=new Promise(function(y,S){m.onload=y,m.onerror=S}),Lt(f,"link",a),r.instance=f}l.stylesheets===null&&(l.stylesheets=new Map),l.stylesheets.set(r,t),(t=r.state.preload)&&(r.state.loading&3)===0&&(l.count++,r=Ul.bind(l),t.addEventListener("load",r),t.addEventListener("error",r))}}function fC(){if($a===null)throw Error(s(475));var t=$a;return t.stylesheets&&t.count===0&&ef(t,t.stylesheets),0<t.count?function(r){var a=setTimeout(function(){if(t.stylesheets&&ef(t,t.stylesheets),t.unsuspend){var l=t.unsuspend;t.unsuspend=null,l()}},6e4);return t.unsuspend=r,function(){t.unsuspend=null,clearTimeout(a)}}:null}function Ul(){if(this.count--,this.count===0){if(this.stylesheets)ef(this,this.stylesheets);else if(this.unsuspend){var t=this.unsuspend;this.unsuspend=null,t()}}}var zl=null;function ef(t,r){t.stylesheets=null,t.unsuspend!==null&&(t.count++,zl=new Map,r.forEach(hC,t),zl=null,Ul.call(t))}function hC(t,r){if(!(r.state.loading&4)){var a=zl.get(t);if(a)var l=a.get(null);else{a=new Map,zl.set(t,a);for(var u=t.querySelectorAll("link[data-precedence],style[data-precedence]"),f=0;f<u.length;f++){var m=u[f];(m.nodeName==="LINK"||m.getAttribute("media")!=="not all")&&(a.set(m.dataset.precedence,m),l=m)}l&&a.set(null,l)}u=r.instance,m=u.getAttribute("data-precedence"),f=a.get(m)||l,f===l&&a.set(null,u),a.set(m,u),this.count++,l=Ul.bind(this),u.addEventListener("load",l),u.addEventListener("error",l),f?f.parentNode.insertBefore(u,f.nextSibling):(t=t.nodeType===9?t.head:t,t.insertBefore(u,t.firstChild)),r.state.loading|=4}}var qa={$$typeof:te,Provider:null,Consumer:null,_currentValue:le,_currentValue2:le,_threadCount:0};function pC(t,r,a,l,u,f,m,y){this.tag=1,this.containerInfo=t,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=rt(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=rt(0),this.hiddenUpdates=rt(null),this.identifierPrefix=l,this.onUncaughtError=u,this.onCaughtError=f,this.onRecoverableError=m,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=y,this.incompleteTransitions=new Map}function Ny(t,r,a,l,u,f,m,y,S,A,H,Y){return t=new pC(t,r,a,m,y,S,A,Y),r=1,f===!0&&(r|=24),f=ln(3,null,null,r),t.current=f,f.stateNode=t,r=ju(),r.refCount++,t.pooledCache=r,r.refCount++,f.memoizedState={element:l,isDehydrated:a,cache:r},zu(f),t}function xy(t){return t?(t=os,t):os}function Ay(t,r,a,l,u,f){u=xy(u),l.context===null?l.context=u:l.pendingContext=u,l=Oi(r),l.payload={element:a},f=f===void 0?null:f,f!==null&&(l.callback=f),a=Ri(t,l,r),a!==null&&(hn(a,t,r),Ea(a,t,r))}function Dy(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var a=t.retryLane;t.retryLane=a!==0&&a<r?a:r}}function tf(t,r){Dy(t,r),(t=t.alternate)&&Dy(t,r)}function Iy(t){if(t.tag===13){var r=as(t,67108864);r!==null&&hn(r,t,67108864),tf(t,67108864)}}var Hl=!0;function gC(t,r,a,l){var u=j.T;j.T=null;var f=Z.p;try{Z.p=2,nf(t,r,a,l)}finally{Z.p=f,j.T=u}}function mC(t,r,a,l){var u=j.T;j.T=null;var f=Z.p;try{Z.p=8,nf(t,r,a,l)}finally{Z.p=f,j.T=u}}function nf(t,r,a,l){if(Hl){var u=rf(l);if(u===null)Gd(t,r,l,Bl,a),My(t,l);else if(yC(u,t,r,a,l))l.stopPropagation();else if(My(t,l),r&4&&-1<vC.indexOf(t)){for(;u!==null;){var f=Wr(u);if(f!==null)switch(f.tag){case 3:if(f=f.stateNode,f.current.memoizedState.isDehydrated){var m=J(f.pendingLanes);if(m!==0){var y=f;for(y.pendingLanes|=2,y.entangledLanes|=2;m;){var S=1<<31-Wt(m);y.entanglements[1]|=S,m&=~S}Gn(f),(We&6)===0&&(Cl=Bt()+500,Ua(0))}}break;case 13:y=as(f,2),y!==null&&hn(y,f,2),Ol(),tf(f,2)}if(f=rf(l),f===null&&Gd(t,r,l,Bl,a),f===u)break;u=f}u!==null&&l.stopPropagation()}else Gd(t,r,l,null,a)}}function rf(t){return t=lu(t),sf(t)}var Bl=null;function sf(t){if(Bl=null,t=Fr(t),t!==null){var r=c(t);if(r===null)t=null;else{var a=r.tag;if(a===13){if(t=d(r),t!==null)return t;t=null}else if(a===3){if(r.stateNode.current.memoizedState.isDehydrated)return r.tag===3?r.stateNode.containerInfo:null;t=null}else r!==t&&(t=null)}}return Bl=t,null}function ky(t){switch(t){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(na()){case Br:return 2;case cr:return 8;case Si:case He:return 32;case pn:return 268435456;default:return 32}default:return 32}}var af=!1,Hi=null,Bi=null,Vi=null,Ya=new Map,Fa=new Map,Gi=[],vC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function My(t,r){switch(t){case"focusin":case"focusout":Hi=null;break;case"dragenter":case"dragleave":Bi=null;break;case"mouseover":case"mouseout":Vi=null;break;case"pointerover":case"pointerout":Ya.delete(r.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fa.delete(r.pointerId)}}function Wa(t,r,a,l,u,f){return t===null||t.nativeEvent!==f?(t={blockedOn:r,domEventName:a,eventSystemFlags:l,nativeEvent:f,targetContainers:[u]},r!==null&&(r=Wr(r),r!==null&&Iy(r)),t):(t.eventSystemFlags|=l,r=t.targetContainers,u!==null&&r.indexOf(u)===-1&&r.push(u),t)}function yC(t,r,a,l,u){switch(r){case"focusin":return Hi=Wa(Hi,t,r,a,l,u),!0;case"dragenter":return Bi=Wa(Bi,t,r,a,l,u),!0;case"mouseover":return Vi=Wa(Vi,t,r,a,l,u),!0;case"pointerover":var f=u.pointerId;return Ya.set(f,Wa(Ya.get(f)||null,t,r,a,l,u)),!0;case"gotpointercapture":return f=u.pointerId,Fa.set(f,Wa(Fa.get(f)||null,t,r,a,l,u)),!0}return!1}function jy(t){var r=Fr(t.target);if(r!==null){var a=c(r);if(a!==null){if(r=a.tag,r===13){if(r=d(a),r!==null){t.blockedOn=r,Lo(t.priority,function(){if(a.tag===13){var l=fn();l=Pt(l);var u=as(a,l);u!==null&&hn(u,a,l),tf(a,l)}});return}}else if(r===3&&a.stateNode.current.memoizedState.isDehydrated){t.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Vl(t){if(t.blockedOn!==null)return!1;for(var r=t.targetContainers;0<r.length;){var a=rf(t.nativeEvent);if(a===null){a=t.nativeEvent;var l=new a.constructor(a.type,a);ou=l,a.target.dispatchEvent(l),ou=null}else return r=Wr(a),r!==null&&Iy(r),t.blockedOn=a,!1;r.shift()}return!0}function Ly(t,r,a){Vl(t)&&a.delete(r)}function _C(){af=!1,Hi!==null&&Vl(Hi)&&(Hi=null),Bi!==null&&Vl(Bi)&&(Bi=null),Vi!==null&&Vl(Vi)&&(Vi=null),Ya.forEach(Ly),Fa.forEach(Ly)}function Gl(t,r){t.blockedOn===r&&(t.blockedOn=null,af||(af=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,_C)))}var $l=null;function Py(t){$l!==t&&($l=t,i.unstable_scheduleCallback(i.unstable_NormalPriority,function(){$l===t&&($l=null);for(var r=0;r<t.length;r+=3){var a=t[r],l=t[r+1],u=t[r+2];if(typeof l!="function"){if(sf(l||a)===null)continue;break}var f=Wr(a);f!==null&&(t.splice(r,3),r-=3,rd(f,{pending:!0,data:u,method:a.method,action:l},l,u))}}))}function Qa(t){function r(S){return Gl(S,t)}Hi!==null&&Gl(Hi,t),Bi!==null&&Gl(Bi,t),Vi!==null&&Gl(Vi,t),Ya.forEach(r),Fa.forEach(r);for(var a=0;a<Gi.length;a++){var l=Gi[a];l.blockedOn===t&&(l.blockedOn=null)}for(;0<Gi.length&&(a=Gi[0],a.blockedOn===null);)jy(a),a.blockedOn===null&&Gi.shift();if(a=(t.ownerDocument||t).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var u=a[l],f=a[l+1],m=u[ct]||null;if(typeof f=="function")m||Py(a);else if(m){var y=null;if(f&&f.hasAttribute("formAction")){if(u=f,m=f[ct]||null)y=m.formAction;else if(sf(u)!==null)continue}else y=m.action;typeof y=="function"?a[l+1]=y:(a.splice(l,3),l-=3),Py(a)}}}function of(t){this._internalRoot=t}ql.prototype.render=of.prototype.render=function(t){var r=this._internalRoot;if(r===null)throw Error(s(409));var a=r.current,l=fn();Ay(a,l,t,r,null,null)},ql.prototype.unmount=of.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var r=t.containerInfo;Ay(t.current,2,null,t,null,null),Ol(),r[Qt]=null}};function ql(t){this._internalRoot=t}ql.prototype.unstable_scheduleHydration=function(t){if(t){var r=$r();t={blockedOn:null,target:t,priority:r};for(var a=0;a<Gi.length&&r!==0&&r<Gi[a].priority;a++);Gi.splice(a,0,t),a===0&&jy(t)}};var Uy=e.version;if(Uy!=="19.1.0")throw Error(s(527,Uy,"19.1.0"));Z.findDOMNode=function(t){var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(s(188)):(t=Object.keys(t).join(","),Error(s(268,t)));return t=p(r),t=t!==null?g(t):null,t=t===null?null:t.stateNode,t};var bC={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:j,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Yl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Yl.isDisabled&&Yl.supportsFiber)try{Vr=Yl.inject(bC),Ft=Yl}catch{}}return Xa.createRoot=function(t,r){if(!o(t))throw Error(s(299));var a=!1,l="",u=ev,f=tv,m=nv,y=null;return r!=null&&(r.unstable_strictMode===!0&&(a=!0),r.identifierPrefix!==void 0&&(l=r.identifierPrefix),r.onUncaughtError!==void 0&&(u=r.onUncaughtError),r.onCaughtError!==void 0&&(f=r.onCaughtError),r.onRecoverableError!==void 0&&(m=r.onRecoverableError),r.unstable_transitionCallbacks!==void 0&&(y=r.unstable_transitionCallbacks)),r=Ny(t,1,!1,null,null,a,l,u,f,m,y,null),t[Qt]=r.current,Vd(t),new of(r)},Xa.hydrateRoot=function(t,r,a){if(!o(t))throw Error(s(299));var l=!1,u="",f=ev,m=tv,y=nv,S=null,A=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(u=a.identifierPrefix),a.onUncaughtError!==void 0&&(f=a.onUncaughtError),a.onCaughtError!==void 0&&(m=a.onCaughtError),a.onRecoverableError!==void 0&&(y=a.onRecoverableError),a.unstable_transitionCallbacks!==void 0&&(S=a.unstable_transitionCallbacks),a.formState!==void 0&&(A=a.formState)),r=Ny(t,1,!0,r,a??null,l,u,f,m,y,S,A),r.context=xy(null),a=r.current,l=fn(),l=Pt(l),u=Oi(l),u.callback=null,Ri(a,u,l),a=l,r.current.lanes=a,vt(r,a),Gn(r),t[Qt]=r.current,Vd(t),new ql(r)},Xa.version="19.1.0",Xa}var Wy;function xC(){if(Wy)return uf.exports;Wy=1;function i(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(i)}catch(e){console.error(e)}}return i(),uf.exports=NC(),uf.exports}var AC=xC();const DC=So(AC),wb=D.createContext({dragDropManager:void 0});function wn(i){return"Minified Redux error #"+i+"; visit https://redux.js.org/Errors?code="+i+" for the full message or use the non-minified dev environment for full errors. "}var Qy=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),Ky=function(){return Math.random().toString(36).substring(7).split("").join(".")},Xy={INIT:"@@redux/INIT"+Ky(),REPLACE:"@@redux/REPLACE"+Ky()};function IC(i){if(typeof i!="object"||i===null)return!1;for(var e=i;Object.getPrototypeOf(e)!==null;)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(i)===e}function Ob(i,e,n){var s;if(typeof e=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(wn(0));if(typeof e=="function"&&typeof n>"u"&&(n=e,e=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(wn(1));return n(Ob)(i,e)}if(typeof i!="function")throw new Error(wn(2));var o=i,c=e,d=[],h=d,p=!1;function g(){h===d&&(h=d.slice())}function _(){if(p)throw new Error(wn(3));return c}function b(P){if(typeof P!="function")throw new Error(wn(4));if(p)throw new Error(wn(5));var N=!0;return g(),h.push(P),function(){if(N){if(p)throw new Error(wn(6));N=!1,g();var F=h.indexOf(P);h.splice(F,1),d=null}}}function E(P){if(!IC(P))throw new Error(wn(7));if(typeof P.type>"u")throw new Error(wn(8));if(p)throw new Error(wn(9));try{p=!0,c=o(c,P)}finally{p=!1}for(var N=d=h,U=0;U<N.length;U++){var F=N[U];F()}return P}function O(P){if(typeof P!="function")throw new Error(wn(10));o=P,E({type:Xy.REPLACE})}function C(){var P,N=b;return P={subscribe:function(F){if(typeof F!="object"||F===null)throw new Error(wn(11));function te(){F.next&&F.next(_())}te();var K=N(te);return{unsubscribe:K}}},P[Qy]=function(){return this},P}return E({type:Xy.INIT}),s={dispatch:E,subscribe:b,getState:_,replaceReducer:O},s[Qy]=C,s}function Re(i,e,...n){if(kC()&&e===void 0)throw new Error("invariant requires an error message argument");if(!i){let s;if(e===void 0)s=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{let o=0;s=new Error(e.replace(/%s/g,function(){return n[o++]})),s.name="Invariant Violation"}throw s.framesToPop=1,s}}function kC(){return typeof process<"u"&&!0}function MC(i,e,n){return e.split(".").reduce((s,o)=>s&&s[o]?s[o]:n||null,i)}function jC(i,e){return i.filter(n=>n!==e)}function Rb(i){return typeof i=="object"}function LC(i,e){const n=new Map,s=c=>{n.set(c,n.has(c)?n.get(c)+1:1)};i.forEach(s),e.forEach(s);const o=[];return n.forEach((c,d)=>{c===1&&o.push(d)}),o}function PC(i,e){return i.filter(n=>e.indexOf(n)>-1)}const Lh="dnd-core/INIT_COORDS",Ac="dnd-core/BEGIN_DRAG",Ph="dnd-core/PUBLISH_DRAG_SOURCE",Dc="dnd-core/HOVER",Ic="dnd-core/DROP",kc="dnd-core/END_DRAG";function Zy(i,e){return{type:Lh,payload:{sourceClientOffset:e||null,clientOffset:i||null}}}const UC={type:Lh,payload:{clientOffset:null,sourceClientOffset:null}};function zC(i){return function(n=[],s={publishSource:!0}){const{publishSource:o=!0,clientOffset:c,getSourceClientOffset:d}=s,h=i.getMonitor(),p=i.getRegistry();i.dispatch(Zy(c)),HC(n,h,p);const g=GC(n,h);if(g==null){i.dispatch(UC);return}let _=null;if(c){if(!d)throw new Error("getSourceClientOffset must be defined");BC(d),_=d(g)}i.dispatch(Zy(c,_));const E=p.getSource(g).beginDrag(h,g);if(E==null)return;VC(E),p.pinSource(g);const O=p.getSourceType(g);return{type:Ac,payload:{itemType:O,item:E,sourceId:g,clientOffset:c||null,sourceClientOffset:_||null,isSourcePublic:!!o}}}}function HC(i,e,n){Re(!e.isDragging(),"Cannot call beginDrag while dragging."),i.forEach(function(s){Re(n.getSource(s),"Expected sourceIds to be registered.")})}function BC(i){Re(typeof i=="function","When clientOffset is provided, getSourceClientOffset must be a function.")}function VC(i){Re(Rb(i),"Item must be an object.")}function GC(i,e){let n=null;for(let s=i.length-1;s>=0;s--)if(e.canDragSource(i[s])){n=i[s];break}return n}function $C(i,e,n){return e in i?Object.defineProperty(i,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):i[e]=n,i}function qC(i){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},s=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(s=s.concat(Object.getOwnPropertySymbols(n).filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable}))),s.forEach(function(o){$C(i,o,n[o])})}return i}function YC(i){return function(n={}){const s=i.getMonitor(),o=i.getRegistry();FC(s),KC(s).forEach((d,h)=>{const p=WC(d,h,o,s),g={type:Ic,payload:{dropResult:qC({},n,p)}};i.dispatch(g)})}}function FC(i){Re(i.isDragging(),"Cannot call drop while not dragging."),Re(!i.didDrop(),"Cannot call drop twice during one drag operation.")}function WC(i,e,n,s){const o=n.getTarget(i);let c=o?o.drop(s,i):void 0;return QC(c),typeof c>"u"&&(c=e===0?{}:s.getDropResult()),c}function QC(i){Re(typeof i>"u"||Rb(i),"Drop result must either be an object or undefined.")}function KC(i){const e=i.getTargetIds().filter(i.canDropOnTarget,i);return e.reverse(),e}function XC(i){return function(){const n=i.getMonitor(),s=i.getRegistry();ZC(n);const o=n.getSourceId();return o!=null&&(s.getSource(o,!0).endDrag(n,o),s.unpinSource()),{type:kc}}}function ZC(i){Re(i.isDragging(),"Cannot call endDrag while not dragging.")}function Uf(i,e){return e===null?i===null:Array.isArray(i)?i.some(n=>n===e):i===e}function JC(i){return function(n,{clientOffset:s}={}){ew(n);const o=n.slice(0),c=i.getMonitor(),d=i.getRegistry(),h=c.getItemType();return nw(o,d,h),tw(o,c,d),iw(o,c,d),{type:Dc,payload:{targetIds:o,clientOffset:s||null}}}}function ew(i){Re(Array.isArray(i),"Expected targetIds to be an array.")}function tw(i,e,n){Re(e.isDragging(),"Cannot call hover while not dragging."),Re(!e.didDrop(),"Cannot call hover after drop.");for(let s=0;s<i.length;s++){const o=i[s];Re(i.lastIndexOf(o)===s,"Expected targetIds to be unique in the passed array.");const c=n.getTarget(o);Re(c,"Expected targetIds to be registered.")}}function nw(i,e,n){for(let s=i.length-1;s>=0;s--){const o=i[s],c=e.getTargetType(o);Uf(c,n)||i.splice(s,1)}}function iw(i,e,n){i.forEach(function(s){n.getTarget(s).hover(e,s)})}function rw(i){return function(){if(i.getMonitor().isDragging())return{type:Ph}}}function sw(i){return{beginDrag:zC(i),publishDragSource:rw(i),hover:JC(i),drop:YC(i),endDrag:XC(i)}}class aw{receiveBackend(e){this.backend=e}getMonitor(){return this.monitor}getBackend(){return this.backend}getRegistry(){return this.monitor.registry}getActions(){const e=this,{dispatch:n}=this.store;function s(c){return(...d)=>{const h=c.apply(e,d);typeof h<"u"&&n(h)}}const o=sw(this);return Object.keys(o).reduce((c,d)=>{const h=o[d];return c[d]=s(h),c},{})}dispatch(e){this.store.dispatch(e)}constructor(e,n){this.isSetUp=!1,this.handleRefCountChange=()=>{const s=this.store.getState().refCount>0;this.backend&&(s&&!this.isSetUp?(this.backend.setup(),this.isSetUp=!0):!s&&this.isSetUp&&(this.backend.teardown(),this.isSetUp=!1))},this.store=e,this.monitor=n,e.subscribe(this.handleRefCountChange)}}function ow(i,e){return{x:i.x+e.x,y:i.y+e.y}}function Nb(i,e){return{x:i.x-e.x,y:i.y-e.y}}function lw(i){const{clientOffset:e,initialClientOffset:n,initialSourceClientOffset:s}=i;return!e||!n||!s?null:Nb(ow(e,s),n)}function cw(i){const{clientOffset:e,initialClientOffset:n}=i;return!e||!n?null:Nb(e,n)}const io=[],Uh=[];io.__IS_NONE__=!0;Uh.__IS_ALL__=!0;function uw(i,e){return i===io?!1:i===Uh||typeof e>"u"?!0:PC(e,i).length>0}class dw{subscribeToStateChange(e,n={}){const{handlerIds:s}=n;Re(typeof e=="function","listener must be a function."),Re(typeof s>"u"||Array.isArray(s),"handlerIds, when specified, must be an array of strings.");let o=this.store.getState().stateId;const c=()=>{const d=this.store.getState(),h=d.stateId;try{h===o||h===o+1&&!uw(d.dirtyHandlerIds,s)||e()}finally{o=h}};return this.store.subscribe(c)}subscribeToOffsetChange(e){Re(typeof e=="function","listener must be a function.");let n=this.store.getState().dragOffset;const s=()=>{const o=this.store.getState().dragOffset;o!==n&&(n=o,e())};return this.store.subscribe(s)}canDragSource(e){if(!e)return!1;const n=this.registry.getSource(e);return Re(n,`Expected to find a valid source. sourceId=${e}`),this.isDragging()?!1:n.canDrag(this,e)}canDropOnTarget(e){if(!e)return!1;const n=this.registry.getTarget(e);if(Re(n,`Expected to find a valid target. targetId=${e}`),!this.isDragging()||this.didDrop())return!1;const s=this.registry.getTargetType(e),o=this.getItemType();return Uf(s,o)&&n.canDrop(this,e)}isDragging(){return!!this.getItemType()}isDraggingSource(e){if(!e)return!1;const n=this.registry.getSource(e,!0);if(Re(n,`Expected to find a valid source. sourceId=${e}`),!this.isDragging()||!this.isSourcePublic())return!1;const s=this.registry.getSourceType(e),o=this.getItemType();return s!==o?!1:n.isDragging(this,e)}isOverTarget(e,n={shallow:!1}){if(!e)return!1;const{shallow:s}=n;if(!this.isDragging())return!1;const o=this.registry.getTargetType(e),c=this.getItemType();if(c&&!Uf(o,c))return!1;const d=this.getTargetIds();if(!d.length)return!1;const h=d.indexOf(e);return s?h===d.length-1:h>-1}getItemType(){return this.store.getState().dragOperation.itemType}getItem(){return this.store.getState().dragOperation.item}getSourceId(){return this.store.getState().dragOperation.sourceId}getTargetIds(){return this.store.getState().dragOperation.targetIds}getDropResult(){return this.store.getState().dragOperation.dropResult}didDrop(){return this.store.getState().dragOperation.didDrop}isSourcePublic(){return!!this.store.getState().dragOperation.isSourcePublic}getInitialClientOffset(){return this.store.getState().dragOffset.initialClientOffset}getInitialSourceClientOffset(){return this.store.getState().dragOffset.initialSourceClientOffset}getClientOffset(){return this.store.getState().dragOffset.clientOffset}getSourceClientOffset(){return lw(this.store.getState().dragOffset)}getDifferenceFromInitialOffset(){return cw(this.store.getState().dragOffset)}constructor(e,n){this.store=e,this.registry=n}}const Jy=typeof global<"u"?global:self,xb=Jy.MutationObserver||Jy.WebKitMutationObserver;function Ab(i){return function(){const n=setTimeout(o,0),s=setInterval(o,50);function o(){clearTimeout(n),clearInterval(s),i()}}}function fw(i){let e=1;const n=new xb(i),s=document.createTextNode("");return n.observe(s,{characterData:!0}),function(){e=-e,s.data=e}}const hw=typeof xb=="function"?fw:Ab;class pw{enqueueTask(e){const{queue:n,requestFlush:s}=this;n.length||(s(),this.flushing=!0),n[n.length]=e}constructor(){this.queue=[],this.pendingErrors=[],this.flushing=!1,this.index=0,this.capacity=1024,this.flush=()=>{const{queue:e}=this;for(;this.index<e.length;){const n=this.index;if(this.index++,e[n].call(),this.index>this.capacity){for(let s=0,o=e.length-this.index;s<o;s++)e[s]=e[s+this.index];e.length-=this.index,this.index=0}}e.length=0,this.index=0,this.flushing=!1},this.registerPendingError=e=>{this.pendingErrors.push(e),this.requestErrorThrow()},this.requestFlush=hw(this.flush),this.requestErrorThrow=Ab(()=>{if(this.pendingErrors.length)throw this.pendingErrors.shift()})}}class gw{call(){try{this.task&&this.task()}catch(e){this.onError(e)}finally{this.task=null,this.release(this)}}constructor(e,n){this.onError=e,this.release=n,this.task=null}}class mw{create(e){const n=this.freeTasks,s=n.length?n.pop():new gw(this.onError,o=>n[n.length]=o);return s.task=e,s}constructor(e){this.onError=e,this.freeTasks=[]}}const Db=new pw,vw=new mw(Db.registerPendingError);function yw(i){Db.enqueueTask(vw.create(i))}const zh="dnd-core/ADD_SOURCE",Hh="dnd-core/ADD_TARGET",Bh="dnd-core/REMOVE_SOURCE",Mc="dnd-core/REMOVE_TARGET";function _w(i){return{type:zh,payload:{sourceId:i}}}function bw(i){return{type:Hh,payload:{targetId:i}}}function Ew(i){return{type:Bh,payload:{sourceId:i}}}function Sw(i){return{type:Mc,payload:{targetId:i}}}function Tw(i){Re(typeof i.canDrag=="function","Expected canDrag to be a function."),Re(typeof i.beginDrag=="function","Expected beginDrag to be a function."),Re(typeof i.endDrag=="function","Expected endDrag to be a function.")}function Cw(i){Re(typeof i.canDrop=="function","Expected canDrop to be a function."),Re(typeof i.hover=="function","Expected hover to be a function."),Re(typeof i.drop=="function","Expected beginDrag to be a function.")}function zf(i,e){if(e&&Array.isArray(i)){i.forEach(n=>zf(n,!1));return}Re(typeof i=="string"||typeof i=="symbol",e?"Type can only be a string, a symbol, or an array of either.":"Type can only be a string or a symbol.")}var On;(function(i){i.SOURCE="SOURCE",i.TARGET="TARGET"})(On||(On={}));let ww=0;function Ow(){return ww++}function Rw(i){const e=Ow().toString();switch(i){case On.SOURCE:return`S${e}`;case On.TARGET:return`T${e}`;default:throw new Error(`Unknown Handler Role: ${i}`)}}function e_(i){switch(i[0]){case"S":return On.SOURCE;case"T":return On.TARGET;default:throw new Error(`Cannot parse handler ID: ${i}`)}}function t_(i,e){const n=i.entries();let s=!1;do{const{done:o,value:[,c]}=n.next();if(c===e)return!0;s=!!o}while(!s);return!1}class Nw{addSource(e,n){zf(e),Tw(n);const s=this.addHandler(On.SOURCE,e,n);return this.store.dispatch(_w(s)),s}addTarget(e,n){zf(e,!0),Cw(n);const s=this.addHandler(On.TARGET,e,n);return this.store.dispatch(bw(s)),s}containsHandler(e){return t_(this.dragSources,e)||t_(this.dropTargets,e)}getSource(e,n=!1){return Re(this.isSourceId(e),"Expected a valid source ID."),n&&e===this.pinnedSourceId?this.pinnedSource:this.dragSources.get(e)}getTarget(e){return Re(this.isTargetId(e),"Expected a valid target ID."),this.dropTargets.get(e)}getSourceType(e){return Re(this.isSourceId(e),"Expected a valid source ID."),this.types.get(e)}getTargetType(e){return Re(this.isTargetId(e),"Expected a valid target ID."),this.types.get(e)}isSourceId(e){return e_(e)===On.SOURCE}isTargetId(e){return e_(e)===On.TARGET}removeSource(e){Re(this.getSource(e),"Expected an existing source."),this.store.dispatch(Ew(e)),yw(()=>{this.dragSources.delete(e),this.types.delete(e)})}removeTarget(e){Re(this.getTarget(e),"Expected an existing target."),this.store.dispatch(Sw(e)),this.dropTargets.delete(e),this.types.delete(e)}pinSource(e){const n=this.getSource(e);Re(n,"Expected an existing source."),this.pinnedSourceId=e,this.pinnedSource=n}unpinSource(){Re(this.pinnedSource,"No source is pinned at the time."),this.pinnedSourceId=null,this.pinnedSource=null}addHandler(e,n,s){const o=Rw(e);return this.types.set(o,n),e===On.SOURCE?this.dragSources.set(o,s):e===On.TARGET&&this.dropTargets.set(o,s),o}constructor(e){this.types=new Map,this.dragSources=new Map,this.dropTargets=new Map,this.pinnedSourceId=null,this.pinnedSource=null,this.store=e}}const xw=(i,e)=>i===e;function Aw(i,e){return!i&&!e?!0:!i||!e?!1:i.x===e.x&&i.y===e.y}function Dw(i,e,n=xw){if(i.length!==e.length)return!1;for(let s=0;s<i.length;++s)if(!n(i[s],e[s]))return!1;return!0}function Iw(i=io,e){switch(e.type){case Dc:break;case zh:case Hh:case Mc:case Bh:return io;case Ac:case Ph:case kc:case Ic:default:return Uh}const{targetIds:n=[],prevTargetIds:s=[]}=e.payload,o=LC(n,s);if(!(o.length>0||!Dw(n,s)))return io;const d=s[s.length-1],h=n[n.length-1];return d!==h&&(d&&o.push(d),h&&o.push(h)),o}function kw(i,e,n){return e in i?Object.defineProperty(i,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):i[e]=n,i}function Mw(i){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},s=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(s=s.concat(Object.getOwnPropertySymbols(n).filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable}))),s.forEach(function(o){kw(i,o,n[o])})}return i}const n_={initialSourceClientOffset:null,initialClientOffset:null,clientOffset:null};function jw(i=n_,e){const{payload:n}=e;switch(e.type){case Lh:case Ac:return{initialSourceClientOffset:n.sourceClientOffset,initialClientOffset:n.clientOffset,clientOffset:n.clientOffset};case Dc:return Aw(i.clientOffset,n.clientOffset)?i:Mw({},i,{clientOffset:n.clientOffset});case kc:case Ic:return n_;default:return i}}function Lw(i,e,n){return e in i?Object.defineProperty(i,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):i[e]=n,i}function Ds(i){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},s=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(s=s.concat(Object.getOwnPropertySymbols(n).filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable}))),s.forEach(function(o){Lw(i,o,n[o])})}return i}const Pw={itemType:null,item:null,sourceId:null,targetIds:[],dropResult:null,didDrop:!1,isSourcePublic:null};function Uw(i=Pw,e){const{payload:n}=e;switch(e.type){case Ac:return Ds({},i,{itemType:n.itemType,item:n.item,sourceId:n.sourceId,isSourcePublic:n.isSourcePublic,dropResult:null,didDrop:!1});case Ph:return Ds({},i,{isSourcePublic:!0});case Dc:return Ds({},i,{targetIds:n.targetIds});case Mc:return i.targetIds.indexOf(n.targetId)===-1?i:Ds({},i,{targetIds:jC(i.targetIds,n.targetId)});case Ic:return Ds({},i,{dropResult:n.dropResult,didDrop:!0,targetIds:[]});case kc:return Ds({},i,{itemType:null,item:null,sourceId:null,dropResult:null,didDrop:!1,isSourcePublic:null,targetIds:[]});default:return i}}function zw(i=0,e){switch(e.type){case zh:case Hh:return i+1;case Bh:case Mc:return i-1;default:return i}}function Hw(i=0){return i+1}function Bw(i,e,n){return e in i?Object.defineProperty(i,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):i[e]=n,i}function Vw(i){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},s=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(s=s.concat(Object.getOwnPropertySymbols(n).filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable}))),s.forEach(function(o){Bw(i,o,n[o])})}return i}function Gw(i={},e){return{dirtyHandlerIds:Iw(i.dirtyHandlerIds,{type:e.type,payload:Vw({},e.payload,{prevTargetIds:MC(i,"dragOperation.targetIds",[])})}),dragOffset:jw(i.dragOffset,e),refCount:zw(i.refCount,e),dragOperation:Uw(i.dragOperation,e),stateId:Hw(i.stateId)}}function $w(i,e=void 0,n={},s=!1){const o=qw(s),c=new dw(o,new Nw(o)),d=new aw(o,c),h=i(d,e,n);return d.receiveBackend(h),d}function qw(i){const e=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION__;return Ob(Gw,i&&e&&e({name:"dnd-core",instanceId:"dnd-core"}))}function Yw(i,e){if(i==null)return{};var n=Fw(i,e),s,o;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(i);for(o=0;o<c.length;o++)s=c[o],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(i,s)&&(n[s]=i[s])}return n}function Fw(i,e){if(i==null)return{};var n={},s=Object.keys(i),o,c;for(c=0;c<s.length;c++)o=s[c],!(e.indexOf(o)>=0)&&(n[o]=i[o]);return n}let i_=0;const Zl=Symbol.for("__REACT_DND_CONTEXT_INSTANCE__");var Ww=D.memo(function(e){var{children:n}=e,s=Yw(e,["children"]);const[o,c]=Qw(s);return D.useEffect(()=>{if(c){const d=Ib();return++i_,()=>{--i_===0&&(d[Zl]=null)}}},[]),v.jsx(wb.Provider,{value:o,children:n})});function Qw(i){if("manager"in i)return[{dragDropManager:i.manager},!1];const e=Kw(i.backend,i.context,i.options,i.debugMode),n=!i.context;return[e,n]}function Kw(i,e=Ib(),n,s){const o=e;return o[Zl]||(o[Zl]={dragDropManager:$w(i,e,n,s)}),o[Zl]}function Ib(){return typeof global<"u"?global:window}var pf,r_;function Xw(){return r_||(r_=1,pf=function i(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var s,o,c;if(Array.isArray(e)){if(s=e.length,s!=n.length)return!1;for(o=s;o--!==0;)if(!i(e[o],n[o]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(c=Object.keys(e),s=c.length,s!==Object.keys(n).length)return!1;for(o=s;o--!==0;)if(!Object.prototype.hasOwnProperty.call(n,c[o]))return!1;for(o=s;o--!==0;){var d=c[o];if(!i(e[d],n[d]))return!1}return!0}return e!==e&&n!==n}),pf}var Zw=Xw();const Jw=So(Zw),kr=typeof window<"u"?D.useLayoutEffect:D.useEffect;function eO(i,e,n){const[s,o]=D.useState(()=>e(i)),c=D.useCallback(()=>{const d=e(i);Jw(s,d)||(o(d),n&&n())},[s,i,n]);return kr(c),[s,c]}function tO(i,e,n){const[s,o]=eO(i,e,n);return kr(function(){const d=i.getHandlerId();if(d!=null)return i.subscribeToStateChange(o,{handlerIds:[d]})},[i,o]),s}function kb(i,e,n){return tO(e,i||(()=>({})),()=>n.reconnect())}function Mb(i,e){const n=[...e||[]];return e==null&&typeof i!="function"&&n.push(i),D.useMemo(()=>typeof i=="function"?i():i,n)}function nO(i){return D.useMemo(()=>i.hooks.dragSource(),[i])}function iO(i){return D.useMemo(()=>i.hooks.dragPreview(),[i])}let gf=!1,mf=!1;class rO{receiveHandlerId(e){this.sourceId=e}getHandlerId(){return this.sourceId}canDrag(){Re(!gf,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return gf=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{gf=!1}}isDragging(){if(!this.sourceId)return!1;Re(!mf,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return mf=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{mf=!1}}subscribeToStateChange(e,n){return this.internalMonitor.subscribeToStateChange(e,n)}isDraggingSource(e){return this.internalMonitor.isDraggingSource(e)}isOverTarget(e,n){return this.internalMonitor.isOverTarget(e,n)}getTargetIds(){return this.internalMonitor.getTargetIds()}isSourcePublic(){return this.internalMonitor.isSourcePublic()}getSourceId(){return this.internalMonitor.getSourceId()}subscribeToOffsetChange(e){return this.internalMonitor.subscribeToOffsetChange(e)}canDragSource(e){return this.internalMonitor.canDragSource(e)}canDropOnTarget(e){return this.internalMonitor.canDropOnTarget(e)}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.sourceId=null,this.internalMonitor=e.getMonitor()}}let vf=!1;class sO{receiveHandlerId(e){this.targetId=e}getHandlerId(){return this.targetId}subscribeToStateChange(e,n){return this.internalMonitor.subscribeToStateChange(e,n)}canDrop(){if(!this.targetId)return!1;Re(!vf,"You may not call monitor.canDrop() inside your canDrop() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drop-target-monitor");try{return vf=!0,this.internalMonitor.canDropOnTarget(this.targetId)}finally{vf=!1}}isOver(e){return this.targetId?this.internalMonitor.isOverTarget(this.targetId,e):!1}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(e){this.targetId=null,this.internalMonitor=e.getMonitor()}}function aO(i,e,n){const s=n.getRegistry(),o=s.addTarget(i,e);return[o,()=>s.removeTarget(o)]}function oO(i,e,n){const s=n.getRegistry(),o=s.addSource(i,e);return[o,()=>s.removeSource(o)]}function Hf(i,e,n,s){let o;if(o!==void 0)return!!o;if(i===e)return!0;if(typeof i!="object"||!i||typeof e!="object"||!e)return!1;const c=Object.keys(i),d=Object.keys(e);if(c.length!==d.length)return!1;const h=Object.prototype.hasOwnProperty.bind(e);for(let p=0;p<c.length;p++){const g=c[p];if(!h(g))return!1;const _=i[g],b=e[g];if(o=void 0,o===!1||o===void 0&&_!==b)return!1}return!0}function Bf(i){return i!==null&&typeof i=="object"&&Object.prototype.hasOwnProperty.call(i,"current")}function lO(i){if(typeof i.type=="string")return;const e=i.type.displayName||i.type.name||"the component";throw new Error(`Only native element nodes can now be passed to React DnD connectors.You can either wrap ${e} into a <div>, or turn it into a drag source or a drop target itself.`)}function cO(i){return(e=null,n=null)=>{if(!D.isValidElement(e)){const c=e;return i(c,n),c}const s=e;return lO(s),uO(s,n?c=>i(c,n):i)}}function jb(i){const e={};return Object.keys(i).forEach(n=>{const s=i[n];if(n.endsWith("Ref"))e[n]=i[n];else{const o=cO(s);e[n]=()=>o}}),e}function s_(i,e){typeof i=="function"?i(e):i.current=e}function uO(i,e){const n=i.ref;return Re(typeof n!="string","Cannot connect React DnD to an element with an existing string ref. Please convert it to use a callback ref instead, or wrap it into a <span> or <div>. Read more: https://reactjs.org/docs/refs-and-the-dom.html#callback-refs"),n?D.cloneElement(i,{ref:s=>{s_(n,s),s_(e,s)}}):D.cloneElement(i,{ref:e})}class dO{receiveHandlerId(e){this.handlerId!==e&&(this.handlerId=e,this.reconnect())}get connectTarget(){return this.dragSource}get dragSourceOptions(){return this.dragSourceOptionsInternal}set dragSourceOptions(e){this.dragSourceOptionsInternal=e}get dragPreviewOptions(){return this.dragPreviewOptionsInternal}set dragPreviewOptions(e){this.dragPreviewOptionsInternal=e}reconnect(){const e=this.reconnectDragSource();this.reconnectDragPreview(e)}reconnectDragSource(){const e=this.dragSource,n=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();return n&&this.disconnectDragSource(),this.handlerId?e?(n&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=e,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,e,this.dragSourceOptions)),n):(this.lastConnectedDragSource=e,n):n}reconnectDragPreview(e=!1){const n=this.dragPreview,s=e||this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();if(s&&this.disconnectDragPreview(),!!this.handlerId){if(!n){this.lastConnectedDragPreview=n;return}s&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=n,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,n,this.dragPreviewOptions))}}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didConnectedDragSourceChange(){return this.lastConnectedDragSource!==this.dragSource}didConnectedDragPreviewChange(){return this.lastConnectedDragPreview!==this.dragPreview}didDragSourceOptionsChange(){return!Hf(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}didDragPreviewOptionsChange(){return!Hf(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}disconnectDragSource(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)}disconnectDragPreview(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}get dragSource(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current}get dragPreview(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current}clearDragSource(){this.dragSourceNode=null,this.dragSourceRef=null}clearDragPreview(){this.dragPreviewNode=null,this.dragPreviewRef=null}constructor(e){this.hooks=jb({dragSource:(n,s)=>{this.clearDragSource(),this.dragSourceOptions=s||null,Bf(n)?this.dragSourceRef=n:this.dragSourceNode=n,this.reconnectDragSource()},dragPreview:(n,s)=>{this.clearDragPreview(),this.dragPreviewOptions=s||null,Bf(n)?this.dragPreviewRef=n:this.dragPreviewNode=n,this.reconnectDragPreview()}}),this.handlerId=null,this.dragSourceRef=null,this.dragSourceOptionsInternal=null,this.dragPreviewRef=null,this.dragPreviewOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDragSource=null,this.lastConnectedDragSourceOptions=null,this.lastConnectedDragPreview=null,this.lastConnectedDragPreviewOptions=null,this.backend=e}}class fO{get connectTarget(){return this.dropTarget}reconnect(){const e=this.didHandlerIdChange()||this.didDropTargetChange()||this.didOptionsChange();e&&this.disconnectDropTarget();const n=this.dropTarget;if(this.handlerId){if(!n){this.lastConnectedDropTarget=n;return}e&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDropTarget=n,this.lastConnectedDropTargetOptions=this.dropTargetOptions,this.unsubscribeDropTarget=this.backend.connectDropTarget(this.handlerId,n,this.dropTargetOptions))}}receiveHandlerId(e){e!==this.handlerId&&(this.handlerId=e,this.reconnect())}get dropTargetOptions(){return this.dropTargetOptionsInternal}set dropTargetOptions(e){this.dropTargetOptionsInternal=e}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didDropTargetChange(){return this.lastConnectedDropTarget!==this.dropTarget}didOptionsChange(){return!Hf(this.lastConnectedDropTargetOptions,this.dropTargetOptions)}disconnectDropTarget(){this.unsubscribeDropTarget&&(this.unsubscribeDropTarget(),this.unsubscribeDropTarget=void 0)}get dropTarget(){return this.dropTargetNode||this.dropTargetRef&&this.dropTargetRef.current}clearDropTarget(){this.dropTargetRef=null,this.dropTargetNode=null}constructor(e){this.hooks=jb({dropTarget:(n,s)=>{this.clearDropTarget(),this.dropTargetOptions=s,Bf(n)?this.dropTargetRef=n:this.dropTargetNode=n,this.reconnect()}}),this.handlerId=null,this.dropTargetRef=null,this.dropTargetOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDropTarget=null,this.lastConnectedDropTargetOptions=null,this.backend=e}}function Fs(){const{dragDropManager:i}=D.useContext(wb);return Re(i!=null,"Expected drag drop context"),i}function hO(i,e){const n=Fs(),s=D.useMemo(()=>new dO(n.getBackend()),[n]);return kr(()=>(s.dragSourceOptions=i||null,s.reconnect(),()=>s.disconnectDragSource()),[s,i]),kr(()=>(s.dragPreviewOptions=e||null,s.reconnect(),()=>s.disconnectDragPreview()),[s,e]),s}function pO(){const i=Fs();return D.useMemo(()=>new rO(i),[i])}class gO{beginDrag(){const e=this.spec,n=this.monitor;let s=null;return typeof e.item=="object"?s=e.item:typeof e.item=="function"?s=e.item(n):s={},s??null}canDrag(){const e=this.spec,n=this.monitor;return typeof e.canDrag=="boolean"?e.canDrag:typeof e.canDrag=="function"?e.canDrag(n):!0}isDragging(e,n){const s=this.spec,o=this.monitor,{isDragging:c}=s;return c?c(o):n===e.getSourceId()}endDrag(){const e=this.spec,n=this.monitor,s=this.connector,{end:o}=e;o&&o(n.getItem(),n),s.reconnect()}constructor(e,n,s){this.spec=e,this.monitor=n,this.connector=s}}function mO(i,e,n){const s=D.useMemo(()=>new gO(i,e,n),[e,n]);return D.useEffect(()=>{s.spec=i},[i]),s}function vO(i){return D.useMemo(()=>{const e=i.type;return Re(e!=null,"spec.type must be defined"),e},[i])}function yO(i,e,n){const s=Fs(),o=mO(i,e,n),c=vO(i);kr(function(){if(c!=null){const[h,p]=oO(c,o,s);return e.receiveHandlerId(h),n.receiveHandlerId(h),p}},[s,e,n,o,c])}function _O(i,e){const n=Mb(i,e);Re(!n.begin,"useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)");const s=pO(),o=hO(n.options,n.previewOptions);return yO(n,s,o),[kb(n.collect,s,o),nO(o),iO(o)]}function bO(i){return D.useMemo(()=>i.hooks.dropTarget(),[i])}function EO(i){const e=Fs(),n=D.useMemo(()=>new fO(e.getBackend()),[e]);return kr(()=>(n.dropTargetOptions=i||null,n.reconnect(),()=>n.disconnectDropTarget()),[i]),n}function SO(){const i=Fs();return D.useMemo(()=>new sO(i),[i])}function TO(i){const{accept:e}=i;return D.useMemo(()=>(Re(i.accept!=null,"accept must be defined"),Array.isArray(e)?e:[e]),[e])}class CO{canDrop(){const e=this.spec,n=this.monitor;return e.canDrop?e.canDrop(n.getItem(),n):!0}hover(){const e=this.spec,n=this.monitor;e.hover&&e.hover(n.getItem(),n)}drop(){const e=this.spec,n=this.monitor;if(e.drop)return e.drop(n.getItem(),n)}constructor(e,n){this.spec=e,this.monitor=n}}function wO(i,e){const n=D.useMemo(()=>new CO(i,e),[e]);return D.useEffect(()=>{n.spec=i},[i]),n}function OO(i,e,n){const s=Fs(),o=wO(i,e),c=TO(i);kr(function(){const[h,p]=aO(c,o,s);return e.receiveHandlerId(h),n.receiveHandlerId(h),p},[s,e,o,n,c.map(d=>d.toString()).join("|")])}function Vh(i,e){const n=Mb(i,e),s=SO(),o=EO(n.options);return OO(n,s,o),[kb(n.collect,s,o),bO(o)]}function Lb(i){let e=null;return()=>(e==null&&(e=i()),e)}function RO(i,e){return i.filter(n=>n!==e)}function NO(i,e){const n=new Set,s=c=>n.add(c);i.forEach(s),e.forEach(s);const o=[];return n.forEach(c=>o.push(c)),o}class xO{enter(e){const n=this.entered.length,s=o=>this.isNodeInDocument(o)&&(!o.contains||o.contains(e));return this.entered=NO(this.entered.filter(s),[e]),n===0&&this.entered.length>0}leave(e){const n=this.entered.length;return this.entered=RO(this.entered.filter(this.isNodeInDocument),e),n>0&&this.entered.length===0}reset(){this.entered=[]}constructor(e){this.entered=[],this.isNodeInDocument=e}}class AO{initializeExposedProperties(){Object.keys(this.config.exposeProperties).forEach(e=>{Object.defineProperty(this.item,e,{configurable:!0,enumerable:!0,get(){return console.warn(`Browser doesn't allow reading "${e}" until the drop event.`),null}})})}loadDataTransfer(e){if(e){const n={};Object.keys(this.config.exposeProperties).forEach(s=>{const o=this.config.exposeProperties[s];o!=null&&(n[s]={value:o(e,this.config.matchesTypes),configurable:!0,enumerable:!0})}),Object.defineProperties(this.item,n)}}canDrag(){return!0}beginDrag(){return this.item}isDragging(e,n){return n===e.getSourceId()}endDrag(){}constructor(e){this.config=e,this.item={},this.initializeExposedProperties()}}const Pb="__NATIVE_FILE__",Ub="__NATIVE_URL__",zb="__NATIVE_TEXT__",Hb="__NATIVE_HTML__",a_=Object.freeze(Object.defineProperty({__proto__:null,FILE:Pb,HTML:Hb,TEXT:zb,URL:Ub},Symbol.toStringTag,{value:"Module"}));function yf(i,e,n){const s=e.reduce((o,c)=>o||i.getData(c),"");return s??n}const Vf={[Pb]:{exposeProperties:{files:i=>Array.prototype.slice.call(i.files),items:i=>i.items,dataTransfer:i=>i},matchesTypes:["Files"]},[Hb]:{exposeProperties:{html:(i,e)=>yf(i,e,""),dataTransfer:i=>i},matchesTypes:["Html","text/html"]},[Ub]:{exposeProperties:{urls:(i,e)=>yf(i,e,"").split(`
`),dataTransfer:i=>i},matchesTypes:["Url","text/uri-list"]},[zb]:{exposeProperties:{text:(i,e)=>yf(i,e,""),dataTransfer:i=>i},matchesTypes:["Text","text/plain"]}};function DO(i,e){const n=Vf[i];if(!n)throw new Error(`native type ${i} has no configuration`);const s=new AO(n);return s.loadDataTransfer(e),s}function _f(i){if(!i)return null;const e=Array.prototype.slice.call(i.types||[]);return Object.keys(Vf).filter(n=>{const s=Vf[n];return s!=null&&s.matchesTypes?s.matchesTypes.some(o=>e.indexOf(o)>-1):!1})[0]||null}const IO=Lb(()=>/firefox/i.test(navigator.userAgent)),Bb=Lb(()=>!!window.safari);class o_{interpolate(e){const{xs:n,ys:s,c1s:o,c2s:c,c3s:d}=this;let h=n.length-1;if(e===n[h])return s[h];let p=0,g=d.length-1,_;for(;p<=g;){_=Math.floor(.5*(p+g));const O=n[_];if(O<e)p=_+1;else if(O>e)g=_-1;else return s[_]}h=Math.max(0,g);const b=e-n[h],E=b*b;return s[h]+o[h]*b+c[h]*E+d[h]*b*E}constructor(e,n){const{length:s}=e,o=[];for(let O=0;O<s;O++)o.push(O);o.sort((O,C)=>e[O]<e[C]?-1:1);const c=[],d=[];let h,p;for(let O=0;O<s-1;O++)h=e[O+1]-e[O],p=n[O+1]-n[O],c.push(h),d.push(p/h);const g=[d[0]];for(let O=0;O<c.length-1;O++){const C=d[O],P=d[O+1];if(C*P<=0)g.push(0);else{h=c[O];const N=c[O+1],U=h+N;g.push(3*U/((U+N)/C+(U+h)/P))}}g.push(d[d.length-1]);const _=[],b=[];let E;for(let O=0;O<g.length-1;O++){E=d[O];const C=g[O],P=1/c[O],N=C+g[O+1]-E-E;_.push((E-C-N)*P),b.push(N*P*P)}this.xs=e,this.ys=n,this.c1s=g,this.c2s=_,this.c3s=b}}const kO=1;function Vb(i){const e=i.nodeType===kO?i:i.parentElement;if(!e)return null;const{top:n,left:s}=e.getBoundingClientRect();return{x:s,y:n}}function Fl(i){return{x:i.clientX,y:i.clientY}}function MO(i){var e;return i.nodeName==="IMG"&&(IO()||!(!((e=document.documentElement)===null||e===void 0)&&e.contains(i)))}function jO(i,e,n,s){let o=i?e.width:n,c=i?e.height:s;return Bb()&&i&&(c/=window.devicePixelRatio,o/=window.devicePixelRatio),{dragPreviewWidth:o,dragPreviewHeight:c}}function LO(i,e,n,s,o){const c=MO(e),h=Vb(c?i:e),p={x:n.x-h.x,y:n.y-h.y},{offsetWidth:g,offsetHeight:_}=i,{anchorX:b,anchorY:E}=s,{dragPreviewWidth:O,dragPreviewHeight:C}=jO(c,e,g,_),P=()=>{let se=new o_([0,.5,1],[p.y,p.y/_*C,p.y+C-_]).interpolate(E);return Bb()&&c&&(se+=(window.devicePixelRatio-1)*C),se},N=()=>new o_([0,.5,1],[p.x,p.x/g*O,p.x+O-g]).interpolate(b),{offsetX:U,offsetY:F}=o,te=U===0||U,K=F===0||F;return{x:te?U:N(),y:K?F:P()}}class PO{get window(){if(this.globalContext)return this.globalContext;if(typeof window<"u")return window}get document(){var e;return!((e=this.globalContext)===null||e===void 0)&&e.document?this.globalContext.document:this.window?this.window.document:void 0}get rootElement(){var e;return((e=this.optionsArgs)===null||e===void 0?void 0:e.rootElement)||this.window}constructor(e,n){this.ownerDocument=null,this.globalContext=e,this.optionsArgs=n}}function UO(i,e,n){return e in i?Object.defineProperty(i,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):i[e]=n,i}function l_(i){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{},s=Object.keys(n);typeof Object.getOwnPropertySymbols=="function"&&(s=s.concat(Object.getOwnPropertySymbols(n).filter(function(o){return Object.getOwnPropertyDescriptor(n,o).enumerable}))),s.forEach(function(o){UO(i,o,n[o])})}return i}class zO{profile(){var e,n;return{sourcePreviewNodes:this.sourcePreviewNodes.size,sourcePreviewNodeOptions:this.sourcePreviewNodeOptions.size,sourceNodeOptions:this.sourceNodeOptions.size,sourceNodes:this.sourceNodes.size,dragStartSourceIds:((e=this.dragStartSourceIds)===null||e===void 0?void 0:e.length)||0,dropTargetIds:this.dropTargetIds.length,dragEnterTargetIds:this.dragEnterTargetIds.length,dragOverTargetIds:((n=this.dragOverTargetIds)===null||n===void 0?void 0:n.length)||0}}get window(){return this.options.window}get document(){return this.options.document}get rootElement(){return this.options.rootElement}setup(){const e=this.rootElement;if(e!==void 0){if(e.__isReactDndBackendSetUp)throw new Error("Cannot have two HTML5 backends at the same time.");e.__isReactDndBackendSetUp=!0,this.addEventListeners(e)}}teardown(){const e=this.rootElement;if(e!==void 0&&(e.__isReactDndBackendSetUp=!1,this.removeEventListeners(this.rootElement),this.clearCurrentDragSourceNode(),this.asyncEndDragFrameId)){var n;(n=this.window)===null||n===void 0||n.cancelAnimationFrame(this.asyncEndDragFrameId)}}connectDragPreview(e,n,s){return this.sourcePreviewNodeOptions.set(e,s),this.sourcePreviewNodes.set(e,n),()=>{this.sourcePreviewNodes.delete(e),this.sourcePreviewNodeOptions.delete(e)}}connectDragSource(e,n,s){this.sourceNodes.set(e,n),this.sourceNodeOptions.set(e,s);const o=d=>this.handleDragStart(d,e),c=d=>this.handleSelectStart(d);return n.setAttribute("draggable","true"),n.addEventListener("dragstart",o),n.addEventListener("selectstart",c),()=>{this.sourceNodes.delete(e),this.sourceNodeOptions.delete(e),n.removeEventListener("dragstart",o),n.removeEventListener("selectstart",c),n.setAttribute("draggable","false")}}connectDropTarget(e,n){const s=d=>this.handleDragEnter(d,e),o=d=>this.handleDragOver(d,e),c=d=>this.handleDrop(d,e);return n.addEventListener("dragenter",s),n.addEventListener("dragover",o),n.addEventListener("drop",c),()=>{n.removeEventListener("dragenter",s),n.removeEventListener("dragover",o),n.removeEventListener("drop",c)}}addEventListeners(e){e.addEventListener&&(e.addEventListener("dragstart",this.handleTopDragStart),e.addEventListener("dragstart",this.handleTopDragStartCapture,!0),e.addEventListener("dragend",this.handleTopDragEndCapture,!0),e.addEventListener("dragenter",this.handleTopDragEnter),e.addEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.addEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.addEventListener("dragover",this.handleTopDragOver),e.addEventListener("dragover",this.handleTopDragOverCapture,!0),e.addEventListener("drop",this.handleTopDrop),e.addEventListener("drop",this.handleTopDropCapture,!0))}removeEventListeners(e){e.removeEventListener&&(e.removeEventListener("dragstart",this.handleTopDragStart),e.removeEventListener("dragstart",this.handleTopDragStartCapture,!0),e.removeEventListener("dragend",this.handleTopDragEndCapture,!0),e.removeEventListener("dragenter",this.handleTopDragEnter),e.removeEventListener("dragenter",this.handleTopDragEnterCapture,!0),e.removeEventListener("dragleave",this.handleTopDragLeaveCapture,!0),e.removeEventListener("dragover",this.handleTopDragOver),e.removeEventListener("dragover",this.handleTopDragOverCapture,!0),e.removeEventListener("drop",this.handleTopDrop),e.removeEventListener("drop",this.handleTopDropCapture,!0))}getCurrentSourceNodeOptions(){const e=this.monitor.getSourceId(),n=this.sourceNodeOptions.get(e);return l_({dropEffect:this.altKeyPressed?"copy":"move"},n||{})}getCurrentDropEffect(){return this.isDraggingNativeItem()?"copy":this.getCurrentSourceNodeOptions().dropEffect}getCurrentSourcePreviewNodeOptions(){const e=this.monitor.getSourceId(),n=this.sourcePreviewNodeOptions.get(e);return l_({anchorX:.5,anchorY:.5,captureDraggingState:!1},n||{})}isDraggingNativeItem(){const e=this.monitor.getItemType();return Object.keys(a_).some(n=>a_[n]===e)}beginDragNativeItem(e,n){this.clearCurrentDragSourceNode(),this.currentNativeSource=DO(e,n),this.currentNativeHandle=this.registry.addSource(e,this.currentNativeSource),this.actions.beginDrag([this.currentNativeHandle])}setCurrentDragSourceNode(e){this.clearCurrentDragSourceNode(),this.currentDragSourceNode=e;const n=1e3;this.mouseMoveTimeoutTimer=setTimeout(()=>{var s;return(s=this.rootElement)===null||s===void 0?void 0:s.addEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)},n)}clearCurrentDragSourceNode(){if(this.currentDragSourceNode){if(this.currentDragSourceNode=null,this.rootElement){var e;(e=this.window)===null||e===void 0||e.clearTimeout(this.mouseMoveTimeoutTimer||void 0),this.rootElement.removeEventListener("mousemove",this.endDragIfSourceWasRemovedFromDOM,!0)}return this.mouseMoveTimeoutTimer=null,!0}return!1}handleDragStart(e,n){e.defaultPrevented||(this.dragStartSourceIds||(this.dragStartSourceIds=[]),this.dragStartSourceIds.unshift(n))}handleDragEnter(e,n){this.dragEnterTargetIds.unshift(n)}handleDragOver(e,n){this.dragOverTargetIds===null&&(this.dragOverTargetIds=[]),this.dragOverTargetIds.unshift(n)}handleDrop(e,n){this.dropTargetIds.unshift(n)}constructor(e,n,s){this.sourcePreviewNodes=new Map,this.sourcePreviewNodeOptions=new Map,this.sourceNodes=new Map,this.sourceNodeOptions=new Map,this.dragStartSourceIds=null,this.dropTargetIds=[],this.dragEnterTargetIds=[],this.currentNativeSource=null,this.currentNativeHandle=null,this.currentDragSourceNode=null,this.altKeyPressed=!1,this.mouseMoveTimeoutTimer=null,this.asyncEndDragFrameId=null,this.dragOverTargetIds=null,this.lastClientOffset=null,this.hoverRafId=null,this.getSourceClientOffset=o=>{const c=this.sourceNodes.get(o);return c&&Vb(c)||null},this.endDragNativeItem=()=>{this.isDraggingNativeItem()&&(this.actions.endDrag(),this.currentNativeHandle&&this.registry.removeSource(this.currentNativeHandle),this.currentNativeHandle=null,this.currentNativeSource=null)},this.isNodeInDocument=o=>!!(o&&this.document&&this.document.body&&this.document.body.contains(o)),this.endDragIfSourceWasRemovedFromDOM=()=>{const o=this.currentDragSourceNode;o==null||this.isNodeInDocument(o)||(this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover())},this.scheduleHover=o=>{this.hoverRafId===null&&typeof requestAnimationFrame<"u"&&(this.hoverRafId=requestAnimationFrame(()=>{this.monitor.isDragging()&&this.actions.hover(o||[],{clientOffset:this.lastClientOffset}),this.hoverRafId=null}))},this.cancelHover=()=>{this.hoverRafId!==null&&typeof cancelAnimationFrame<"u"&&(cancelAnimationFrame(this.hoverRafId),this.hoverRafId=null)},this.handleTopDragStartCapture=()=>{this.clearCurrentDragSourceNode(),this.dragStartSourceIds=[]},this.handleTopDragStart=o=>{if(o.defaultPrevented)return;const{dragStartSourceIds:c}=this;this.dragStartSourceIds=null;const d=Fl(o);this.monitor.isDragging()&&(this.actions.endDrag(),this.cancelHover()),this.actions.beginDrag(c||[],{publishSource:!1,getSourceClientOffset:this.getSourceClientOffset,clientOffset:d});const{dataTransfer:h}=o,p=_f(h);if(this.monitor.isDragging()){if(h&&typeof h.setDragImage=="function"){const _=this.monitor.getSourceId(),b=this.sourceNodes.get(_),E=this.sourcePreviewNodes.get(_)||b;if(E){const{anchorX:O,anchorY:C,offsetX:P,offsetY:N}=this.getCurrentSourcePreviewNodeOptions(),te=LO(b,E,d,{anchorX:O,anchorY:C},{offsetX:P,offsetY:N});h.setDragImage(E,te.x,te.y)}}try{h==null||h.setData("application/json",{})}catch{}this.setCurrentDragSourceNode(o.target);const{captureDraggingState:g}=this.getCurrentSourcePreviewNodeOptions();g?this.actions.publishDragSource():setTimeout(()=>this.actions.publishDragSource(),0)}else if(p)this.beginDragNativeItem(p);else{if(h&&!h.types&&(o.target&&!o.target.hasAttribute||!o.target.hasAttribute("draggable")))return;o.preventDefault()}},this.handleTopDragEndCapture=()=>{this.clearCurrentDragSourceNode()&&this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleTopDragEnterCapture=o=>{if(this.dragEnterTargetIds=[],this.isDraggingNativeItem()){var c;(c=this.currentNativeSource)===null||c===void 0||c.loadDataTransfer(o.dataTransfer)}if(!this.enterLeaveCounter.enter(o.target)||this.monitor.isDragging())return;const{dataTransfer:h}=o,p=_f(h);p&&this.beginDragNativeItem(p,h)},this.handleTopDragEnter=o=>{const{dragEnterTargetIds:c}=this;if(this.dragEnterTargetIds=[],!this.monitor.isDragging())return;this.altKeyPressed=o.altKey,c.length>0&&this.actions.hover(c,{clientOffset:Fl(o)}),c.some(h=>this.monitor.canDropOnTarget(h))&&(o.preventDefault(),o.dataTransfer&&(o.dataTransfer.dropEffect=this.getCurrentDropEffect()))},this.handleTopDragOverCapture=o=>{if(this.dragOverTargetIds=[],this.isDraggingNativeItem()){var c;(c=this.currentNativeSource)===null||c===void 0||c.loadDataTransfer(o.dataTransfer)}},this.handleTopDragOver=o=>{const{dragOverTargetIds:c}=this;if(this.dragOverTargetIds=[],!this.monitor.isDragging()){o.preventDefault(),o.dataTransfer&&(o.dataTransfer.dropEffect="none");return}this.altKeyPressed=o.altKey,this.lastClientOffset=Fl(o),this.scheduleHover(c),(c||[]).some(h=>this.monitor.canDropOnTarget(h))?(o.preventDefault(),o.dataTransfer&&(o.dataTransfer.dropEffect=this.getCurrentDropEffect())):this.isDraggingNativeItem()?o.preventDefault():(o.preventDefault(),o.dataTransfer&&(o.dataTransfer.dropEffect="none"))},this.handleTopDragLeaveCapture=o=>{this.isDraggingNativeItem()&&o.preventDefault(),this.enterLeaveCounter.leave(o.target)&&(this.isDraggingNativeItem()&&setTimeout(()=>this.endDragNativeItem(),0),this.cancelHover())},this.handleTopDropCapture=o=>{if(this.dropTargetIds=[],this.isDraggingNativeItem()){var c;o.preventDefault(),(c=this.currentNativeSource)===null||c===void 0||c.loadDataTransfer(o.dataTransfer)}else _f(o.dataTransfer)&&o.preventDefault();this.enterLeaveCounter.reset()},this.handleTopDrop=o=>{const{dropTargetIds:c}=this;this.dropTargetIds=[],this.actions.hover(c,{clientOffset:Fl(o)}),this.actions.drop({dropEffect:this.getCurrentDropEffect()}),this.isDraggingNativeItem()?this.endDragNativeItem():this.monitor.isDragging()&&this.actions.endDrag(),this.cancelHover()},this.handleSelectStart=o=>{const c=o.target;typeof c.dragDrop=="function"&&(c.tagName==="INPUT"||c.tagName==="SELECT"||c.tagName==="TEXTAREA"||c.isContentEditable||(o.preventDefault(),c.dragDrop()))},this.options=new PO(n,s),this.actions=e.getActions(),this.monitor=e.getMonitor(),this.registry=e.getRegistry(),this.enterLeaveCounter=new xO(this.isNodeInDocument)}}const HO=function(e,n,s){return new zO(e,n,s)};var bf={exports:{}},Ef,c_;function BO(){if(c_)return Ef;c_=1;var i="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Ef=i,Ef}var Sf,u_;function VO(){if(u_)return Sf;u_=1;var i=BO();function e(){}function n(){}return n.resetWarningCache=e,Sf=function(){function s(d,h,p,g,_,b){if(b!==i){var E=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw E.name="Invariant Violation",E}}s.isRequired=s;function o(){return s}var c={array:s,bigint:s,bool:s,func:s,number:s,object:s,string:s,symbol:s,any:s,arrayOf:o,element:s,elementType:s,instanceOf:o,node:s,objectOf:o,oneOf:o,oneOfType:o,shape:o,exact:o,checkPropTypes:n,resetWarningCache:e};return c.PropTypes=c,c},Sf}var d_;function GO(){return d_||(d_=1,bf.exports=VO()()),bf.exports}var $O=GO();const Q=So($O);function Gf(){return Gf=Object.assign||function(i){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s])}return i},Gf.apply(this,arguments)}function qO(i,e){if(i==null)return{};var n=YO(i,e),s,o;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(i);for(o=0;o<c.length;o++)s=c[o],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(i,s)&&(n[s]=i[s])}return n}function YO(i,e){if(i==null)return{};var n={},s=Object.keys(i),o,c;for(c=0;c<s.length;c++)o=s[c],!(e.indexOf(o)>=0)&&(n[o]=i[o]);return n}var Gh=D.forwardRef(function(i,e){var n=i.color,s=n===void 0?"currentColor":n,o=i.size,c=o===void 0?24:o,d=qO(i,["color","size"]);return X.createElement("svg",Gf({ref:e,xmlns:"http://www.w3.org/2000/svg",width:c,height:c,viewBox:"0 0 24 24",fill:"none",stroke:s,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},d),X.createElement("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),X.createElement("polyline",{points:"19 12 12 19 5 12"}))});Gh.propTypes={color:Q.string,size:Q.oneOfType([Q.string,Q.number])};Gh.displayName="ArrowDown";function $f(){return $f=Object.assign||function(i){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s])}return i},$f.apply(this,arguments)}function FO(i,e){if(i==null)return{};var n=WO(i,e),s,o;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(i);for(o=0;o<c.length;o++)s=c[o],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(i,s)&&(n[s]=i[s])}return n}function WO(i,e){if(i==null)return{};var n={},s=Object.keys(i),o,c;for(c=0;c<s.length;c++)o=s[c],!(e.indexOf(o)>=0)&&(n[o]=i[o]);return n}var Yi=D.forwardRef(function(i,e){var n=i.color,s=n===void 0?"currentColor":n,o=i.size,c=o===void 0?24:o,d=FO(i,["color","size"]);return X.createElement("svg",$f({ref:e,xmlns:"http://www.w3.org/2000/svg",width:c,height:c,viewBox:"0 0 24 24",fill:"none",stroke:s,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},d),X.createElement("line",{x1:"19",y1:"12",x2:"5",y2:"12"}),X.createElement("polyline",{points:"12 19 5 12 12 5"}))});Yi.propTypes={color:Q.string,size:Q.oneOfType([Q.string,Q.number])};Yi.displayName="ArrowLeft";function qf(){return qf=Object.assign||function(i){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s])}return i},qf.apply(this,arguments)}function QO(i,e){if(i==null)return{};var n=KO(i,e),s,o;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(i);for(o=0;o<c.length;o++)s=c[o],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(i,s)&&(n[s]=i[s])}return n}function KO(i,e){if(i==null)return{};var n={},s=Object.keys(i),o,c;for(c=0;c<s.length;c++)o=s[c],!(e.indexOf(o)>=0)&&(n[o]=i[o]);return n}var $h=D.forwardRef(function(i,e){var n=i.color,s=n===void 0?"currentColor":n,o=i.size,c=o===void 0?24:o,d=QO(i,["color","size"]);return X.createElement("svg",qf({ref:e,xmlns:"http://www.w3.org/2000/svg",width:c,height:c,viewBox:"0 0 24 24",fill:"none",stroke:s,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},d),X.createElement("circle",{cx:"12",cy:"8",r:"7"}),X.createElement("polyline",{points:"8.21 13.89 7 23 12 20 17 23 15.79 13.88"}))});$h.propTypes={color:Q.string,size:Q.oneOfType([Q.string,Q.number])};$h.displayName="Award";function Yf(){return Yf=Object.assign||function(i){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s])}return i},Yf.apply(this,arguments)}function XO(i,e){if(i==null)return{};var n=ZO(i,e),s,o;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(i);for(o=0;o<c.length;o++)s=c[o],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(i,s)&&(n[s]=i[s])}return n}function ZO(i,e){if(i==null)return{};var n={},s=Object.keys(i),o,c;for(c=0;c<s.length;c++)o=s[c],!(e.indexOf(o)>=0)&&(n[o]=i[o]);return n}var rc=D.forwardRef(function(i,e){var n=i.color,s=n===void 0?"currentColor":n,o=i.size,c=o===void 0?24:o,d=XO(i,["color","size"]);return X.createElement("svg",Yf({ref:e,xmlns:"http://www.w3.org/2000/svg",width:c,height:c,viewBox:"0 0 24 24",fill:"none",stroke:s,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},d),X.createElement("line",{x1:"12",y1:"20",x2:"12",y2:"10"}),X.createElement("line",{x1:"18",y1:"20",x2:"18",y2:"4"}),X.createElement("line",{x1:"6",y1:"20",x2:"6",y2:"16"}))});rc.propTypes={color:Q.string,size:Q.oneOfType([Q.string,Q.number])};rc.displayName="BarChart";function Ff(){return Ff=Object.assign||function(i){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s])}return i},Ff.apply(this,arguments)}function JO(i,e){if(i==null)return{};var n=e1(i,e),s,o;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(i);for(o=0;o<c.length;o++)s=c[o],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(i,s)&&(n[s]=i[s])}return n}function e1(i,e){if(i==null)return{};var n={},s=Object.keys(i),o,c;for(c=0;c<s.length;c++)o=s[c],!(e.indexOf(o)>=0)&&(n[o]=i[o]);return n}var To=D.forwardRef(function(i,e){var n=i.color,s=n===void 0?"currentColor":n,o=i.size,c=o===void 0?24:o,d=JO(i,["color","size"]);return X.createElement("svg",Ff({ref:e,xmlns:"http://www.w3.org/2000/svg",width:c,height:c,viewBox:"0 0 24 24",fill:"none",stroke:s,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},d),X.createElement("polyline",{points:"6 9 12 15 18 9"}))});To.propTypes={color:Q.string,size:Q.oneOfType([Q.string,Q.number])};To.displayName="ChevronDown";function Wf(){return Wf=Object.assign||function(i){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s])}return i},Wf.apply(this,arguments)}function t1(i,e){if(i==null)return{};var n=n1(i,e),s,o;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(i);for(o=0;o<c.length;o++)s=c[o],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(i,s)&&(n[s]=i[s])}return n}function n1(i,e){if(i==null)return{};var n={},s=Object.keys(i),o,c;for(c=0;c<s.length;c++)o=s[c],!(e.indexOf(o)>=0)&&(n[o]=i[o]);return n}var qh=D.forwardRef(function(i,e){var n=i.color,s=n===void 0?"currentColor":n,o=i.size,c=o===void 0?24:o,d=t1(i,["color","size"]);return X.createElement("svg",Wf({ref:e,xmlns:"http://www.w3.org/2000/svg",width:c,height:c,viewBox:"0 0 24 24",fill:"none",stroke:s,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},d),X.createElement("polyline",{points:"15 18 9 12 15 6"}))});qh.propTypes={color:Q.string,size:Q.oneOfType([Q.string,Q.number])};qh.displayName="ChevronLeft";function Qf(){return Qf=Object.assign||function(i){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s])}return i},Qf.apply(this,arguments)}function i1(i,e){if(i==null)return{};var n=r1(i,e),s,o;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(i);for(o=0;o<c.length;o++)s=c[o],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(i,s)&&(n[s]=i[s])}return n}function r1(i,e){if(i==null)return{};var n={},s=Object.keys(i),o,c;for(c=0;c<s.length;c++)o=s[c],!(e.indexOf(o)>=0)&&(n[o]=i[o]);return n}var jc=D.forwardRef(function(i,e){var n=i.color,s=n===void 0?"currentColor":n,o=i.size,c=o===void 0?24:o,d=i1(i,["color","size"]);return X.createElement("svg",Qf({ref:e,xmlns:"http://www.w3.org/2000/svg",width:c,height:c,viewBox:"0 0 24 24",fill:"none",stroke:s,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},d),X.createElement("polyline",{points:"9 18 15 12 9 6"}))});jc.propTypes={color:Q.string,size:Q.oneOfType([Q.string,Q.number])};jc.displayName="ChevronRight";function Kf(){return Kf=Object.assign||function(i){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s])}return i},Kf.apply(this,arguments)}function s1(i,e){if(i==null)return{};var n=a1(i,e),s,o;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(i);for(o=0;o<c.length;o++)s=c[o],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(i,s)&&(n[s]=i[s])}return n}function a1(i,e){if(i==null)return{};var n={},s=Object.keys(i),o,c;for(c=0;c<s.length;c++)o=s[c],!(e.indexOf(o)>=0)&&(n[o]=i[o]);return n}var Yh=D.forwardRef(function(i,e){var n=i.color,s=n===void 0?"currentColor":n,o=i.size,c=o===void 0?24:o,d=s1(i,["color","size"]);return X.createElement("svg",Kf({ref:e,xmlns:"http://www.w3.org/2000/svg",width:c,height:c,viewBox:"0 0 24 24",fill:"none",stroke:s,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},d),X.createElement("polyline",{points:"18 15 12 9 6 15"}))});Yh.propTypes={color:Q.string,size:Q.oneOfType([Q.string,Q.number])};Yh.displayName="ChevronUp";function Xf(){return Xf=Object.assign||function(i){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s])}return i},Xf.apply(this,arguments)}function o1(i,e){if(i==null)return{};var n=l1(i,e),s,o;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(i);for(o=0;o<c.length;o++)s=c[o],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(i,s)&&(n[s]=i[s])}return n}function l1(i,e){if(i==null)return{};var n={},s=Object.keys(i),o,c;for(c=0;c<s.length;c++)o=s[c],!(e.indexOf(o)>=0)&&(n[o]=i[o]);return n}var Fh=D.forwardRef(function(i,e){var n=i.color,s=n===void 0?"currentColor":n,o=i.size,c=o===void 0?24:o,d=o1(i,["color","size"]);return X.createElement("svg",Xf({ref:e,xmlns:"http://www.w3.org/2000/svg",width:c,height:c,viewBox:"0 0 24 24",fill:"none",stroke:s,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},d),X.createElement("path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"}),X.createElement("rect",{x:"8",y:"2",width:"8",height:"4",rx:"1",ry:"1"}))});Fh.propTypes={color:Q.string,size:Q.oneOfType([Q.string,Q.number])};Fh.displayName="Clipboard";function Zf(){return Zf=Object.assign||function(i){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s])}return i},Zf.apply(this,arguments)}function c1(i,e){if(i==null)return{};var n=u1(i,e),s,o;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(i);for(o=0;o<c.length;o++)s=c[o],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(i,s)&&(n[s]=i[s])}return n}function u1(i,e){if(i==null)return{};var n={},s=Object.keys(i),o,c;for(c=0;c<s.length;c++)o=s[c],!(e.indexOf(o)>=0)&&(n[o]=i[o]);return n}var Wh=D.forwardRef(function(i,e){var n=i.color,s=n===void 0?"currentColor":n,o=i.size,c=o===void 0?24:o,d=c1(i,["color","size"]);return X.createElement("svg",Zf({ref:e,xmlns:"http://www.w3.org/2000/svg",width:c,height:c,viewBox:"0 0 24 24",fill:"none",stroke:s,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},d),X.createElement("path",{d:"M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"}))});Wh.propTypes={color:Q.string,size:Q.oneOfType([Q.string,Q.number])};Wh.displayName="Edit2";function Jf(){return Jf=Object.assign||function(i){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s])}return i},Jf.apply(this,arguments)}function d1(i,e){if(i==null)return{};var n=f1(i,e),s,o;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(i);for(o=0;o<c.length;o++)s=c[o],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(i,s)&&(n[s]=i[s])}return n}function f1(i,e){if(i==null)return{};var n={},s=Object.keys(i),o,c;for(c=0;c<s.length;c++)o=s[c],!(e.indexOf(o)>=0)&&(n[o]=i[o]);return n}var sc=D.forwardRef(function(i,e){var n=i.color,s=n===void 0?"currentColor":n,o=i.size,c=o===void 0?24:o,d=d1(i,["color","size"]);return X.createElement("svg",Jf({ref:e,xmlns:"http://www.w3.org/2000/svg",width:c,height:c,viewBox:"0 0 24 24",fill:"none",stroke:s,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},d),X.createElement("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),X.createElement("circle",{cx:"12",cy:"12",r:"3"}))});sc.propTypes={color:Q.string,size:Q.oneOfType([Q.string,Q.number])};sc.displayName="Eye";function eh(){return eh=Object.assign||function(i){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s])}return i},eh.apply(this,arguments)}function h1(i,e){if(i==null)return{};var n=p1(i,e),s,o;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(i);for(o=0;o<c.length;o++)s=c[o],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(i,s)&&(n[s]=i[s])}return n}function p1(i,e){if(i==null)return{};var n={},s=Object.keys(i),o,c;for(c=0;c<s.length;c++)o=s[c],!(e.indexOf(o)>=0)&&(n[o]=i[o]);return n}var Qh=D.forwardRef(function(i,e){var n=i.color,s=n===void 0?"currentColor":n,o=i.size,c=o===void 0?24:o,d=h1(i,["color","size"]);return X.createElement("svg",eh({ref:e,xmlns:"http://www.w3.org/2000/svg",width:c,height:c,viewBox:"0 0 24 24",fill:"none",stroke:s,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},d),X.createElement("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),X.createElement("polyline",{points:"14 2 14 8 20 8"}),X.createElement("line",{x1:"16",y1:"13",x2:"8",y2:"13"}),X.createElement("line",{x1:"16",y1:"17",x2:"8",y2:"17"}),X.createElement("polyline",{points:"10 9 9 9 8 9"}))});Qh.propTypes={color:Q.string,size:Q.oneOfType([Q.string,Q.number])};Qh.displayName="FileText";function th(){return th=Object.assign||function(i){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s])}return i},th.apply(this,arguments)}function g1(i,e){if(i==null)return{};var n=m1(i,e),s,o;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(i);for(o=0;o<c.length;o++)s=c[o],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(i,s)&&(n[s]=i[s])}return n}function m1(i,e){if(i==null)return{};var n={},s=Object.keys(i),o,c;for(c=0;c<s.length;c++)o=s[c],!(e.indexOf(o)>=0)&&(n[o]=i[o]);return n}var Kh=D.forwardRef(function(i,e){var n=i.color,s=n===void 0?"currentColor":n,o=i.size,c=o===void 0?24:o,d=g1(i,["color","size"]);return X.createElement("svg",th({ref:e,xmlns:"http://www.w3.org/2000/svg",width:c,height:c,viewBox:"0 0 24 24",fill:"none",stroke:s,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},d),X.createElement("polygon",{points:"12 2 2 7 12 12 22 7 12 2"}),X.createElement("polyline",{points:"2 17 12 22 22 17"}),X.createElement("polyline",{points:"2 12 12 17 22 12"}))});Kh.propTypes={color:Q.string,size:Q.oneOfType([Q.string,Q.number])};Kh.displayName="Layers";function nh(){return nh=Object.assign||function(i){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s])}return i},nh.apply(this,arguments)}function v1(i,e){if(i==null)return{};var n=y1(i,e),s,o;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(i);for(o=0;o<c.length;o++)s=c[o],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(i,s)&&(n[s]=i[s])}return n}function y1(i,e){if(i==null)return{};var n={},s=Object.keys(i),o,c;for(c=0;c<s.length;c++)o=s[c],!(e.indexOf(o)>=0)&&(n[o]=i[o]);return n}var Xh=D.forwardRef(function(i,e){var n=i.color,s=n===void 0?"currentColor":n,o=i.size,c=o===void 0?24:o,d=v1(i,["color","size"]);return X.createElement("svg",nh({ref:e,xmlns:"http://www.w3.org/2000/svg",width:c,height:c,viewBox:"0 0 24 24",fill:"none",stroke:s,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},d),X.createElement("path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71"}),X.createElement("path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71"}))});Xh.propTypes={color:Q.string,size:Q.oneOfType([Q.string,Q.number])};Xh.displayName="Link";function ih(){return ih=Object.assign||function(i){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s])}return i},ih.apply(this,arguments)}function _1(i,e){if(i==null)return{};var n=b1(i,e),s,o;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(i);for(o=0;o<c.length;o++)s=c[o],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(i,s)&&(n[s]=i[s])}return n}function b1(i,e){if(i==null)return{};var n={},s=Object.keys(i),o,c;for(c=0;c<s.length;c++)o=s[c],!(e.indexOf(o)>=0)&&(n[o]=i[o]);return n}var Zh=D.forwardRef(function(i,e){var n=i.color,s=n===void 0?"currentColor":n,o=i.size,c=o===void 0?24:o,d=_1(i,["color","size"]);return X.createElement("svg",ih({ref:e,xmlns:"http://www.w3.org/2000/svg",width:c,height:c,viewBox:"0 0 24 24",fill:"none",stroke:s,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},d),X.createElement("path",{d:"M21 11.5a8.38 8.38 0 0 1-.9 3.8 8.5 8.5 0 0 1-7.6 4.7 8.38 8.38 0 0 1-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 0 1-.9-3.8 8.5 8.5 0 0 1 4.7-7.6 8.38 8.38 0 0 1 3.8-.9h.5a8.48 8.48 0 0 1 8 8v.5z"}))});Zh.propTypes={color:Q.string,size:Q.oneOfType([Q.string,Q.number])};Zh.displayName="MessageCircle";function rh(){return rh=Object.assign||function(i){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s])}return i},rh.apply(this,arguments)}function E1(i,e){if(i==null)return{};var n=S1(i,e),s,o;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(i);for(o=0;o<c.length;o++)s=c[o],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(i,s)&&(n[s]=i[s])}return n}function S1(i,e){if(i==null)return{};var n={},s=Object.keys(i),o,c;for(c=0;c<s.length;c++)o=s[c],!(e.indexOf(o)>=0)&&(n[o]=i[o]);return n}var Lc=D.forwardRef(function(i,e){var n=i.color,s=n===void 0?"currentColor":n,o=i.size,c=o===void 0?24:o,d=E1(i,["color","size"]);return X.createElement("svg",rh({ref:e,xmlns:"http://www.w3.org/2000/svg",width:c,height:c,viewBox:"0 0 24 24",fill:"none",stroke:s,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},d),X.createElement("path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"}))});Lc.propTypes={color:Q.string,size:Q.oneOfType([Q.string,Q.number])};Lc.displayName="MessageSquare";function sh(){return sh=Object.assign||function(i){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s])}return i},sh.apply(this,arguments)}function T1(i,e){if(i==null)return{};var n=C1(i,e),s,o;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(i);for(o=0;o<c.length;o++)s=c[o],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(i,s)&&(n[s]=i[s])}return n}function C1(i,e){if(i==null)return{};var n={},s=Object.keys(i),o,c;for(c=0;c<s.length;c++)o=s[c],!(e.indexOf(o)>=0)&&(n[o]=i[o]);return n}var Jh=D.forwardRef(function(i,e){var n=i.color,s=n===void 0?"currentColor":n,o=i.size,c=o===void 0?24:o,d=T1(i,["color","size"]);return X.createElement("svg",sh({ref:e,xmlns:"http://www.w3.org/2000/svg",width:c,height:c,viewBox:"0 0 24 24",fill:"none",stroke:s,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},d),X.createElement("path",{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"}))});Jh.propTypes={color:Q.string,size:Q.oneOfType([Q.string,Q.number])};Jh.displayName="Moon";function ah(){return ah=Object.assign||function(i){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s])}return i},ah.apply(this,arguments)}function w1(i,e){if(i==null)return{};var n=O1(i,e),s,o;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(i);for(o=0;o<c.length;o++)s=c[o],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(i,s)&&(n[s]=i[s])}return n}function O1(i,e){if(i==null)return{};var n={},s=Object.keys(i),o,c;for(c=0;c<s.length;c++)o=s[c],!(e.indexOf(o)>=0)&&(n[o]=i[o]);return n}var ep=D.forwardRef(function(i,e){var n=i.color,s=n===void 0?"currentColor":n,o=i.size,c=o===void 0?24:o,d=w1(i,["color","size"]);return X.createElement("svg",ah({ref:e,xmlns:"http://www.w3.org/2000/svg",width:c,height:c,viewBox:"0 0 24 24",fill:"none",stroke:s,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},d),X.createElement("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),X.createElement("line",{x1:"12",y1:"8",x2:"12",y2:"16"}),X.createElement("line",{x1:"8",y1:"12",x2:"16",y2:"12"}))});ep.propTypes={color:Q.string,size:Q.oneOfType([Q.string,Q.number])};ep.displayName="PlusSquare";function oh(){return oh=Object.assign||function(i){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s])}return i},oh.apply(this,arguments)}function R1(i,e){if(i==null)return{};var n=N1(i,e),s,o;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(i);for(o=0;o<c.length;o++)s=c[o],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(i,s)&&(n[s]=i[s])}return n}function N1(i,e){if(i==null)return{};var n={},s=Object.keys(i),o,c;for(c=0;c<s.length;c++)o=s[c],!(e.indexOf(o)>=0)&&(n[o]=i[o]);return n}var Pc=D.forwardRef(function(i,e){var n=i.color,s=n===void 0?"currentColor":n,o=i.size,c=o===void 0?24:o,d=R1(i,["color","size"]);return X.createElement("svg",oh({ref:e,xmlns:"http://www.w3.org/2000/svg",width:c,height:c,viewBox:"0 0 24 24",fill:"none",stroke:s,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},d),X.createElement("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),X.createElement("line",{x1:"5",y1:"12",x2:"19",y2:"12"}))});Pc.propTypes={color:Q.string,size:Q.oneOfType([Q.string,Q.number])};Pc.displayName="Plus";function lh(){return lh=Object.assign||function(i){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s])}return i},lh.apply(this,arguments)}function x1(i,e){if(i==null)return{};var n=A1(i,e),s,o;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(i);for(o=0;o<c.length;o++)s=c[o],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(i,s)&&(n[s]=i[s])}return n}function A1(i,e){if(i==null)return{};var n={},s=Object.keys(i),o,c;for(c=0;c<s.length;c++)o=s[c],!(e.indexOf(o)>=0)&&(n[o]=i[o]);return n}var tp=D.forwardRef(function(i,e){var n=i.color,s=n===void 0?"currentColor":n,o=i.size,c=o===void 0?24:o,d=x1(i,["color","size"]);return X.createElement("svg",lh({ref:e,xmlns:"http://www.w3.org/2000/svg",width:c,height:c,viewBox:"0 0 24 24",fill:"none",stroke:s,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},d),X.createElement("circle",{cx:"12",cy:"12",r:"3"}),X.createElement("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"}))});tp.propTypes={color:Q.string,size:Q.oneOfType([Q.string,Q.number])};tp.displayName="Settings";function ch(){return ch=Object.assign||function(i){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s])}return i},ch.apply(this,arguments)}function D1(i,e){if(i==null)return{};var n=I1(i,e),s,o;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(i);for(o=0;o<c.length;o++)s=c[o],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(i,s)&&(n[s]=i[s])}return n}function I1(i,e){if(i==null)return{};var n={},s=Object.keys(i),o,c;for(c=0;c<s.length;c++)o=s[c],!(e.indexOf(o)>=0)&&(n[o]=i[o]);return n}var xr=D.forwardRef(function(i,e){var n=i.color,s=n===void 0?"currentColor":n,o=i.size,c=o===void 0?24:o,d=D1(i,["color","size"]);return X.createElement("svg",ch({ref:e,xmlns:"http://www.w3.org/2000/svg",width:c,height:c,viewBox:"0 0 24 24",fill:"none",stroke:s,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},d),X.createElement("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"}))});xr.propTypes={color:Q.string,size:Q.oneOfType([Q.string,Q.number])};xr.displayName="Star";function uh(){return uh=Object.assign||function(i){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s])}return i},uh.apply(this,arguments)}function k1(i,e){if(i==null)return{};var n=M1(i,e),s,o;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(i);for(o=0;o<c.length;o++)s=c[o],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(i,s)&&(n[s]=i[s])}return n}function M1(i,e){if(i==null)return{};var n={},s=Object.keys(i),o,c;for(c=0;c<s.length;c++)o=s[c],!(e.indexOf(o)>=0)&&(n[o]=i[o]);return n}var np=D.forwardRef(function(i,e){var n=i.color,s=n===void 0?"currentColor":n,o=i.size,c=o===void 0?24:o,d=k1(i,["color","size"]);return X.createElement("svg",uh({ref:e,xmlns:"http://www.w3.org/2000/svg",width:c,height:c,viewBox:"0 0 24 24",fill:"none",stroke:s,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},d),X.createElement("circle",{cx:"12",cy:"12",r:"5"}),X.createElement("line",{x1:"12",y1:"1",x2:"12",y2:"3"}),X.createElement("line",{x1:"12",y1:"21",x2:"12",y2:"23"}),X.createElement("line",{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"}),X.createElement("line",{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"}),X.createElement("line",{x1:"1",y1:"12",x2:"3",y2:"12"}),X.createElement("line",{x1:"21",y1:"12",x2:"23",y2:"12"}),X.createElement("line",{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"}),X.createElement("line",{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"}))});np.propTypes={color:Q.string,size:Q.oneOfType([Q.string,Q.number])};np.displayName="Sun";function dh(){return dh=Object.assign||function(i){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s])}return i},dh.apply(this,arguments)}function j1(i,e){if(i==null)return{};var n=L1(i,e),s,o;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(i);for(o=0;o<c.length;o++)s=c[o],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(i,s)&&(n[s]=i[s])}return n}function L1(i,e){if(i==null)return{};var n={},s=Object.keys(i),o,c;for(c=0;c<s.length;c++)o=s[c],!(e.indexOf(o)>=0)&&(n[o]=i[o]);return n}var ip=D.forwardRef(function(i,e){var n=i.color,s=n===void 0?"currentColor":n,o=i.size,c=o===void 0?24:o,d=j1(i,["color","size"]);return X.createElement("svg",dh({ref:e,xmlns:"http://www.w3.org/2000/svg",width:c,height:c,viewBox:"0 0 24 24",fill:"none",stroke:s,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},d),X.createElement("path",{d:"M14 9V5a3 3 0 0 0-3-3l-4 9v11h11.28a2 2 0 0 0 2-1.7l1.38-9a2 2 0 0 0-2-2.3zM7 22H4a2 2 0 0 1-2-2v-7a2 2 0 0 1 2-2h3"}))});ip.propTypes={color:Q.string,size:Q.oneOfType([Q.string,Q.number])};ip.displayName="ThumbsUp";function fh(){return fh=Object.assign||function(i){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s])}return i},fh.apply(this,arguments)}function P1(i,e){if(i==null)return{};var n=U1(i,e),s,o;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(i);for(o=0;o<c.length;o++)s=c[o],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(i,s)&&(n[s]=i[s])}return n}function U1(i,e){if(i==null)return{};var n={},s=Object.keys(i),o,c;for(c=0;c<s.length;c++)o=s[c],!(e.indexOf(o)>=0)&&(n[o]=i[o]);return n}var rp=D.forwardRef(function(i,e){var n=i.color,s=n===void 0?"currentColor":n,o=i.size,c=o===void 0?24:o,d=P1(i,["color","size"]);return X.createElement("svg",fh({ref:e,xmlns:"http://www.w3.org/2000/svg",width:c,height:c,viewBox:"0 0 24 24",fill:"none",stroke:s,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},d),X.createElement("polyline",{points:"3 6 5 6 21 6"}),X.createElement("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}),X.createElement("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),X.createElement("line",{x1:"14",y1:"11",x2:"14",y2:"17"}))});rp.propTypes={color:Q.string,size:Q.oneOfType([Q.string,Q.number])};rp.displayName="Trash2";function hh(){return hh=Object.assign||function(i){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(i[s]=n[s])}return i},hh.apply(this,arguments)}function z1(i,e){if(i==null)return{};var n=H1(i,e),s,o;if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(i);for(o=0;o<c.length;o++)s=c[o],!(e.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(i,s)&&(n[s]=i[s])}return n}function H1(i,e){if(i==null)return{};var n={},s=Object.keys(i),o,c;for(c=0;c<s.length;c++)o=s[c],!(e.indexOf(o)>=0)&&(n[o]=i[o]);return n}var Co=D.forwardRef(function(i,e){var n=i.color,s=n===void 0?"currentColor":n,o=i.size,c=o===void 0?24:o,d=z1(i,["color","size"]);return X.createElement("svg",hh({ref:e,xmlns:"http://www.w3.org/2000/svg",width:c,height:c,viewBox:"0 0 24 24",fill:"none",stroke:s,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},d),X.createElement("path",{d:"M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"}),X.createElement("circle",{cx:"9",cy:"7",r:"4"}),X.createElement("path",{d:"M23 21v-2a4 4 0 0 0-3-3.87"}),X.createElement("path",{d:"M16 3.13a4 4 0 0 1 0 7.75"}))});Co.propTypes={color:Q.string,size:Q.oneOfType([Q.string,Q.number])};Co.displayName="Users";const B1=()=>{};var f_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gb={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ie=function(i,e){if(!i)throw Ws(e)},Ws=function(i){return new Error("Firebase Database ("+Gb.SDK_VERSION+") INTERNAL ASSERT FAILED: "+i)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $b=function(i){const e=[];let n=0;for(let s=0;s<i.length;s++){let o=i.charCodeAt(s);o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):(o&64512)===55296&&s+1<i.length&&(i.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(i.charCodeAt(++s)&1023),e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},V1=function(i){const e=[];let n=0,s=0;for(;n<i.length;){const o=i[n++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const c=i[n++];e[s++]=String.fromCharCode((o&31)<<6|c&63)}else if(o>239&&o<365){const c=i[n++],d=i[n++],h=i[n++],p=((o&7)<<18|(c&63)<<12|(d&63)<<6|h&63)-65536;e[s++]=String.fromCharCode(55296+(p>>10)),e[s++]=String.fromCharCode(56320+(p&1023))}else{const c=i[n++],d=i[n++];e[s++]=String.fromCharCode((o&15)<<12|(c&63)<<6|d&63)}}return e.join("")},sp={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(i,e){if(!Array.isArray(i))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<i.length;o+=3){const c=i[o],d=o+1<i.length,h=d?i[o+1]:0,p=o+2<i.length,g=p?i[o+2]:0,_=c>>2,b=(c&3)<<4|h>>4;let E=(h&15)<<2|g>>6,O=g&63;p||(O=64,d||(E=64)),s.push(n[_],n[b],n[E],n[O])}return s.join("")},encodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(i):this.encodeByteArray($b(i),e)},decodeString(i,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(i):V1(this.decodeStringToByteArray(i,e))},decodeStringToByteArray(i,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<i.length;){const c=n[i.charAt(o++)],h=o<i.length?n[i.charAt(o)]:0;++o;const g=o<i.length?n[i.charAt(o)]:64;++o;const b=o<i.length?n[i.charAt(o)]:64;if(++o,c==null||h==null||g==null||b==null)throw new G1;const E=c<<2|h>>4;if(s.push(E),g!==64){const O=h<<4&240|g>>2;if(s.push(O),b!==64){const C=g<<6&192|b;s.push(C)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let i=0;i<this.ENCODED_VALS.length;i++)this.byteToCharMap_[i]=this.ENCODED_VALS.charAt(i),this.charToByteMap_[this.byteToCharMap_[i]]=i,this.byteToCharMapWebSafe_[i]=this.ENCODED_VALS_WEBSAFE.charAt(i),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[i]]=i,i>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(i)]=i,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(i)]=i)}}};class G1 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const qb=function(i){const e=$b(i);return sp.encodeByteArray(e,!0)},ac=function(i){return qb(i).replace(/\./g,"")},oc=function(i){try{return sp.decodeString(i,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $1(i){return Yb(void 0,i)}function Yb(i,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:i===void 0&&(i={});break;case Array:i=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!q1(n)||(i[n]=Yb(i[n],e[n]));return i}function q1(i){return i!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y1(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F1=()=>Y1().__FIREBASE_DEFAULTS__,W1=()=>{if(typeof process>"u"||typeof f_>"u")return;const i=f_.__FIREBASE_DEFAULTS__;if(i)return JSON.parse(i)},Q1=()=>{if(typeof document>"u")return;let i;try{i=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=i&&oc(i[1]);return e&&JSON.parse(e)},ap=()=>{try{return B1()||F1()||W1()||Q1()}catch(i){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${i}`);return}},Fb=i=>{var e,n;return(n=(e=ap())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[i]},K1=i=>{const e=Fb(i);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),s]:[e.substring(0,n),s]},Wb=()=>{var i;return(i=ap())===null||i===void 0?void 0:i.config},Qb=i=>{var e;return(e=ap())===null||e===void 0?void 0:e[`_${i}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uc{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,s)=>{n?this.reject(n):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,s))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X1(i,e){if(i.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},s=e||"demo-project",o=i.iat||0,c=i.sub||i.user_id;if(!c)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const d=Object.assign({iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:c,user_id:c,firebase:{sign_in_provider:"custom",identities:{}}},i);return[ac(JSON.stringify(n)),ac(JSON.stringify(d)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function op(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Yt())}function Z1(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function J1(){const i=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof i=="object"&&i.id!==void 0}function Kb(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function eR(){const i=Yt();return i.indexOf("MSIE ")>=0||i.indexOf("Trident/")>=0}function tR(){return Gb.NODE_ADMIN===!0}function nR(){try{return typeof indexedDB=="object"}catch{return!1}}function iR(){return new Promise((i,e)=>{try{let n=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(s),i(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var c;e(((c=o.error)===null||c===void 0?void 0:c.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rR="FirebaseError";class lr extends Error{constructor(e,n,s){super(n),this.code=e,this.customData=s,this.name=rR,Object.setPrototypeOf(this,lr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,wo.prototype.create)}}class wo{constructor(e,n,s){this.service=e,this.serviceName=n,this.errors=s}create(e,...n){const s=n[0]||{},o=`${this.service}/${e}`,c=this.errors[e],d=c?sR(c,s):"Error",h=`${this.serviceName}: ${d} (${o}).`;return new lr(o,h,s)}}function sR(i,e){return i.replace(aR,(n,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const aR=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fo(i){return JSON.parse(i)}function Tt(i){return JSON.stringify(i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xb=function(i){let e={},n={},s={},o="";try{const c=i.split(".");e=fo(oc(c[0])||""),n=fo(oc(c[1])||""),o=c[2],s=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:s,signature:o}},oR=function(i){const e=Xb(i),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},lR=function(i){const e=Xb(i).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bi(i,e){return Object.prototype.hasOwnProperty.call(i,e)}function Bs(i,e){if(Object.prototype.hasOwnProperty.call(i,e))return i[e]}function ph(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}function lc(i,e,n){const s={};for(const o in i)Object.prototype.hasOwnProperty.call(i,o)&&(s[o]=e.call(n,i[o],o,i));return s}function Mr(i,e){if(i===e)return!0;const n=Object.keys(i),s=Object.keys(e);for(const o of n){if(!s.includes(o))return!1;const c=i[o],d=e[o];if(h_(c)&&h_(d)){if(!Mr(c,d))return!1}else if(c!==d)return!1}for(const o of s)if(!n.includes(o))return!1;return!0}function h_(i){return i!==null&&typeof i=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qs(i){const e=[];for(const[n,s]of Object.entries(i))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cR{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const s=this.W_;if(typeof e=="string")for(let b=0;b<16;b++)s[b]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let b=0;b<16;b++)s[b]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let b=16;b<80;b++){const E=s[b-3]^s[b-8]^s[b-14]^s[b-16];s[b]=(E<<1|E>>>31)&4294967295}let o=this.chain_[0],c=this.chain_[1],d=this.chain_[2],h=this.chain_[3],p=this.chain_[4],g,_;for(let b=0;b<80;b++){b<40?b<20?(g=h^c&(d^h),_=1518500249):(g=c^d^h,_=1859775393):b<60?(g=c&d|h&(c|d),_=2400959708):(g=c^d^h,_=3395469782);const E=(o<<5|o>>>27)+g+p+_+s[b]&4294967295;p=h,h=d,d=(c<<30|c>>>2)&4294967295,c=o,o=E}this.chain_[0]=this.chain_[0]+o&4294967295,this.chain_[1]=this.chain_[1]+c&4294967295,this.chain_[2]=this.chain_[2]+d&4294967295,this.chain_[3]=this.chain_[3]+h&4294967295,this.chain_[4]=this.chain_[4]+p&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const s=n-this.blockSize;let o=0;const c=this.buf_;let d=this.inbuf_;for(;o<n;){if(d===0)for(;o<=s;)this.compress_(e,o),o+=this.blockSize;if(typeof e=="string"){for(;o<n;)if(c[d]=e.charCodeAt(o),++d,++o,d===this.blockSize){this.compress_(c),d=0;break}}else for(;o<n;)if(c[d]=e[o],++d,++o,d===this.blockSize){this.compress_(c),d=0;break}}this.inbuf_=d,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let o=this.blockSize-1;o>=56;o--)this.buf_[o]=n&255,n/=256;this.compress_(this.buf_);let s=0;for(let o=0;o<5;o++)for(let c=24;c>=0;c-=8)e[s]=this.chain_[o]>>c&255,++s;return e}}function uR(i,e){const n=new dR(i,e);return n.subscribe.bind(n)}class dR{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,s){let o;if(e===void 0&&n===void 0&&s===void 0)throw new Error("Missing Observer.");fR(e,["next","error","complete"])?o=e:o={next:e,error:n,complete:s},o.next===void 0&&(o.next=Tf),o.error===void 0&&(o.error=Tf),o.complete===void 0&&(o.complete=Tf);const c=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),c}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function fR(i,e){if(typeof i!="object"||i===null)return!1;for(const n of e)if(n in i&&typeof i[n]=="function")return!0;return!1}function Tf(){}function lp(i,e){return`${i} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hR=function(i){const e=[];let n=0;for(let s=0;s<i.length;s++){let o=i.charCodeAt(s);if(o>=55296&&o<=56319){const c=o-55296;s++,ie(s<i.length,"Surrogate pair missing trail surrogate.");const d=i.charCodeAt(s)-56320;o=65536+(c<<10)+d}o<128?e[n++]=o:o<2048?(e[n++]=o>>6|192,e[n++]=o&63|128):o<65536?(e[n++]=o>>12|224,e[n++]=o>>6&63|128,e[n++]=o&63|128):(e[n++]=o>>18|240,e[n++]=o>>12&63|128,e[n++]=o>>6&63|128,e[n++]=o&63|128)}return e},zc=function(i){let e=0;for(let n=0;n<i.length;n++){const s=i.charCodeAt(n);s<128?e++:s<2048?e+=2:s>=55296&&s<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rn(i){return i&&i._delegate?i._delegate:i}class jr{constructor(e,n,s){this.name=e,this.instanceFactory=n,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rr="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pR{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const s=new Uc;if(this.instancesDeferred.set(n,s),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const s=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),o=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(s)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:s})}catch(c){if(o)return null;throw c}else{if(o)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(mR(e))try{this.getOrInitializeService({instanceIdentifier:Rr})}catch{}for(const[n,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const c=this.getOrInitializeService({instanceIdentifier:o});s.resolve(c)}catch{}}}}clearInstance(e=Rr){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Rr){return this.instances.has(e)}getOptions(e=Rr){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:n});for(const[c,d]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(c);s===h&&d.resolve(o)}return o}onInit(e,n){var s;const o=this.normalizeInstanceIdentifier(n),c=(s=this.onInitCallbacks.get(o))!==null&&s!==void 0?s:new Set;c.add(e),this.onInitCallbacks.set(o,c);const d=this.instances.get(o);return d&&e(d,o),()=>{c.delete(e)}}invokeOnInitCallbacks(e,n){const s=this.onInitCallbacks.get(n);if(s)for(const o of s)try{o(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:gR(e),options:n}),this.instances.set(e,s),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Rr){return this.component?this.component.multipleInstances?e:Rr:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function gR(i){return i===Rr?void 0:i}function mR(i){return i.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vR{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new pR(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var et;(function(i){i[i.DEBUG=0]="DEBUG",i[i.VERBOSE=1]="VERBOSE",i[i.INFO=2]="INFO",i[i.WARN=3]="WARN",i[i.ERROR=4]="ERROR",i[i.SILENT=5]="SILENT"})(et||(et={}));const yR={debug:et.DEBUG,verbose:et.VERBOSE,info:et.INFO,warn:et.WARN,error:et.ERROR,silent:et.SILENT},_R=et.INFO,bR={[et.DEBUG]:"log",[et.VERBOSE]:"log",[et.INFO]:"info",[et.WARN]:"warn",[et.ERROR]:"error"},ER=(i,e,...n)=>{if(e<i.logLevel)return;const s=new Date().toISOString(),o=bR[e];if(o)console[o](`[${s}]  ${i.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class cp{constructor(e){this.name=e,this._logLevel=_R,this._logHandler=ER,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in et))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?yR[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,et.DEBUG,...e),this._logHandler(this,et.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,et.VERBOSE,...e),this._logHandler(this,et.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,et.INFO,...e),this._logHandler(this,et.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,et.WARN,...e),this._logHandler(this,et.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,et.ERROR,...e),this._logHandler(this,et.ERROR,...e)}}const SR=(i,e)=>e.some(n=>i instanceof n);let p_,g_;function TR(){return p_||(p_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function CR(){return g_||(g_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Zb=new WeakMap,gh=new WeakMap,Jb=new WeakMap,Cf=new WeakMap,up=new WeakMap;function wR(i){const e=new Promise((n,s)=>{const o=()=>{i.removeEventListener("success",c),i.removeEventListener("error",d)},c=()=>{n(Xi(i.result)),o()},d=()=>{s(i.error),o()};i.addEventListener("success",c),i.addEventListener("error",d)});return e.then(n=>{n instanceof IDBCursor&&Zb.set(n,i)}).catch(()=>{}),up.set(e,i),e}function OR(i){if(gh.has(i))return;const e=new Promise((n,s)=>{const o=()=>{i.removeEventListener("complete",c),i.removeEventListener("error",d),i.removeEventListener("abort",d)},c=()=>{n(),o()},d=()=>{s(i.error||new DOMException("AbortError","AbortError")),o()};i.addEventListener("complete",c),i.addEventListener("error",d),i.addEventListener("abort",d)});gh.set(i,e)}let mh={get(i,e,n){if(i instanceof IDBTransaction){if(e==="done")return gh.get(i);if(e==="objectStoreNames")return i.objectStoreNames||Jb.get(i);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Xi(i[e])},set(i,e,n){return i[e]=n,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function RR(i){mh=i(mh)}function NR(i){return i===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const s=i.call(wf(this),e,...n);return Jb.set(s,e.sort?e.sort():[e]),Xi(s)}:CR().includes(i)?function(...e){return i.apply(wf(this),e),Xi(Zb.get(this))}:function(...e){return Xi(i.apply(wf(this),e))}}function xR(i){return typeof i=="function"?NR(i):(i instanceof IDBTransaction&&OR(i),SR(i,TR())?new Proxy(i,mh):i)}function Xi(i){if(i instanceof IDBRequest)return wR(i);if(Cf.has(i))return Cf.get(i);const e=xR(i);return e!==i&&(Cf.set(i,e),up.set(e,i)),e}const wf=i=>up.get(i);function AR(i,e,{blocked:n,upgrade:s,blocking:o,terminated:c}={}){const d=indexedDB.open(i,e),h=Xi(d);return s&&d.addEventListener("upgradeneeded",p=>{s(Xi(d.result),p.oldVersion,p.newVersion,Xi(d.transaction),p)}),n&&d.addEventListener("blocked",p=>n(p.oldVersion,p.newVersion,p)),h.then(p=>{c&&p.addEventListener("close",()=>c()),o&&p.addEventListener("versionchange",g=>o(g.oldVersion,g.newVersion,g))}).catch(()=>{}),h}const DR=["get","getKey","getAll","getAllKeys","count"],IR=["put","add","delete","clear"],Of=new Map;function m_(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(Of.get(e))return Of.get(e);const n=e.replace(/FromIndex$/,""),s=e!==n,o=IR.includes(n);if(!(n in(s?IDBIndex:IDBObjectStore).prototype)||!(o||DR.includes(n)))return;const c=async function(d,...h){const p=this.transaction(d,o?"readwrite":"readonly");let g=p.store;return s&&(g=g.index(h.shift())),(await Promise.all([g[n](...h),o&&p.done]))[0]};return Of.set(e,c),c}RR(i=>({...i,get:(e,n,s)=>m_(e,n)||i.get(e,n,s),has:(e,n)=>!!m_(e,n)||i.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kR{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(MR(n)){const s=n.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(n=>n).join(" ")}}function MR(i){const e=i.getComponent();return(e==null?void 0:e.type)==="VERSION"}const vh="@firebase/app",v_="0.11.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mi=new cp("@firebase/app"),jR="@firebase/app-compat",LR="@firebase/analytics-compat",PR="@firebase/analytics",UR="@firebase/app-check-compat",zR="@firebase/app-check",HR="@firebase/auth",BR="@firebase/auth-compat",VR="@firebase/database",GR="@firebase/data-connect",$R="@firebase/database-compat",qR="@firebase/functions",YR="@firebase/functions-compat",FR="@firebase/installations",WR="@firebase/installations-compat",QR="@firebase/messaging",KR="@firebase/messaging-compat",XR="@firebase/performance",ZR="@firebase/performance-compat",JR="@firebase/remote-config",eN="@firebase/remote-config-compat",tN="@firebase/storage",nN="@firebase/storage-compat",iN="@firebase/firestore",rN="@firebase/vertexai",sN="@firebase/firestore-compat",aN="firebase",oN="11.6.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yh="[DEFAULT]",lN={[vh]:"fire-core",[jR]:"fire-core-compat",[PR]:"fire-analytics",[LR]:"fire-analytics-compat",[zR]:"fire-app-check",[UR]:"fire-app-check-compat",[HR]:"fire-auth",[BR]:"fire-auth-compat",[VR]:"fire-rtdb",[GR]:"fire-data-connect",[$R]:"fire-rtdb-compat",[qR]:"fire-fn",[YR]:"fire-fn-compat",[FR]:"fire-iid",[WR]:"fire-iid-compat",[QR]:"fire-fcm",[KR]:"fire-fcm-compat",[XR]:"fire-perf",[ZR]:"fire-perf-compat",[JR]:"fire-rc",[eN]:"fire-rc-compat",[tN]:"fire-gcs",[nN]:"fire-gcs-compat",[iN]:"fire-fst",[sN]:"fire-fst-compat",[rN]:"fire-vertex","fire-js":"fire-js",[aN]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cc=new Map,cN=new Map,_h=new Map;function y_(i,e){try{i.container.addComponent(e)}catch(n){mi.debug(`Component ${e.name} failed to register with FirebaseApp ${i.name}`,n)}}function Vs(i){const e=i.name;if(_h.has(e))return mi.debug(`There were multiple attempts to register component ${e}.`),!1;_h.set(e,i);for(const n of cc.values())y_(n,i);for(const n of cN.values())y_(n,i);return!0}function dp(i,e){const n=i.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),i.container.getProvider(e)}function Dn(i){return i==null?!1:i.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Zi=new wo("app","Firebase",uN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dN{constructor(e,n,s){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new jr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Zi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ks=oN;function e0(i,e={}){let n=i;typeof e!="object"&&(e={name:e});const s=Object.assign({name:yh,automaticDataCollectionEnabled:!1},e),o=s.name;if(typeof o!="string"||!o)throw Zi.create("bad-app-name",{appName:String(o)});if(n||(n=Wb()),!n)throw Zi.create("no-options");const c=cc.get(o);if(c){if(Mr(n,c.options)&&Mr(s,c.config))return c;throw Zi.create("duplicate-app",{appName:o})}const d=new vR(o);for(const p of _h.values())d.addComponent(p);const h=new dN(n,s,d);return cc.set(o,h),h}function t0(i=yh){const e=cc.get(i);if(!e&&i===yh&&Wb())return e0();if(!e)throw Zi.create("no-app",{appName:i});return e}function Ji(i,e,n){var s;let o=(s=lN[i])!==null&&s!==void 0?s:i;n&&(o+=`-${n}`);const c=o.match(/\s|\//),d=e.match(/\s|\//);if(c||d){const h=[`Unable to register library "${o}" with version "${e}":`];c&&h.push(`library name "${o}" contains illegal characters (whitespace or "/")`),c&&d&&h.push("and"),d&&h.push(`version name "${e}" contains illegal characters (whitespace or "/")`),mi.warn(h.join(" "));return}Vs(new jr(`${o}-version`,()=>({library:o,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fN="firebase-heartbeat-database",hN=1,ho="firebase-heartbeat-store";let Rf=null;function n0(){return Rf||(Rf=AR(fN,hN,{upgrade:(i,e)=>{switch(e){case 0:try{i.createObjectStore(ho)}catch(n){console.warn(n)}}}}).catch(i=>{throw Zi.create("idb-open",{originalErrorMessage:i.message})})),Rf}async function pN(i){try{const n=(await n0()).transaction(ho),s=await n.objectStore(ho).get(i0(i));return await n.done,s}catch(e){if(e instanceof lr)mi.warn(e.message);else{const n=Zi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});mi.warn(n.message)}}}async function __(i,e){try{const s=(await n0()).transaction(ho,"readwrite");await s.objectStore(ho).put(e,i0(i)),await s.done}catch(n){if(n instanceof lr)mi.warn(n.message);else{const s=Zi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});mi.warn(s.message)}}}function i0(i){return`${i.name}!${i.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gN=1024,mN=30;class vN{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new _N(n),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){var e,n;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),c=b_();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===c||this._heartbeatsCache.heartbeats.some(d=>d.date===c))return;if(this._heartbeatsCache.heartbeats.push({date:c,agent:o}),this._heartbeatsCache.heartbeats.length>mN){const d=bN(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(d,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(s){mi.warn(s)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=b_(),{heartbeatsToSend:s,unsentEntries:o}=yN(this._heartbeatsCache.heartbeats),c=ac(JSON.stringify({version:2,heartbeats:s}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),c}catch(n){return mi.warn(n),""}}}function b_(){return new Date().toISOString().substring(0,10)}function yN(i,e=gN){const n=[];let s=i.slice();for(const o of i){const c=n.find(d=>d.agent===o.agent);if(c){if(c.dates.push(o.date),E_(n)>e){c.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),E_(n)>e){n.pop();break}s=s.slice(1)}return{heartbeatsToSend:n,unsentEntries:s}}class _N{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return nR()?iR().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await pN(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return __(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const o=await this.read();return __(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:o.lastSentHeartbeatDate,heartbeats:[...o.heartbeats,...e.heartbeats]})}else return}}function E_(i){return ac(JSON.stringify({version:2,heartbeats:i})).length}function bN(i){if(i.length===0)return-1;let e=0,n=i[0].date;for(let s=1;s<i.length;s++)i[s].date<n&&(n=i[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EN(i){Vs(new jr("platform-logger",e=>new kR(e),"PRIVATE")),Vs(new jr("heartbeat",e=>new vN(e),"PRIVATE")),Ji(vh,v_,i),Ji(vh,v_,"esm2017"),Ji("fire-js","")}EN("");var S_={};const T_="@firebase/database",C_="1.0.14";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let r0="";function SN(i){r0=i}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TN{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),Tt(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:fo(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CN{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return bi(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s0=function(i){try{if(typeof window<"u"&&typeof window[i]<"u"){const e=window[i];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new TN(e)}}catch{}return new CN},Ar=s0("localStorage"),wN=s0("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const js=new cp("@firebase/database"),ON=function(){let i=1;return function(){return i++}}(),a0=function(i){const e=hR(i),n=new cR;n.update(e);const s=n.digest();return sp.encodeByteArray(s)},Oo=function(...i){let e="";for(let n=0;n<i.length;n++){const s=i[n];Array.isArray(s)||s&&typeof s=="object"&&typeof s.length=="number"?e+=Oo.apply(null,s):typeof s=="object"?e+=Tt(s):e+=s,e+=" "}return e};let ro=null,w_=!0;const RN=function(i,e){ie(!0,"Can't turn on custom loggers persistently."),js.logLevel=et.VERBOSE,ro=js.log.bind(js)},Ht=function(...i){if(w_===!0&&(w_=!1,ro===null&&wN.get("logging_enabled")===!0&&RN()),ro){const e=Oo.apply(null,i);ro(e)}},Ro=function(i){return function(...e){Ht(i,...e)}},bh=function(...i){const e="FIREBASE INTERNAL ERROR: "+Oo(...i);js.error(e)},vi=function(...i){const e=`FIREBASE FATAL ERROR: ${Oo(...i)}`;throw js.error(e),new Error(e)},tn=function(...i){const e="FIREBASE WARNING: "+Oo(...i);js.warn(e)},NN=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&tn("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},o0=function(i){return typeof i=="number"&&(i!==i||i===Number.POSITIVE_INFINITY||i===Number.NEGATIVE_INFINITY)},xN=function(i){if(document.readyState==="complete")i();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,i())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Gs="[MIN_NAME]",Lr="[MAX_NAME]",Xs=function(i,e){if(i===e)return 0;if(i===Gs||e===Lr)return-1;if(e===Gs||i===Lr)return 1;{const n=O_(i),s=O_(e);return n!==null?s!==null?n-s===0?i.length-e.length:n-s:-1:s!==null?1:i<e?-1:1}},AN=function(i,e){return i===e?0:i<e?-1:1},Za=function(i,e){if(e&&i in e)return e[i];throw new Error("Missing required key ("+i+") in object: "+Tt(e))},fp=function(i){if(typeof i!="object"||i===null)return Tt(i);const e=[];for(const s in i)e.push(s);e.sort();let n="{";for(let s=0;s<e.length;s++)s!==0&&(n+=","),n+=Tt(e[s]),n+=":",n+=fp(i[e[s]]);return n+="}",n},l0=function(i,e){const n=i.length;if(n<=e)return[i];const s=[];for(let o=0;o<n;o+=e)o+e>n?s.push(i.substring(o,n)):s.push(i.substring(o,o+e));return s};function nn(i,e){for(const n in i)i.hasOwnProperty(n)&&e(n,i[n])}const c0=function(i){ie(!o0(i),"Invalid JSON number");const e=11,n=52,s=(1<<e-1)-1;let o,c,d,h,p;i===0?(c=0,d=0,o=1/i===-1/0?1:0):(o=i<0,i=Math.abs(i),i>=Math.pow(2,1-s)?(h=Math.min(Math.floor(Math.log(i)/Math.LN2),s),c=h+s,d=Math.round(i*Math.pow(2,n-h)-Math.pow(2,n))):(c=0,d=Math.round(i/Math.pow(2,1-s-n))));const g=[];for(p=n;p;p-=1)g.push(d%2?1:0),d=Math.floor(d/2);for(p=e;p;p-=1)g.push(c%2?1:0),c=Math.floor(c/2);g.push(o?1:0),g.reverse();const _=g.join("");let b="";for(p=0;p<64;p+=8){let E=parseInt(_.substr(p,8),2).toString(16);E.length===1&&(E="0"+E),b=b+E}return b.toLowerCase()},DN=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},IN=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function kN(i,e){let n="Unknown Error";i==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":i==="permission_denied"?n="Client doesn't have permission to access the desired data.":i==="unavailable"&&(n="The service is unavailable");const s=new Error(i+" at "+e._path.toString()+": "+n);return s.code=i.toUpperCase(),s}const MN=new RegExp("^-?(0*)\\d{1,10}$"),jN=-2147483648,LN=2147483647,O_=function(i){if(MN.test(i)){const e=Number(i);if(e>=jN&&e<=LN)return e}return null},Zs=function(i){try{i()}catch(e){setTimeout(()=>{const n=e.stack||"";throw tn("Exception was thrown by user callback.",n),e},Math.floor(0))}},PN=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},so=function(i,e){const n=setTimeout(i,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UN{constructor(e,n){this.appCheckProvider=n,this.appName=e.name,Dn(e)&&e.settings.appCheckToken&&(this.serverAppAppCheckToken=e.settings.appCheckToken),this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(s=>this.appCheck=s)}getToken(e){if(this.serverAppAppCheckToken){if(e)throw new Error("Attempted reuse of `FirebaseServerApp.appCheckToken` after previous usage failed.");return Promise.resolve({token:this.serverAppAppCheckToken})}return this.appCheck?this.appCheck.getToken(e):new Promise((n,s)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,s):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(s=>s.addTokenListener(e))}notifyForInvalidToken(){tn(`Provided AppCheck credentials for the app named "${this.appName}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zN{constructor(e,n,s){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=s,this.auth_=null,this.auth_=s.getImmediate({optional:!0}),this.auth_||s.onInit(o=>this.auth_=o)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(Ht("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,s)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,s):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',tn(e)}}class Jl{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Jl.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hp="5",u0="v",d0="s",f0="r",h0="f",p0=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,g0="ls",m0="p",Eh="ac",v0="websocket",y0="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _0{constructor(e,n,s,o,c=!1,d="",h=!1,p=!1,g=null){this.secure=n,this.namespace=s,this.webSocketOnly=o,this.nodeAdmin=c,this.persistenceKey=d,this.includeNamespaceInQueryParams=h,this.isUsingEmulator=p,this.emulatorOptions=g,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Ar.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Ar.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function HN(i){return i.host!==i.internalHost||i.isCustomHost()||i.includeNamespaceInQueryParams}function b0(i,e,n){ie(typeof e=="string","typeof type must == string"),ie(typeof n=="object","typeof params must == object");let s;if(e===v0)s=(i.secure?"wss://":"ws://")+i.internalHost+"/.ws?";else if(e===y0)s=(i.secure?"https://":"http://")+i.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);HN(i)&&(n.ns=i.namespace);const o=[];return nn(n,(c,d)=>{o.push(c+"="+d)}),s+o.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BN{constructor(){this.counters_={}}incrementCounter(e,n=1){bi(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return $1(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nf={},xf={};function pp(i){const e=i.toString();return Nf[e]||(Nf[e]=new BN),Nf[e]}function VN(i,e){const n=i.toString();return xf[n]||(xf[n]=e()),xf[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GN{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const s=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let o=0;o<s.length;++o)s[o]&&Zs(()=>{this.onMessage_(s[o])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R_="start",$N="close",qN="pLPCommand",YN="pRTLPCB",E0="id",S0="pw",T0="ser",FN="cb",WN="seg",QN="ts",KN="d",XN="dframe",C0=1870,w0=30,ZN=C0-w0,JN=25e3,ex=3e4;class ks{constructor(e,n,s,o,c,d,h){this.connId=e,this.repoInfo=n,this.applicationId=s,this.appCheckToken=o,this.authToken=c,this.transportSessionId=d,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=Ro(e),this.stats_=pp(n),this.urlFn=p=>(this.appCheckToken&&(p[Eh]=this.appCheckToken),b0(n,y0,p))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new GN(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(ex)),xN(()=>{if(this.isClosed_)return;this.scriptTagHolder=new gp((...c)=>{const[d,h,p,g,_]=c;if(this.incrementIncomingBytes_(c),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,d===R_)this.id=h,this.password=p;else if(d===$N)h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+d)},(...c)=>{const[d,h]=c;this.incrementIncomingBytes_(c),this.myPacketOrderer.handleResponse(d,h)},()=>{this.onClosed_()},this.urlFn);const s={};s[R_]="t",s[T0]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(s[FN]=this.scriptTagHolder.uniqueCallbackIdentifier),s[u0]=hp,this.transportSessionId&&(s[d0]=this.transportSessionId),this.lastSessionId&&(s[g0]=this.lastSessionId),this.applicationId&&(s[m0]=this.applicationId),this.appCheckToken&&(s[Eh]=this.appCheckToken),typeof location<"u"&&location.hostname&&p0.test(location.hostname)&&(s[f0]=h0);const o=this.urlFn(s);this.log_("Connecting via long-poll to "+o),this.scriptTagHolder.addTag(o,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){ks.forceAllow_=!0}static forceDisallow(){ks.forceDisallow_=!0}static isAvailable(){return ks.forceAllow_?!0:!ks.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!DN()&&!IN()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=Tt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const s=qb(n),o=l0(s,ZN);for(let c=0;c<o.length;c++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,o.length,o[c]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const s={};s[XN]="t",s[E0]=e,s[S0]=n,this.myDisconnFrame.src=this.urlFn(s),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=Tt(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class gp{constructor(e,n,s,o){this.onDisconnect=s,this.urlFn=o,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=ON(),window[qN+this.uniqueCallbackIdentifier]=e,window[YN+this.uniqueCallbackIdentifier]=n,this.myIFrame=gp.createIFrame_();let c="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(c='<script>document.domain="'+document.domain+'";<\/script>');const d="<html><body>"+c+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(d),this.myIFrame.doc.close()}catch(h){Ht("frame writing exception"),h.stack&&Ht(h.stack),Ht(h)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||Ht("No IE domain setting required")}catch{const s=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+s+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[E0]=this.myID,e[S0]=this.myPW,e[T0]=this.currentSerial;let n=this.urlFn(e),s="",o=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+w0+s.length<=C0;){const d=this.pendingSegs.shift();s=s+"&"+WN+o+"="+d.seg+"&"+QN+o+"="+d.ts+"&"+KN+o+"="+d.d,o++}return n=n+s,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,s){this.pendingSegs.push({seg:e,ts:n,d:s}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const s=()=>{this.outstandingRequests.delete(n),this.newRequest_()},o=setTimeout(s,Math.floor(JN)),c=()=>{clearTimeout(o),s()};this.addTag(e,c)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const s=this.myIFrame.doc.createElement("script");s.type="text/javascript",s.async=!0,s.src=e,s.onload=s.onreadystatechange=function(){const o=s.readyState;(!o||o==="loaded"||o==="complete")&&(s.onload=s.onreadystatechange=null,s.parentNode&&s.parentNode.removeChild(s),n())},s.onerror=()=>{Ht("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(s)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tx=16384,nx=45e3;let uc=null;typeof MozWebSocket<"u"?uc=MozWebSocket:typeof WebSocket<"u"&&(uc=WebSocket);class In{constructor(e,n,s,o,c,d,h){this.connId=e,this.applicationId=s,this.appCheckToken=o,this.authToken=c,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=Ro(this.connId),this.stats_=pp(n),this.connURL=In.connectionURL_(n,d,h,o,s),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,s,o,c){const d={};return d[u0]=hp,typeof location<"u"&&location.hostname&&p0.test(location.hostname)&&(d[f0]=h0),n&&(d[d0]=n),s&&(d[g0]=s),o&&(d[Eh]=o),c&&(d[m0]=c),b0(e,v0,d)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Ar.set("previous_websocket_failure",!0);try{let s;tR(),this.mySock=new uc(this.connURL,[],s)}catch(s){this.log_("Error instantiating WebSocket.");const o=s.message||s.data;o&&this.log_(o),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=s=>{this.handleIncomingFrame(s)},this.mySock.onerror=s=>{this.log_("WebSocket error.  Closing connection.");const o=s.message||s.data;o&&this.log_(o),this.onClosed_()}}start(){}static forceDisallow(){In.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,s=navigator.userAgent.match(n);s&&s.length>1&&parseFloat(s[1])<4.4&&(e=!0)}return!e&&uc!==null&&!In.forceDisallow_}static previouslyFailed(){return Ar.isInMemoryStorage||Ar.get("previous_websocket_failure")===!0}markConnectionHealthy(){Ar.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const s=fo(n);this.onMessage(s)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(ie(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const s=this.extractFrameCount_(n);s!==null&&this.appendFrame_(s)}}send(e){this.resetKeepAlive();const n=Tt(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const s=l0(n,tx);s.length>1&&this.sendString_(String(s.length));for(let o=0;o<s.length;o++)this.sendString_(s[o])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(nx))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}In.responsesRequiredToBeHealthy=2;In.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class po{static get ALL_TRANSPORTS(){return[ks,In]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}constructor(e){this.initTransports_(e)}initTransports_(e){const n=In&&In.isAvailable();let s=n&&!In.previouslyFailed();if(e.webSocketOnly&&(n||tn("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),s=!0),s)this.transports_=[In];else{const o=this.transports_=[];for(const c of po.ALL_TRANSPORTS)c&&c.isAvailable()&&o.push(c);po.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}po.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ix=6e4,rx=5e3,sx=10*1024,ax=100*1024,Af="t",N_="d",ox="s",x_="r",lx="e",A_="o",D_="a",I_="n",k_="p",cx="h";class ux{constructor(e,n,s,o,c,d,h,p,g,_){this.id=e,this.repoInfo_=n,this.applicationId_=s,this.appCheckToken_=o,this.authToken_=c,this.onMessage_=d,this.onReady_=h,this.onDisconnect_=p,this.onKill_=g,this.lastSessionId=_,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=Ro("c:"+this.id+":"),this.transportManager_=new po(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),s=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,s)},Math.floor(0));const o=e.healthyTimeout||0;o>0&&(this.healthyTimeout_=so(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>ax?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>sx?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(o)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Af in e){const n=e[Af];n===D_?this.upgradeIfSecondaryHealthy_():n===x_?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===A_&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=Za("t",e),s=Za("d",e);if(n==="c")this.onSecondaryControl_(s);else if(n==="d")this.pendingDataMessages.push(s);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:k_,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:D_,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:I_,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=Za("t",e),s=Za("d",e);n==="c"?this.onControl_(s):n==="d"&&this.onDataMessage_(s)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=Za(Af,e);if(N_ in e){const s=e[N_];if(n===cx){const o=Object.assign({},s);this.repoInfo_.isUsingEmulator&&(o.h=this.repoInfo_.host),this.onHandshake_(o)}else if(n===I_){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let o=0;o<this.pendingDataMessages.length;++o)this.onDataMessage_(this.pendingDataMessages[o]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===ox?this.onConnectionShutdown_(s):n===x_?this.onReset_(s):n===lx?bh("Server Error: "+s):n===A_?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):bh("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,s=e.v,o=e.h;this.sessionId=e.s,this.repoInfo_.host=o,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),hp!==s&&tn("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),s=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,s),so(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(ix))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):so(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(rx))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:k_,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Ar.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O0{put(e,n,s,o){}merge(e,n,s,o){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,s){}onDisconnectMerge(e,n,s){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R0{constructor(e){this.allowedEvents_=e,this.listeners_={},ie(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const s=[...this.listeners_[e]];for(let o=0;o<s.length;o++)s[o].callback.apply(s[o].context,n)}}on(e,n,s){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:s});const o=this.getInitialEvent(e);o&&n.apply(s,o)}off(e,n,s){this.validateEventType_(e);const o=this.listeners_[e]||[];for(let c=0;c<o.length;c++)if(o[c].callback===n&&(!s||s===o[c].context)){o.splice(c,1);return}}validateEventType_(e){ie(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dc extends R0{static getInstance(){return new dc}constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!op()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}getInitialEvent(e){return ie(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M_=32,j_=768;class it{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let s=0;for(let o=0;o<this.pieces_.length;o++)this.pieces_[o].length>0&&(this.pieces_[s]=this.pieces_[o],s++);this.pieces_.length=s,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function qe(){return new it("")}function Me(i){return i.pieceNum_>=i.pieces_.length?null:i.pieces_[i.pieceNum_]}function rr(i){return i.pieces_.length-i.pieceNum_}function at(i){let e=i.pieceNum_;return e<i.pieces_.length&&e++,new it(i.pieces_,e)}function N0(i){return i.pieceNum_<i.pieces_.length?i.pieces_[i.pieces_.length-1]:null}function dx(i){let e="";for(let n=i.pieceNum_;n<i.pieces_.length;n++)i.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(i.pieces_[n])));return e||"/"}function x0(i,e=0){return i.pieces_.slice(i.pieceNum_+e)}function A0(i){if(i.pieceNum_>=i.pieces_.length)return null;const e=[];for(let n=i.pieceNum_;n<i.pieces_.length-1;n++)e.push(i.pieces_[n]);return new it(e,0)}function Ct(i,e){const n=[];for(let s=i.pieceNum_;s<i.pieces_.length;s++)n.push(i.pieces_[s]);if(e instanceof it)for(let s=e.pieceNum_;s<e.pieces_.length;s++)n.push(e.pieces_[s]);else{const s=e.split("/");for(let o=0;o<s.length;o++)s[o].length>0&&n.push(s[o])}return new it(n,0)}function ze(i){return i.pieceNum_>=i.pieces_.length}function qt(i,e){const n=Me(i),s=Me(e);if(n===null)return e;if(n===s)return qt(at(i),at(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+i+")")}function mp(i,e){if(rr(i)!==rr(e))return!1;for(let n=i.pieceNum_,s=e.pieceNum_;n<=i.pieces_.length;n++,s++)if(i.pieces_[n]!==e.pieces_[s])return!1;return!0}function Mn(i,e){let n=i.pieceNum_,s=e.pieceNum_;if(rr(i)>rr(e))return!1;for(;n<i.pieces_.length;){if(i.pieces_[n]!==e.pieces_[s])return!1;++n,++s}return!0}class fx{constructor(e,n){this.errorPrefix_=n,this.parts_=x0(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let s=0;s<this.parts_.length;s++)this.byteLength_+=zc(this.parts_[s]);D0(this)}}function hx(i,e){i.parts_.length>0&&(i.byteLength_+=1),i.parts_.push(e),i.byteLength_+=zc(e),D0(i)}function px(i){const e=i.parts_.pop();i.byteLength_-=zc(e),i.parts_.length>0&&(i.byteLength_-=1)}function D0(i){if(i.byteLength_>j_)throw new Error(i.errorPrefix_+"has a key path longer than "+j_+" bytes ("+i.byteLength_+").");if(i.parts_.length>M_)throw new Error(i.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+M_+") or object contains a cycle "+Nr(i))}function Nr(i){return i.parts_.length===0?"":"in property '"+i.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vp extends R0{static getInstance(){return new vp}constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const s=!document[e];s!==this.visible_&&(this.visible_=s,this.trigger("visible",s))},!1)}getInitialEvent(e){return ie(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ja=1e3,gx=60*5*1e3,L_=30*1e3,mx=1.3,vx=3e4,yx="server_kill",P_=3;class gi extends O0{constructor(e,n,s,o,c,d,h,p){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=s,this.onConnectStatus_=o,this.onServerInfoUpdate_=c,this.authTokenProvider_=d,this.appCheckTokenProvider_=h,this.authOverride_=p,this.id=gi.nextPersistentConnectionId_++,this.log_=Ro("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Ja,this.maxReconnectDelay_=gx,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,p)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");vp.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&dc.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,s){const o=++this.requestNumber_,c={r:o,a:e,b:n};this.log_(Tt(c)),ie(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(c),s&&(this.requestCBHash_[o]=s)}get(e){this.initConnection_();const n=new Uc,o={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:d=>{const h=d.d;d.s==="ok"?n.resolve(h):n.reject(h)}};this.outstandingGets_.push(o),this.outstandingGetCount_++;const c=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(c),n.promise}listen(e,n,s,o){this.initConnection_();const c=e._queryIdentifier,d=e._path.toString();this.log_("Listen called for "+d+" "+c),this.listens.has(d)||this.listens.set(d,new Map),ie(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),ie(!this.listens.get(d).has(c),"listen() called twice for same path/queryId.");const h={onComplete:o,hashFn:n,query:e,tag:s};this.listens.get(d).set(c,h),this.connected_&&this.sendListen_(h)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,s=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(s)})}sendListen_(e){const n=e.query,s=n._path.toString(),o=n._queryIdentifier;this.log_("Listen on "+s+" for "+o);const c={p:s},d="q";e.tag&&(c.q=n._queryObject,c.t=e.tag),c.h=e.hashFn(),this.sendRequest(d,c,h=>{const p=h.d,g=h.s;gi.warnOnListenWarnings_(p,n),(this.listens.get(s)&&this.listens.get(s).get(o))===e&&(this.log_("listen response",h),g!=="ok"&&this.removeListen_(s,o),e.onComplete&&e.onComplete(g,p))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&bi(e,"w")){const s=Bs(e,"w");if(Array.isArray(s)&&~s.indexOf("no_index")){const o='".indexOn": "'+n._queryParams.getIndex().toString()+'"',c=n._path.toString();tn(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${o} at ${c} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||lR(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=L_)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=oR(e)?"auth":"gauth",s={cred:e};this.authOverride_===null?s.noauth=!0:typeof this.authOverride_=="object"&&(s.authvar=this.authOverride_),this.sendRequest(n,s,o=>{const c=o.s,d=o.d||"error";this.authToken_===e&&(c==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(c,d))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,s=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,s)})}unlisten(e,n){const s=e._path.toString(),o=e._queryIdentifier;this.log_("Unlisten called for "+s+" "+o),ie(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(s,o)&&this.connected_&&this.sendUnlisten_(s,o,e._queryObject,n)}sendUnlisten_(e,n,s,o){this.log_("Unlisten on "+e+" for "+n);const c={p:e},d="n";o&&(c.q=s,c.t=o),this.sendRequest(d,c)}onDisconnectPut(e,n,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,s):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:s})}onDisconnectMerge(e,n,s){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,s):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:s})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,s,o){const c={p:n,d:s};this.log_("onDisconnect "+e,c),this.sendRequest(e,c,d=>{o&&setTimeout(()=>{o(d.s,d.d)},Math.floor(0))})}put(e,n,s,o){this.putInternal("p",e,n,s,o)}merge(e,n,s,o){this.putInternal("m",e,n,s,o)}putInternal(e,n,s,o,c){this.initConnection_();const d={p:n,d:s};c!==void 0&&(d.h=c),this.outstandingPuts_.push({action:e,request:d,onComplete:o}),this.outstandingPutCount_++;const h=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(h):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,s=this.outstandingPuts_[e].request,o=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,s,c=>{this.log_(n+" response",c),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),o&&o(c.s,c.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,s=>{if(s.s!=="ok"){const c=s.d;this.log_("reportStats","Error sending stats: "+c)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Tt(e));const n=e.r,s=this.requestCBHash_[n];s&&(delete this.requestCBHash_[n],s(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):bh("Unrecognized action received from server: "+Tt(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){ie(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Ja,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Ja,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>vx&&(this.reconnectDelay_=Ja),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=Math.max(0,new Date().getTime()-this.lastConnectionAttemptTime_);let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*mx)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),s=this.onRealtimeDisconnect_.bind(this),o=this.id+":"+gi.nextConnectionId_++,c=this.lastSessionId;let d=!1,h=null;const p=function(){h?h.close():(d=!0,s())},g=function(b){ie(h,"sendRequest call when we're not connected not allowed."),h.sendRequest(b)};this.realtime_={close:p,sendRequest:g};const _=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[b,E]=await Promise.all([this.authTokenProvider_.getToken(_),this.appCheckTokenProvider_.getToken(_)]);d?Ht("getToken() completed but was canceled"):(Ht("getToken() completed. Creating connection."),this.authToken_=b&&b.accessToken,this.appCheckToken_=E&&E.token,h=new ux(o,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,s,O=>{tn(O+" ("+this.repoInfo_.toString()+")"),this.interrupt(yx)},c))}catch(b){this.log_("Failed to get token: "+b),d||(this.repoInfo_.nodeAdmin&&tn(b),p())}}}interrupt(e){Ht("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){Ht("Resuming connection for reason: "+e),delete this.interruptReasons_[e],ph(this.interruptReasons_)&&(this.reconnectDelay_=Ja,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let s;n?s=n.map(c=>fp(c)).join("$"):s="default";const o=this.removeListen_(e,s);o&&o.onComplete&&o.onComplete("permission_denied")}removeListen_(e,n){const s=new it(e).toString();let o;if(this.listens.has(s)){const c=this.listens.get(s);o=c.get(n),c.delete(n),c.size===0&&this.listens.delete(s)}else o=void 0;return o}onAuthRevoked_(e,n){Ht("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=P_&&(this.reconnectDelay_=L_,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){Ht("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=P_&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+r0.replace(/\./g,"-")]=1,op()?e["framework.cordova"]=1:Kb()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=dc.getInstance().currentlyOnline();return ph(this.interruptReasons_)&&e}}gi.nextPersistentConnectionId_=0;gi.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class je{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new je(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const s=new je(Gs,e),o=new je(Gs,n);return this.compare(s,o)!==0}minPost(){return je.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wl;class I0 extends Hc{static get __EMPTY_NODE(){return Wl}static set __EMPTY_NODE(e){Wl=e}compare(e,n){return Xs(e.name,n.name)}isDefinedOn(e){throw Ws("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return je.MIN}maxPost(){return new je(Lr,Wl)}makePost(e,n){return ie(typeof e=="string","KeyIndex indexValue must always be a string."),new je(e,Wl)}toString(){return".key"}}const Ls=new I0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ql{constructor(e,n,s,o,c=null){this.isReverse_=o,this.resultGenerator_=c,this.nodeStack_=[];let d=1;for(;!e.isEmpty();)if(e=e,d=n?s(e.key,n):1,o&&(d*=-1),d<0)this.isReverse_?e=e.left:e=e.right;else if(d===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class It{constructor(e,n,s,o,c){this.key=e,this.value=n,this.color=s??It.RED,this.left=o??en.EMPTY_NODE,this.right=c??en.EMPTY_NODE}copy(e,n,s,o,c){return new It(e??this.key,n??this.value,s??this.color,o??this.left,c??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,s){let o=this;const c=s(e,o.key);return c<0?o=o.copy(null,null,null,o.left.insert(e,n,s),null):c===0?o=o.copy(null,n,null,null,null):o=o.copy(null,null,null,null,o.right.insert(e,n,s)),o.fixUp_()}removeMin_(){if(this.left.isEmpty())return en.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let s,o;if(s=this,n(e,s.key)<0)!s.left.isEmpty()&&!s.left.isRed_()&&!s.left.left.isRed_()&&(s=s.moveRedLeft_()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed_()&&(s=s.rotateRight_()),!s.right.isEmpty()&&!s.right.isRed_()&&!s.right.left.isRed_()&&(s=s.moveRedRight_()),n(e,s.key)===0){if(s.right.isEmpty())return en.EMPTY_NODE;o=s.right.min_(),s=s.copy(o.key,o.value,null,null,s.right.removeMin_())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,It.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,It.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}It.RED=!0;It.BLACK=!1;class _x{copy(e,n,s,o,c){return this}insert(e,n,s){return new It(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class en{constructor(e,n=en.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new en(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,It.BLACK,null,null))}remove(e){return new en(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,It.BLACK,null,null))}get(e){let n,s=this.root_;for(;!s.isEmpty();){if(n=this.comparator_(e,s.key),n===0)return s.value;n<0?s=s.left:n>0&&(s=s.right)}return null}getPredecessorKey(e){let n,s=this.root_,o=null;for(;!s.isEmpty();)if(n=this.comparator_(e,s.key),n===0){if(s.left.isEmpty())return o?o.key:null;for(s=s.left;!s.right.isEmpty();)s=s.right;return s.key}else n<0?s=s.left:n>0&&(o=s,s=s.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Ql(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Ql(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Ql(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Ql(this.root_,null,this.comparator_,!0,e)}}en.EMPTY_NODE=new _x;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bx(i,e){return Xs(i.name,e.name)}function yp(i,e){return Xs(i,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sh;function Ex(i){Sh=i}const k0=function(i){return typeof i=="number"?"number:"+c0(i):"string:"+i},M0=function(i){if(i.isLeafNode()){const e=i.val();ie(typeof e=="string"||typeof e=="number"||typeof e=="object"&&bi(e,".sv"),"Priority must be a string or number.")}else ie(i===Sh||i.isEmpty(),"priority of unexpected type.");ie(i===Sh||i.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let U_;class Dt{static set __childrenNodeConstructor(e){U_=e}static get __childrenNodeConstructor(){return U_}constructor(e,n=Dt.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,ie(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),M0(this.priorityNode_)}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new Dt(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:Dt.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return ze(e)?this:Me(e)===".priority"?this.priorityNode_:Dt.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:Dt.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const s=Me(e);return s===null?n:n.isEmpty()&&s!==".priority"?this:(ie(s!==".priority"||rr(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(s,Dt.__childrenNodeConstructor.EMPTY_NODE.updateChild(at(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+k0(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=c0(this.value_):e+=this.value_,this.lazyHash_=a0(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===Dt.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof Dt.__childrenNodeConstructor?-1:(ie(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,s=typeof this.value_,o=Dt.VALUE_TYPE_ORDER.indexOf(n),c=Dt.VALUE_TYPE_ORDER.indexOf(s);return ie(o>=0,"Unknown leaf type: "+n),ie(c>=0,"Unknown leaf type: "+s),o===c?s==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:c-o}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}Dt.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let j0,L0;function Sx(i){j0=i}function Tx(i){L0=i}class Cx extends Hc{compare(e,n){const s=e.node.getPriority(),o=n.node.getPriority(),c=s.compareTo(o);return c===0?Xs(e.name,n.name):c}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return je.MIN}maxPost(){return new je(Lr,new Dt("[PRIORITY-POST]",L0))}makePost(e,n){const s=j0(e);return new je(n,new Dt("[PRIORITY-POST]",s))}toString(){return".priority"}}const ht=new Cx;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wx=Math.log(2);class Ox{constructor(e){const n=c=>parseInt(Math.log(c)/wx,10),s=c=>parseInt(Array(c+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const o=s(this.count);this.bits_=e+1&o}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const fc=function(i,e,n,s){i.sort(e);const o=function(p,g){const _=g-p;let b,E;if(_===0)return null;if(_===1)return b=i[p],E=n?n(b):b,new It(E,b.node,It.BLACK,null,null);{const O=parseInt(_/2,10)+p,C=o(p,O),P=o(O+1,g);return b=i[O],E=n?n(b):b,new It(E,b.node,It.BLACK,C,P)}},c=function(p){let g=null,_=null,b=i.length;const E=function(C,P){const N=b-C,U=b;b-=C;const F=o(N+1,U),te=i[N],K=n?n(te):te;O(new It(K,te.node,P,null,F))},O=function(C){g?(g.left=C,g=C):(_=C,g=C)};for(let C=0;C<p.count;++C){const P=p.nextBitIsOne(),N=Math.pow(2,p.count-(C+1));P?E(N,It.BLACK):(E(N,It.BLACK),E(N,It.RED))}return _},d=new Ox(i.length),h=c(d);return new en(s||e,h)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Df;const Is={};class fi{static get Default(){return ie(Is&&ht,"ChildrenNode.ts has not been loaded"),Df=Df||new fi({".priority":Is},{".priority":ht}),Df}constructor(e,n){this.indexes_=e,this.indexSet_=n}get(e){const n=Bs(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof en?n:null}hasIndex(e){return bi(this.indexSet_,e.toString())}addIndex(e,n){ie(e!==Ls,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const s=[];let o=!1;const c=n.getIterator(je.Wrap);let d=c.getNext();for(;d;)o=o||e.isDefinedOn(d.node),s.push(d),d=c.getNext();let h;o?h=fc(s,e.getCompare()):h=Is;const p=e.toString(),g=Object.assign({},this.indexSet_);g[p]=e;const _=Object.assign({},this.indexes_);return _[p]=h,new fi(_,g)}addToIndexes(e,n){const s=lc(this.indexes_,(o,c)=>{const d=Bs(this.indexSet_,c);if(ie(d,"Missing index implementation for "+c),o===Is)if(d.isDefinedOn(e.node)){const h=[],p=n.getIterator(je.Wrap);let g=p.getNext();for(;g;)g.name!==e.name&&h.push(g),g=p.getNext();return h.push(e),fc(h,d.getCompare())}else return Is;else{const h=n.get(e.name);let p=o;return h&&(p=p.remove(new je(e.name,h))),p.insert(e,e.node)}});return new fi(s,this.indexSet_)}removeFromIndexes(e,n){const s=lc(this.indexes_,o=>{if(o===Is)return o;{const c=n.get(e.name);return c?o.remove(new je(e.name,c)):o}});return new fi(s,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eo;class ye{static get EMPTY_NODE(){return eo||(eo=new ye(new en(yp),null,fi.Default))}constructor(e,n,s){this.children_=e,this.priorityNode_=n,this.indexMap_=s,this.lazyHash_=null,this.priorityNode_&&M0(this.priorityNode_),this.children_.isEmpty()&&ie(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}isLeafNode(){return!1}getPriority(){return this.priorityNode_||eo}updatePriority(e){return this.children_.isEmpty()?this:new ye(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?eo:n}}getChild(e){const n=Me(e);return n===null?this:this.getImmediateChild(n).getChild(at(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(ie(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const s=new je(e,n);let o,c;n.isEmpty()?(o=this.children_.remove(e),c=this.indexMap_.removeFromIndexes(s,this.children_)):(o=this.children_.insert(e,n),c=this.indexMap_.addToIndexes(s,this.children_));const d=o.isEmpty()?eo:this.priorityNode_;return new ye(o,d,c)}}updateChild(e,n){const s=Me(e);if(s===null)return n;{ie(Me(e)!==".priority"||rr(e)===1,".priority must be the last token in a path");const o=this.getImmediateChild(s).updateChild(at(e),n);return this.updateImmediateChild(s,o)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let s=0,o=0,c=!0;if(this.forEachChild(ht,(d,h)=>{n[d]=h.val(e),s++,c&&ye.INTEGER_REGEXP_.test(d)?o=Math.max(o,Number(d)):c=!1}),!e&&c&&o<2*s){const d=[];for(const h in n)d[h]=n[h];return d}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+k0(this.getPriority().val())+":"),this.forEachChild(ht,(n,s)=>{const o=s.hash();o!==""&&(e+=":"+n+":"+o)}),this.lazyHash_=e===""?"":a0(e)}return this.lazyHash_}getPredecessorChildName(e,n,s){const o=this.resolveIndex_(s);if(o){const c=o.getPredecessorKey(new je(e,n));return c?c.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const s=n.minKey();return s&&s.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new je(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const s=n.maxKey();return s&&s.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new je(n,this.children_.get(n)):null}forEachChild(e,n){const s=this.resolveIndex_(e);return s?s.inorderTraversal(o=>n(o.name,o.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const s=this.resolveIndex_(n);if(s)return s.getIteratorFrom(e,o=>o);{const o=this.children_.getIteratorFrom(e.name,je.Wrap);let c=o.peek();for(;c!=null&&n.compare(c,e)<0;)o.getNext(),c=o.peek();return o}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const s=this.resolveIndex_(n);if(s)return s.getReverseIteratorFrom(e,o=>o);{const o=this.children_.getReverseIteratorFrom(e.name,je.Wrap);let c=o.peek();for(;c!=null&&n.compare(c,e)>0;)o.getNext(),c=o.peek();return o}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===No?-1:0}withIndex(e){if(e===Ls||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new ye(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===Ls||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const s=this.getIterator(ht),o=n.getIterator(ht);let c=s.getNext(),d=o.getNext();for(;c&&d;){if(c.name!==d.name||!c.node.equals(d.node))return!1;c=s.getNext(),d=o.getNext()}return c===null&&d===null}else return!1;else return!1}}resolveIndex_(e){return e===Ls?null:this.indexMap_.get(e.toString())}}ye.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class Rx extends ye{constructor(){super(new en(yp),ye.EMPTY_NODE,fi.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return ye.EMPTY_NODE}isEmpty(){return!1}}const No=new Rx;Object.defineProperties(je,{MIN:{value:new je(Gs,ye.EMPTY_NODE)},MAX:{value:new je(Lr,No)}});I0.__EMPTY_NODE=ye.EMPTY_NODE;Dt.__childrenNodeConstructor=ye;Ex(No);Tx(No);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nx=!0;function kt(i,e=null){if(i===null)return ye.EMPTY_NODE;if(typeof i=="object"&&".priority"in i&&(e=i[".priority"]),ie(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof i=="object"&&".value"in i&&i[".value"]!==null&&(i=i[".value"]),typeof i!="object"||".sv"in i){const n=i;return new Dt(n,kt(e))}if(!(i instanceof Array)&&Nx){const n=[];let s=!1;if(nn(i,(d,h)=>{if(d.substring(0,1)!=="."){const p=kt(h);p.isEmpty()||(s=s||!p.getPriority().isEmpty(),n.push(new je(d,p)))}}),n.length===0)return ye.EMPTY_NODE;const c=fc(n,bx,d=>d.name,yp);if(s){const d=fc(n,ht.getCompare());return new ye(c,kt(e),new fi({".priority":d},{".priority":ht}))}else return new ye(c,kt(e),fi.Default)}else{let n=ye.EMPTY_NODE;return nn(i,(s,o)=>{if(bi(i,s)&&s.substring(0,1)!=="."){const c=kt(o);(c.isLeafNode()||!c.isEmpty())&&(n=n.updateImmediateChild(s,c))}}),n.updatePriority(kt(e))}}Sx(kt);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xx extends Hc{constructor(e){super(),this.indexPath_=e,ie(!ze(e)&&Me(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const s=this.extractChild(e.node),o=this.extractChild(n.node),c=s.compareTo(o);return c===0?Xs(e.name,n.name):c}makePost(e,n){const s=kt(e),o=ye.EMPTY_NODE.updateChild(this.indexPath_,s);return new je(n,o)}maxPost(){const e=ye.EMPTY_NODE.updateChild(this.indexPath_,No);return new je(Lr,e)}toString(){return x0(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ax extends Hc{compare(e,n){const s=e.node.compareTo(n.node);return s===0?Xs(e.name,n.name):s}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return je.MIN}maxPost(){return je.MAX}makePost(e,n){const s=kt(e);return new je(n,s)}toString(){return".value"}}const Dx=new Ax;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P0(i){return{type:"value",snapshotNode:i}}function $s(i,e){return{type:"child_added",snapshotNode:e,childName:i}}function go(i,e){return{type:"child_removed",snapshotNode:e,childName:i}}function mo(i,e,n){return{type:"child_changed",snapshotNode:e,childName:i,oldSnap:n}}function Ix(i,e){return{type:"child_moved",snapshotNode:e,childName:i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _p{constructor(e){this.index_=e}updateChild(e,n,s,o,c,d){ie(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const h=e.getImmediateChild(n);return h.getChild(o).equals(s.getChild(o))&&h.isEmpty()===s.isEmpty()||(d!=null&&(s.isEmpty()?e.hasChild(n)?d.trackChildChange(go(n,h)):ie(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):h.isEmpty()?d.trackChildChange($s(n,s)):d.trackChildChange(mo(n,s,h))),e.isLeafNode()&&s.isEmpty())?e:e.updateImmediateChild(n,s).withIndex(this.index_)}updateFullNode(e,n,s){return s!=null&&(e.isLeafNode()||e.forEachChild(ht,(o,c)=>{n.hasChild(o)||s.trackChildChange(go(o,c))}),n.isLeafNode()||n.forEachChild(ht,(o,c)=>{if(e.hasChild(o)){const d=e.getImmediateChild(o);d.equals(c)||s.trackChildChange(mo(o,c,d))}else s.trackChildChange($s(o,c))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?ye.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vo{constructor(e){this.indexedFilter_=new _p(e.getIndex()),this.index_=e.getIndex(),this.startPost_=vo.getStartPost_(e),this.endPost_=vo.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,s=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&s}updateChild(e,n,s,o,c,d){return this.matches(new je(n,s))||(s=ye.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,s,o,c,d)}updateFullNode(e,n,s){n.isLeafNode()&&(n=ye.EMPTY_NODE);let o=n.withIndex(this.index_);o=o.updatePriority(ye.EMPTY_NODE);const c=this;return n.forEachChild(ht,(d,h)=>{c.matches(new je(d,h))||(o=o.updateImmediateChild(d,ye.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,o,s)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kx{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const s=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?s<=0:s<0},this.withinEndPost=n=>{const s=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?s<=0:s<0},this.rangedFilter_=new vo(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,s,o,c,d){return this.rangedFilter_.matches(new je(n,s))||(s=ye.EMPTY_NODE),e.getImmediateChild(n).equals(s)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,s,o,c,d):this.fullLimitUpdateChild_(e,n,s,c,d)}updateFullNode(e,n,s){let o;if(n.isLeafNode()||n.isEmpty())o=ye.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){o=ye.EMPTY_NODE.withIndex(this.index_);let c;this.reverse_?c=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):c=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let d=0;for(;c.hasNext()&&d<this.limit_;){const h=c.getNext();if(this.withinDirectionalStart(h))if(this.withinDirectionalEnd(h))o=o.updateImmediateChild(h.name,h.node),d++;else break;else continue}}else{o=n.withIndex(this.index_),o=o.updatePriority(ye.EMPTY_NODE);let c;this.reverse_?c=o.getReverseIterator(this.index_):c=o.getIterator(this.index_);let d=0;for(;c.hasNext();){const h=c.getNext();d<this.limit_&&this.withinDirectionalStart(h)&&this.withinDirectionalEnd(h)?d++:o=o.updateImmediateChild(h.name,ye.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,o,s)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,s,o,c){let d;if(this.reverse_){const b=this.index_.getCompare();d=(E,O)=>b(O,E)}else d=this.index_.getCompare();const h=e;ie(h.numChildren()===this.limit_,"");const p=new je(n,s),g=this.reverse_?h.getFirstChild(this.index_):h.getLastChild(this.index_),_=this.rangedFilter_.matches(p);if(h.hasChild(n)){const b=h.getImmediateChild(n);let E=o.getChildAfterChild(this.index_,g,this.reverse_);for(;E!=null&&(E.name===n||h.hasChild(E.name));)E=o.getChildAfterChild(this.index_,E,this.reverse_);const O=E==null?1:d(E,p);if(_&&!s.isEmpty()&&O>=0)return c!=null&&c.trackChildChange(mo(n,s,b)),h.updateImmediateChild(n,s);{c!=null&&c.trackChildChange(go(n,b));const P=h.updateImmediateChild(n,ye.EMPTY_NODE);return E!=null&&this.rangedFilter_.matches(E)?(c!=null&&c.trackChildChange($s(E.name,E.node)),P.updateImmediateChild(E.name,E.node)):P}}else return s.isEmpty()?e:_&&d(g,p)>=0?(c!=null&&(c.trackChildChange(go(g.name,g.node)),c.trackChildChange($s(n,s))),h.updateImmediateChild(n,s).updateImmediateChild(g.name,ye.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bp{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ht}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return ie(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return ie(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Gs}hasEnd(){return this.endSet_}getIndexEndValue(){return ie(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return ie(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Lr}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return ie(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ht}copy(){const e=new bp;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Mx(i){return i.loadsAllData()?new _p(i.getIndex()):i.hasLimit()?new kx(i):new vo(i)}function z_(i){const e={};if(i.isDefault())return e;let n;if(i.index_===ht?n="$priority":i.index_===Dx?n="$value":i.index_===Ls?n="$key":(ie(i.index_ instanceof xx,"Unrecognized index type!"),n=i.index_.toString()),e.orderBy=Tt(n),i.startSet_){const s=i.startAfterSet_?"startAfter":"startAt";e[s]=Tt(i.indexStartValue_),i.startNameSet_&&(e[s]+=","+Tt(i.indexStartName_))}if(i.endSet_){const s=i.endBeforeSet_?"endBefore":"endAt";e[s]=Tt(i.indexEndValue_),i.endNameSet_&&(e[s]+=","+Tt(i.indexEndName_))}return i.limitSet_&&(i.isViewFromLeft()?e.limitToFirst=i.limit_:e.limitToLast=i.limit_),e}function H_(i){const e={};if(i.startSet_&&(e.sp=i.indexStartValue_,i.startNameSet_&&(e.sn=i.indexStartName_),e.sin=!i.startAfterSet_),i.endSet_&&(e.ep=i.indexEndValue_,i.endNameSet_&&(e.en=i.indexEndName_),e.ein=!i.endBeforeSet_),i.limitSet_){e.l=i.limit_;let n=i.viewFrom_;n===""&&(i.isViewFromLeft()?n="l":n="r"),e.vf=n}return i.index_!==ht&&(e.i=i.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hc extends O0{reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(ie(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}constructor(e,n,s,o){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=s,this.appCheckTokenProvider_=o,this.log_=Ro("p:rest:"),this.listens_={}}listen(e,n,s,o){const c=e._path.toString();this.log_("Listen called for "+c+" "+e._queryIdentifier);const d=hc.getListenId_(e,s),h={};this.listens_[d]=h;const p=z_(e._queryParams);this.restRequest_(c+".json",p,(g,_)=>{let b=_;if(g===404&&(b=null,g=null),g===null&&this.onDataUpdate_(c,b,!1,s),Bs(this.listens_,d)===h){let E;g?g===401?E="permission_denied":E="rest_error:"+g:E="ok",o(E,null)}})}unlisten(e,n){const s=hc.getListenId_(e,n);delete this.listens_[s]}get(e){const n=z_(e._queryParams),s=e._path.toString(),o=new Uc;return this.restRequest_(s+".json",n,(c,d)=>{let h=d;c===404&&(h=null,c=null),c===null?(this.onDataUpdate_(s,h,!1,null),o.resolve(h)):o.reject(new Error(h))}),o.promise}refreshAuthToken(e){}restRequest_(e,n={},s){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([o,c])=>{o&&o.accessToken&&(n.auth=o.accessToken),c&&c.token&&(n.ac=c.token);const d=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Qs(n);this.log_("Sending REST request for "+d);const h=new XMLHttpRequest;h.onreadystatechange=()=>{if(s&&h.readyState===4){this.log_("REST Response for "+d+" received. status:",h.status,"response:",h.responseText);let p=null;if(h.status>=200&&h.status<300){try{p=fo(h.responseText)}catch{tn("Failed to parse JSON response for "+d+": "+h.responseText)}s(null,p)}else h.status!==401&&h.status!==404&&tn("Got unsuccessful REST response for "+d+" Status: "+h.status),s(h.status);s=null}},h.open("GET",d,!0),h.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jx{constructor(){this.rootNode_=ye.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pc(){return{value:null,children:new Map}}function U0(i,e,n){if(ze(e))i.value=n,i.children.clear();else if(i.value!==null)i.value=i.value.updateChild(e,n);else{const s=Me(e);i.children.has(s)||i.children.set(s,pc());const o=i.children.get(s);e=at(e),U0(o,e,n)}}function Th(i,e,n){i.value!==null?n(e,i.value):Lx(i,(s,o)=>{const c=new it(e.toString()+"/"+s);Th(o,c,n)})}function Lx(i,e){i.children.forEach((n,s)=>{e(s,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Px{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&nn(this.last_,(s,o)=>{n[s]=n[s]-o}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B_=10*1e3,Ux=30*1e3,zx=5*60*1e3;class Hx{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new Px(e);const s=B_+(Ux-B_)*Math.random();so(this.reportStats_.bind(this),Math.floor(s))}reportStats_(){const e=this.statsListener_.get(),n={};let s=!1;nn(e,(o,c)=>{c>0&&bi(this.statsToReport_,o)&&(n[o]=c,s=!0)}),s&&this.server_.reportStats(n),so(this.reportStats_.bind(this),Math.floor(Math.random()*2*zx))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var jn;(function(i){i[i.OVERWRITE=0]="OVERWRITE",i[i.MERGE=1]="MERGE",i[i.ACK_USER_WRITE=2]="ACK_USER_WRITE",i[i.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(jn||(jn={}));function z0(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Ep(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Sp(i){return{fromUser:!1,fromServer:!0,queryId:i,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gc{constructor(e,n,s){this.path=e,this.affectedTree=n,this.revert=s,this.type=jn.ACK_USER_WRITE,this.source=z0()}operationForChild(e){if(ze(this.path)){if(this.affectedTree.value!=null)return ie(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new it(e));return new gc(qe(),n,this.revert)}}else return ie(Me(this.path)===e,"operationForChild called for unrelated child."),new gc(at(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo{constructor(e,n){this.source=e,this.path=n,this.type=jn.LISTEN_COMPLETE}operationForChild(e){return ze(this.path)?new yo(this.source,qe()):new yo(this.source,at(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr{constructor(e,n,s){this.source=e,this.path=n,this.snap=s,this.type=jn.OVERWRITE}operationForChild(e){return ze(this.path)?new Pr(this.source,qe(),this.snap.getImmediateChild(e)):new Pr(this.source,at(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o{constructor(e,n,s){this.source=e,this.path=n,this.children=s,this.type=jn.MERGE}operationForChild(e){if(ze(this.path)){const n=this.children.subtree(new it(e));return n.isEmpty()?null:n.value?new Pr(this.source,qe(),n.value):new _o(this.source,qe(),n)}else return ie(Me(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new _o(this.source,at(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr{constructor(e,n,s){this.node_=e,this.fullyInitialized_=n,this.filtered_=s}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(ze(e))return this.isFullyInitialized()&&!this.filtered_;const n=Me(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bx{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function Vx(i,e,n,s){const o=[],c=[];return e.forEach(d=>{d.type==="child_changed"&&i.index_.indexedValueChanged(d.oldSnap,d.snapshotNode)&&c.push(Ix(d.childName,d.snapshotNode))}),to(i,o,"child_removed",e,s,n),to(i,o,"child_added",e,s,n),to(i,o,"child_moved",c,s,n),to(i,o,"child_changed",e,s,n),to(i,o,"value",e,s,n),o}function to(i,e,n,s,o,c){const d=s.filter(h=>h.type===n);d.sort((h,p)=>$x(i,h,p)),d.forEach(h=>{const p=Gx(i,h,c);o.forEach(g=>{g.respondsTo(h.type)&&e.push(g.createEvent(p,i.query_))})})}function Gx(i,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,i.index_)),e}function $x(i,e,n){if(e.childName==null||n.childName==null)throw Ws("Should only compare child_ events.");const s=new je(e.childName,e.snapshotNode),o=new je(n.childName,n.snapshotNode);return i.index_.compare(s,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bc(i,e){return{eventCache:i,serverCache:e}}function ao(i,e,n,s){return Bc(new sr(e,n,s),i.serverCache)}function H0(i,e,n,s){return Bc(i.eventCache,new sr(e,n,s))}function mc(i){return i.eventCache.isFullyInitialized()?i.eventCache.getNode():null}function Ur(i){return i.serverCache.isFullyInitialized()?i.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let If;const qx=()=>(If||(If=new en(AN)),If);class ot{static fromObject(e){let n=new ot(null);return nn(e,(s,o)=>{n=n.set(new it(s),o)}),n}constructor(e,n=qx()){this.value=e,this.children=n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:qe(),value:this.value};if(ze(e))return null;{const s=Me(e),o=this.children.get(s);if(o!==null){const c=o.findRootMostMatchingPathAndValue(at(e),n);return c!=null?{path:Ct(new it(s),c.path),value:c.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(ze(e))return this;{const n=Me(e),s=this.children.get(n);return s!==null?s.subtree(at(e)):new ot(null)}}set(e,n){if(ze(e))return new ot(n,this.children);{const s=Me(e),c=(this.children.get(s)||new ot(null)).set(at(e),n),d=this.children.insert(s,c);return new ot(this.value,d)}}remove(e){if(ze(e))return this.children.isEmpty()?new ot(null):new ot(null,this.children);{const n=Me(e),s=this.children.get(n);if(s){const o=s.remove(at(e));let c;return o.isEmpty()?c=this.children.remove(n):c=this.children.insert(n,o),this.value===null&&c.isEmpty()?new ot(null):new ot(this.value,c)}else return this}}get(e){if(ze(e))return this.value;{const n=Me(e),s=this.children.get(n);return s?s.get(at(e)):null}}setTree(e,n){if(ze(e))return n;{const s=Me(e),c=(this.children.get(s)||new ot(null)).setTree(at(e),n);let d;return c.isEmpty()?d=this.children.remove(s):d=this.children.insert(s,c),new ot(this.value,d)}}fold(e){return this.fold_(qe(),e)}fold_(e,n){const s={};return this.children.inorderTraversal((o,c)=>{s[o]=c.fold_(Ct(e,o),n)}),n(e,this.value,s)}findOnPath(e,n){return this.findOnPath_(e,qe(),n)}findOnPath_(e,n,s){const o=this.value?s(n,this.value):!1;if(o)return o;if(ze(e))return null;{const c=Me(e),d=this.children.get(c);return d?d.findOnPath_(at(e),Ct(n,c),s):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,qe(),n)}foreachOnPath_(e,n,s){if(ze(e))return this;{this.value&&s(n,this.value);const o=Me(e),c=this.children.get(o);return c?c.foreachOnPath_(at(e),Ct(n,o),s):new ot(null)}}foreach(e){this.foreach_(qe(),e)}foreach_(e,n){this.children.inorderTraversal((s,o)=>{o.foreach_(Ct(e,s),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,s)=>{s.value&&e(n,s.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pn{constructor(e){this.writeTree_=e}static empty(){return new Pn(new ot(null))}}function oo(i,e,n){if(ze(e))return new Pn(new ot(n));{const s=i.writeTree_.findRootMostValueAndPath(e);if(s!=null){const o=s.path;let c=s.value;const d=qt(o,e);return c=c.updateChild(d,n),new Pn(i.writeTree_.set(o,c))}else{const o=new ot(n),c=i.writeTree_.setTree(e,o);return new Pn(c)}}}function V_(i,e,n){let s=i;return nn(n,(o,c)=>{s=oo(s,Ct(e,o),c)}),s}function G_(i,e){if(ze(e))return Pn.empty();{const n=i.writeTree_.setTree(e,new ot(null));return new Pn(n)}}function Ch(i,e){return Hr(i,e)!=null}function Hr(i,e){const n=i.writeTree_.findRootMostValueAndPath(e);return n!=null?i.writeTree_.get(n.path).getChild(qt(n.path,e)):null}function $_(i){const e=[],n=i.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(ht,(s,o)=>{e.push(new je(s,o))}):i.writeTree_.children.inorderTraversal((s,o)=>{o.value!=null&&e.push(new je(s,o.value))}),e}function er(i,e){if(ze(e))return i;{const n=Hr(i,e);return n!=null?new Pn(new ot(n)):new Pn(i.writeTree_.subtree(e))}}function wh(i){return i.writeTree_.isEmpty()}function qs(i,e){return B0(qe(),i.writeTree_,e)}function B0(i,e,n){if(e.value!=null)return n.updateChild(i,e.value);{let s=null;return e.children.inorderTraversal((o,c)=>{o===".priority"?(ie(c.value!==null,"Priority writes must always be leaf nodes"),s=c.value):n=B0(Ct(i,o),c,n)}),!n.getChild(i).isEmpty()&&s!==null&&(n=n.updateChild(Ct(i,".priority"),s)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vc(i,e){return q0(e,i)}function Yx(i,e,n,s,o){ie(s>i.lastWriteId,"Stacking an older write on top of newer ones"),o===void 0&&(o=!0),i.allWrites.push({path:e,snap:n,writeId:s,visible:o}),o&&(i.visibleWrites=oo(i.visibleWrites,e,n)),i.lastWriteId=s}function Fx(i,e){for(let n=0;n<i.allWrites.length;n++){const s=i.allWrites[n];if(s.writeId===e)return s}return null}function Wx(i,e){const n=i.allWrites.findIndex(h=>h.writeId===e);ie(n>=0,"removeWrite called with nonexistent writeId.");const s=i.allWrites[n];i.allWrites.splice(n,1);let o=s.visible,c=!1,d=i.allWrites.length-1;for(;o&&d>=0;){const h=i.allWrites[d];h.visible&&(d>=n&&Qx(h,s.path)?o=!1:Mn(s.path,h.path)&&(c=!0)),d--}if(o){if(c)return Kx(i),!0;if(s.snap)i.visibleWrites=G_(i.visibleWrites,s.path);else{const h=s.children;nn(h,p=>{i.visibleWrites=G_(i.visibleWrites,Ct(s.path,p))})}return!0}else return!1}function Qx(i,e){if(i.snap)return Mn(i.path,e);for(const n in i.children)if(i.children.hasOwnProperty(n)&&Mn(Ct(i.path,n),e))return!0;return!1}function Kx(i){i.visibleWrites=V0(i.allWrites,Xx,qe()),i.allWrites.length>0?i.lastWriteId=i.allWrites[i.allWrites.length-1].writeId:i.lastWriteId=-1}function Xx(i){return i.visible}function V0(i,e,n){let s=Pn.empty();for(let o=0;o<i.length;++o){const c=i[o];if(e(c)){const d=c.path;let h;if(c.snap)Mn(n,d)?(h=qt(n,d),s=oo(s,h,c.snap)):Mn(d,n)&&(h=qt(d,n),s=oo(s,qe(),c.snap.getChild(h)));else if(c.children){if(Mn(n,d))h=qt(n,d),s=V_(s,h,c.children);else if(Mn(d,n))if(h=qt(d,n),ze(h))s=V_(s,qe(),c.children);else{const p=Bs(c.children,Me(h));if(p){const g=p.getChild(at(h));s=oo(s,qe(),g)}}}else throw Ws("WriteRecord should have .snap or .children")}}return s}function G0(i,e,n,s,o){if(!s&&!o){const c=Hr(i.visibleWrites,e);if(c!=null)return c;{const d=er(i.visibleWrites,e);if(wh(d))return n;if(n==null&&!Ch(d,qe()))return null;{const h=n||ye.EMPTY_NODE;return qs(d,h)}}}else{const c=er(i.visibleWrites,e);if(!o&&wh(c))return n;if(!o&&n==null&&!Ch(c,qe()))return null;{const d=function(g){return(g.visible||o)&&(!s||!~s.indexOf(g.writeId))&&(Mn(g.path,e)||Mn(e,g.path))},h=V0(i.allWrites,d,e),p=n||ye.EMPTY_NODE;return qs(h,p)}}}function Zx(i,e,n){let s=ye.EMPTY_NODE;const o=Hr(i.visibleWrites,e);if(o)return o.isLeafNode()||o.forEachChild(ht,(c,d)=>{s=s.updateImmediateChild(c,d)}),s;if(n){const c=er(i.visibleWrites,e);return n.forEachChild(ht,(d,h)=>{const p=qs(er(c,new it(d)),h);s=s.updateImmediateChild(d,p)}),$_(c).forEach(d=>{s=s.updateImmediateChild(d.name,d.node)}),s}else{const c=er(i.visibleWrites,e);return $_(c).forEach(d=>{s=s.updateImmediateChild(d.name,d.node)}),s}}function Jx(i,e,n,s,o){ie(s||o,"Either existingEventSnap or existingServerSnap must exist");const c=Ct(e,n);if(Ch(i.visibleWrites,c))return null;{const d=er(i.visibleWrites,c);return wh(d)?o.getChild(n):qs(d,o.getChild(n))}}function eA(i,e,n,s){const o=Ct(e,n),c=Hr(i.visibleWrites,o);if(c!=null)return c;if(s.isCompleteForChild(n)){const d=er(i.visibleWrites,o);return qs(d,s.getNode().getImmediateChild(n))}else return null}function tA(i,e){return Hr(i.visibleWrites,e)}function nA(i,e,n,s,o,c,d){let h;const p=er(i.visibleWrites,e),g=Hr(p,qe());if(g!=null)h=g;else if(n!=null)h=qs(p,n);else return[];if(h=h.withIndex(d),!h.isEmpty()&&!h.isLeafNode()){const _=[],b=d.getCompare(),E=c?h.getReverseIteratorFrom(s,d):h.getIteratorFrom(s,d);let O=E.getNext();for(;O&&_.length<o;)b(O,s)!==0&&_.push(O),O=E.getNext();return _}else return[]}function iA(){return{visibleWrites:Pn.empty(),allWrites:[],lastWriteId:-1}}function vc(i,e,n,s){return G0(i.writeTree,i.treePath,e,n,s)}function Tp(i,e){return Zx(i.writeTree,i.treePath,e)}function q_(i,e,n,s){return Jx(i.writeTree,i.treePath,e,n,s)}function yc(i,e){return tA(i.writeTree,Ct(i.treePath,e))}function rA(i,e,n,s,o,c){return nA(i.writeTree,i.treePath,e,n,s,o,c)}function Cp(i,e,n){return eA(i.writeTree,i.treePath,e,n)}function $0(i,e){return q0(Ct(i.treePath,e),i.writeTree)}function q0(i,e){return{treePath:i,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sA{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,s=e.childName;ie(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),ie(s!==".priority","Only non-priority child changes can be tracked.");const o=this.changeMap.get(s);if(o){const c=o.type;if(n==="child_added"&&c==="child_removed")this.changeMap.set(s,mo(s,e.snapshotNode,o.snapshotNode));else if(n==="child_removed"&&c==="child_added")this.changeMap.delete(s);else if(n==="child_removed"&&c==="child_changed")this.changeMap.set(s,go(s,o.oldSnap));else if(n==="child_changed"&&c==="child_added")this.changeMap.set(s,$s(s,e.snapshotNode));else if(n==="child_changed"&&c==="child_changed")this.changeMap.set(s,mo(s,e.snapshotNode,o.oldSnap));else throw Ws("Illegal combination of changes: "+e+" occurred after "+o)}else this.changeMap.set(s,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aA{getCompleteChild(e){return null}getChildAfterChild(e,n,s){return null}}const Y0=new aA;class wp{constructor(e,n,s=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=s}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const s=this.optCompleteServerCache_!=null?new sr(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Cp(this.writes_,e,s)}}getChildAfterChild(e,n,s){const o=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Ur(this.viewCache_),c=rA(this.writes_,o,n,1,s,e);return c.length===0?null:c[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oA(i){return{filter:i}}function lA(i,e){ie(e.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),ie(e.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed")}function cA(i,e,n,s,o){const c=new sA;let d,h;if(n.type===jn.OVERWRITE){const g=n;g.source.fromUser?d=Oh(i,e,g.path,g.snap,s,o,c):(ie(g.source.fromServer,"Unknown source."),h=g.source.tagged||e.serverCache.isFiltered()&&!ze(g.path),d=_c(i,e,g.path,g.snap,s,o,h,c))}else if(n.type===jn.MERGE){const g=n;g.source.fromUser?d=dA(i,e,g.path,g.children,s,o,c):(ie(g.source.fromServer,"Unknown source."),h=g.source.tagged||e.serverCache.isFiltered(),d=Rh(i,e,g.path,g.children,s,o,h,c))}else if(n.type===jn.ACK_USER_WRITE){const g=n;g.revert?d=pA(i,e,g.path,s,o,c):d=fA(i,e,g.path,g.affectedTree,s,o,c)}else if(n.type===jn.LISTEN_COMPLETE)d=hA(i,e,n.path,s,c);else throw Ws("Unknown operation type: "+n.type);const p=c.getChanges();return uA(e,d,p),{viewCache:d,changes:p}}function uA(i,e,n){const s=e.eventCache;if(s.isFullyInitialized()){const o=s.getNode().isLeafNode()||s.getNode().isEmpty(),c=mc(i);(n.length>0||!i.eventCache.isFullyInitialized()||o&&!s.getNode().equals(c)||!s.getNode().getPriority().equals(c.getPriority()))&&n.push(P0(mc(e)))}}function F0(i,e,n,s,o,c){const d=e.eventCache;if(yc(s,n)!=null)return e;{let h,p;if(ze(n))if(ie(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const g=Ur(e),_=g instanceof ye?g:ye.EMPTY_NODE,b=Tp(s,_);h=i.filter.updateFullNode(e.eventCache.getNode(),b,c)}else{const g=vc(s,Ur(e));h=i.filter.updateFullNode(e.eventCache.getNode(),g,c)}else{const g=Me(n);if(g===".priority"){ie(rr(n)===1,"Can't have a priority with additional path components");const _=d.getNode();p=e.serverCache.getNode();const b=q_(s,n,_,p);b!=null?h=i.filter.updatePriority(_,b):h=d.getNode()}else{const _=at(n);let b;if(d.isCompleteForChild(g)){p=e.serverCache.getNode();const E=q_(s,n,d.getNode(),p);E!=null?b=d.getNode().getImmediateChild(g).updateChild(_,E):b=d.getNode().getImmediateChild(g)}else b=Cp(s,g,e.serverCache);b!=null?h=i.filter.updateChild(d.getNode(),g,b,_,o,c):h=d.getNode()}}return ao(e,h,d.isFullyInitialized()||ze(n),i.filter.filtersNodes())}}function _c(i,e,n,s,o,c,d,h){const p=e.serverCache;let g;const _=d?i.filter:i.filter.getIndexedFilter();if(ze(n))g=_.updateFullNode(p.getNode(),s,null);else if(_.filtersNodes()&&!p.isFiltered()){const O=p.getNode().updateChild(n,s);g=_.updateFullNode(p.getNode(),O,null)}else{const O=Me(n);if(!p.isCompleteForPath(n)&&rr(n)>1)return e;const C=at(n),N=p.getNode().getImmediateChild(O).updateChild(C,s);O===".priority"?g=_.updatePriority(p.getNode(),N):g=_.updateChild(p.getNode(),O,N,C,Y0,null)}const b=H0(e,g,p.isFullyInitialized()||ze(n),_.filtersNodes()),E=new wp(o,b,c);return F0(i,b,n,o,E,h)}function Oh(i,e,n,s,o,c,d){const h=e.eventCache;let p,g;const _=new wp(o,e,c);if(ze(n))g=i.filter.updateFullNode(e.eventCache.getNode(),s,d),p=ao(e,g,!0,i.filter.filtersNodes());else{const b=Me(n);if(b===".priority")g=i.filter.updatePriority(e.eventCache.getNode(),s),p=ao(e,g,h.isFullyInitialized(),h.isFiltered());else{const E=at(n),O=h.getNode().getImmediateChild(b);let C;if(ze(E))C=s;else{const P=_.getCompleteChild(b);P!=null?N0(E)===".priority"&&P.getChild(A0(E)).isEmpty()?C=P:C=P.updateChild(E,s):C=ye.EMPTY_NODE}if(O.equals(C))p=e;else{const P=i.filter.updateChild(h.getNode(),b,C,E,_,d);p=ao(e,P,h.isFullyInitialized(),i.filter.filtersNodes())}}}return p}function Y_(i,e){return i.eventCache.isCompleteForChild(e)}function dA(i,e,n,s,o,c,d){let h=e;return s.foreach((p,g)=>{const _=Ct(n,p);Y_(e,Me(_))&&(h=Oh(i,h,_,g,o,c,d))}),s.foreach((p,g)=>{const _=Ct(n,p);Y_(e,Me(_))||(h=Oh(i,h,_,g,o,c,d))}),h}function F_(i,e,n){return n.foreach((s,o)=>{e=e.updateChild(s,o)}),e}function Rh(i,e,n,s,o,c,d,h){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let p=e,g;ze(n)?g=s:g=new ot(null).setTree(n,s);const _=e.serverCache.getNode();return g.children.inorderTraversal((b,E)=>{if(_.hasChild(b)){const O=e.serverCache.getNode().getImmediateChild(b),C=F_(i,O,E);p=_c(i,p,new it(b),C,o,c,d,h)}}),g.children.inorderTraversal((b,E)=>{const O=!e.serverCache.isCompleteForChild(b)&&E.value===null;if(!_.hasChild(b)&&!O){const C=e.serverCache.getNode().getImmediateChild(b),P=F_(i,C,E);p=_c(i,p,new it(b),P,o,c,d,h)}}),p}function fA(i,e,n,s,o,c,d){if(yc(o,n)!=null)return e;const h=e.serverCache.isFiltered(),p=e.serverCache;if(s.value!=null){if(ze(n)&&p.isFullyInitialized()||p.isCompleteForPath(n))return _c(i,e,n,p.getNode().getChild(n),o,c,h,d);if(ze(n)){let g=new ot(null);return p.getNode().forEachChild(Ls,(_,b)=>{g=g.set(new it(_),b)}),Rh(i,e,n,g,o,c,h,d)}else return e}else{let g=new ot(null);return s.foreach((_,b)=>{const E=Ct(n,_);p.isCompleteForPath(E)&&(g=g.set(_,p.getNode().getChild(E)))}),Rh(i,e,n,g,o,c,h,d)}}function hA(i,e,n,s,o){const c=e.serverCache,d=H0(e,c.getNode(),c.isFullyInitialized()||ze(n),c.isFiltered());return F0(i,d,n,s,Y0,o)}function pA(i,e,n,s,o,c){let d;if(yc(s,n)!=null)return e;{const h=new wp(s,e,o),p=e.eventCache.getNode();let g;if(ze(n)||Me(n)===".priority"){let _;if(e.serverCache.isFullyInitialized())_=vc(s,Ur(e));else{const b=e.serverCache.getNode();ie(b instanceof ye,"serverChildren would be complete if leaf node"),_=Tp(s,b)}_=_,g=i.filter.updateFullNode(p,_,c)}else{const _=Me(n);let b=Cp(s,_,e.serverCache);b==null&&e.serverCache.isCompleteForChild(_)&&(b=p.getImmediateChild(_)),b!=null?g=i.filter.updateChild(p,_,b,at(n),h,c):e.eventCache.getNode().hasChild(_)?g=i.filter.updateChild(p,_,ye.EMPTY_NODE,at(n),h,c):g=p,g.isEmpty()&&e.serverCache.isFullyInitialized()&&(d=vc(s,Ur(e)),d.isLeafNode()&&(g=i.filter.updateFullNode(g,d,c)))}return d=e.serverCache.isFullyInitialized()||yc(s,qe())!=null,ao(e,g,d,i.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gA{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const s=this.query_._queryParams,o=new _p(s.getIndex()),c=Mx(s);this.processor_=oA(c);const d=n.serverCache,h=n.eventCache,p=o.updateFullNode(ye.EMPTY_NODE,d.getNode(),null),g=c.updateFullNode(ye.EMPTY_NODE,h.getNode(),null),_=new sr(p,d.isFullyInitialized(),o.filtersNodes()),b=new sr(g,h.isFullyInitialized(),c.filtersNodes());this.viewCache_=Bc(b,_),this.eventGenerator_=new Bx(this.query_)}get query(){return this.query_}}function mA(i){return i.viewCache_.serverCache.getNode()}function vA(i){return mc(i.viewCache_)}function yA(i,e){const n=Ur(i.viewCache_);return n&&(i.query._queryParams.loadsAllData()||!ze(e)&&!n.getImmediateChild(Me(e)).isEmpty())?n.getChild(e):null}function W_(i){return i.eventRegistrations_.length===0}function _A(i,e){i.eventRegistrations_.push(e)}function Q_(i,e,n){const s=[];if(n){ie(e==null,"A cancel should cancel all event registrations.");const o=i.query._path;i.eventRegistrations_.forEach(c=>{const d=c.createCancelEvent(n,o);d&&s.push(d)})}if(e){let o=[];for(let c=0;c<i.eventRegistrations_.length;++c){const d=i.eventRegistrations_[c];if(!d.matches(e))o.push(d);else if(e.hasAnyCallback()){o=o.concat(i.eventRegistrations_.slice(c+1));break}}i.eventRegistrations_=o}else i.eventRegistrations_=[];return s}function K_(i,e,n,s){e.type===jn.MERGE&&e.source.queryId!==null&&(ie(Ur(i.viewCache_),"We should always have a full cache before handling merges"),ie(mc(i.viewCache_),"Missing event cache, even though we have a server cache"));const o=i.viewCache_,c=cA(i.processor_,o,e,n,s);return lA(i.processor_,c.viewCache),ie(c.viewCache.serverCache.isFullyInitialized()||!o.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),i.viewCache_=c.viewCache,W0(i,c.changes,c.viewCache.eventCache.getNode(),null)}function bA(i,e){const n=i.viewCache_.eventCache,s=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(ht,(c,d)=>{s.push($s(c,d))}),n.isFullyInitialized()&&s.push(P0(n.getNode())),W0(i,s,n.getNode(),e)}function W0(i,e,n,s){const o=s?[s]:i.eventRegistrations_;return Vx(i.eventGenerator_,e,n,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bc;class Q0{constructor(){this.views=new Map}}function EA(i){ie(!bc,"__referenceConstructor has already been defined"),bc=i}function SA(){return ie(bc,"Reference.ts has not been loaded"),bc}function TA(i){return i.views.size===0}function Op(i,e,n,s){const o=e.source.queryId;if(o!==null){const c=i.views.get(o);return ie(c!=null,"SyncTree gave us an op for an invalid query."),K_(c,e,n,s)}else{let c=[];for(const d of i.views.values())c=c.concat(K_(d,e,n,s));return c}}function K0(i,e,n,s,o){const c=e._queryIdentifier,d=i.views.get(c);if(!d){let h=vc(n,o?s:null),p=!1;h?p=!0:s instanceof ye?(h=Tp(n,s),p=!1):(h=ye.EMPTY_NODE,p=!1);const g=Bc(new sr(h,p,!1),new sr(s,o,!1));return new gA(e,g)}return d}function CA(i,e,n,s,o,c){const d=K0(i,e,s,o,c);return i.views.has(e._queryIdentifier)||i.views.set(e._queryIdentifier,d),_A(d,n),bA(d,n)}function wA(i,e,n,s){const o=e._queryIdentifier,c=[];let d=[];const h=ar(i);if(o==="default")for(const[p,g]of i.views.entries())d=d.concat(Q_(g,n,s)),W_(g)&&(i.views.delete(p),g.query._queryParams.loadsAllData()||c.push(g.query));else{const p=i.views.get(o);p&&(d=d.concat(Q_(p,n,s)),W_(p)&&(i.views.delete(o),p.query._queryParams.loadsAllData()||c.push(p.query)))}return h&&!ar(i)&&c.push(new(SA())(e._repo,e._path)),{removed:c,events:d}}function X0(i){const e=[];for(const n of i.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function tr(i,e){let n=null;for(const s of i.views.values())n=n||yA(s,e);return n}function Z0(i,e){if(e._queryParams.loadsAllData())return Gc(i);{const s=e._queryIdentifier;return i.views.get(s)}}function J0(i,e){return Z0(i,e)!=null}function ar(i){return Gc(i)!=null}function Gc(i){for(const e of i.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ec;function OA(i){ie(!Ec,"__referenceConstructor has already been defined"),Ec=i}function RA(){return ie(Ec,"Reference.ts has not been loaded"),Ec}let NA=1;class X_{constructor(e){this.listenProvider_=e,this.syncPointTree_=new ot(null),this.pendingWriteTree_=iA(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function eE(i,e,n,s,o){return Yx(i.pendingWriteTree_,e,n,s,o),o?Ao(i,new Pr(z0(),e,n)):[]}function Dr(i,e,n=!1){const s=Fx(i.pendingWriteTree_,e);if(Wx(i.pendingWriteTree_,e)){let c=new ot(null);return s.snap!=null?c=c.set(qe(),!0):nn(s.children,d=>{c=c.set(new it(d),!0)}),Ao(i,new gc(s.path,c,n))}else return[]}function xo(i,e,n){return Ao(i,new Pr(Ep(),e,n))}function xA(i,e,n){const s=ot.fromObject(n);return Ao(i,new _o(Ep(),e,s))}function AA(i,e){return Ao(i,new yo(Ep(),e))}function DA(i,e,n){const s=Np(i,n);if(s){const o=xp(s),c=o.path,d=o.queryId,h=qt(c,e),p=new yo(Sp(d),h);return Ap(i,c,p)}else return[]}function Sc(i,e,n,s,o=!1){const c=e._path,d=i.syncPointTree_.get(c);let h=[];if(d&&(e._queryIdentifier==="default"||J0(d,e))){const p=wA(d,e,n,s);TA(d)&&(i.syncPointTree_=i.syncPointTree_.remove(c));const g=p.removed;if(h=p.events,!o){const _=g.findIndex(E=>E._queryParams.loadsAllData())!==-1,b=i.syncPointTree_.findOnPath(c,(E,O)=>ar(O));if(_&&!b){const E=i.syncPointTree_.subtree(c);if(!E.isEmpty()){const O=MA(E);for(let C=0;C<O.length;++C){const P=O[C],N=P.query,U=rE(i,P);i.listenProvider_.startListening(lo(N),bo(i,N),U.hashFn,U.onComplete)}}}!b&&g.length>0&&!s&&(_?i.listenProvider_.stopListening(lo(e),null):g.forEach(E=>{const O=i.queryToTagMap.get($c(E));i.listenProvider_.stopListening(lo(E),O)}))}jA(i,g)}return h}function tE(i,e,n,s){const o=Np(i,s);if(o!=null){const c=xp(o),d=c.path,h=c.queryId,p=qt(d,e),g=new Pr(Sp(h),p,n);return Ap(i,d,g)}else return[]}function IA(i,e,n,s){const o=Np(i,s);if(o){const c=xp(o),d=c.path,h=c.queryId,p=qt(d,e),g=ot.fromObject(n),_=new _o(Sp(h),p,g);return Ap(i,d,_)}else return[]}function Nh(i,e,n,s=!1){const o=e._path;let c=null,d=!1;i.syncPointTree_.foreachOnPath(o,(E,O)=>{const C=qt(E,o);c=c||tr(O,C),d=d||ar(O)});let h=i.syncPointTree_.get(o);h?(d=d||ar(h),c=c||tr(h,qe())):(h=new Q0,i.syncPointTree_=i.syncPointTree_.set(o,h));let p;c!=null?p=!0:(p=!1,c=ye.EMPTY_NODE,i.syncPointTree_.subtree(o).foreachChild((O,C)=>{const P=tr(C,qe());P&&(c=c.updateImmediateChild(O,P))}));const g=J0(h,e);if(!g&&!e._queryParams.loadsAllData()){const E=$c(e);ie(!i.queryToTagMap.has(E),"View does not exist, but we have a tag");const O=LA();i.queryToTagMap.set(E,O),i.tagToQueryMap.set(O,E)}const _=Vc(i.pendingWriteTree_,o);let b=CA(h,e,n,_,c,p);if(!g&&!d&&!s){const E=Z0(h,e);b=b.concat(PA(i,e,E))}return b}function Rp(i,e,n){const o=i.pendingWriteTree_,c=i.syncPointTree_.findOnPath(e,(d,h)=>{const p=qt(d,e),g=tr(h,p);if(g)return g});return G0(o,e,c,n,!0)}function kA(i,e){const n=e._path;let s=null;i.syncPointTree_.foreachOnPath(n,(g,_)=>{const b=qt(g,n);s=s||tr(_,b)});let o=i.syncPointTree_.get(n);o?s=s||tr(o,qe()):(o=new Q0,i.syncPointTree_=i.syncPointTree_.set(n,o));const c=s!=null,d=c?new sr(s,!0,!1):null,h=Vc(i.pendingWriteTree_,e._path),p=K0(o,e,h,c?d.getNode():ye.EMPTY_NODE,c);return vA(p)}function Ao(i,e){return nE(e,i.syncPointTree_,null,Vc(i.pendingWriteTree_,qe()))}function nE(i,e,n,s){if(ze(i.path))return iE(i,e,n,s);{const o=e.get(qe());n==null&&o!=null&&(n=tr(o,qe()));let c=[];const d=Me(i.path),h=i.operationForChild(d),p=e.children.get(d);if(p&&h){const g=n?n.getImmediateChild(d):null,_=$0(s,d);c=c.concat(nE(h,p,g,_))}return o&&(c=c.concat(Op(o,i,s,n))),c}}function iE(i,e,n,s){const o=e.get(qe());n==null&&o!=null&&(n=tr(o,qe()));let c=[];return e.children.inorderTraversal((d,h)=>{const p=n?n.getImmediateChild(d):null,g=$0(s,d),_=i.operationForChild(d);_&&(c=c.concat(iE(_,h,p,g)))}),o&&(c=c.concat(Op(o,i,s,n))),c}function rE(i,e){const n=e.query,s=bo(i,n);return{hashFn:()=>(mA(e)||ye.EMPTY_NODE).hash(),onComplete:o=>{if(o==="ok")return s?DA(i,n._path,s):AA(i,n._path);{const c=kN(o,n);return Sc(i,n,null,c)}}}}function bo(i,e){const n=$c(e);return i.queryToTagMap.get(n)}function $c(i){return i._path.toString()+"$"+i._queryIdentifier}function Np(i,e){return i.tagToQueryMap.get(e)}function xp(i){const e=i.indexOf("$");return ie(e!==-1&&e<i.length-1,"Bad queryKey."),{queryId:i.substr(e+1),path:new it(i.substr(0,e))}}function Ap(i,e,n){const s=i.syncPointTree_.get(e);ie(s,"Missing sync point for query tag that we're tracking");const o=Vc(i.pendingWriteTree_,e);return Op(s,n,o,null)}function MA(i){return i.fold((e,n,s)=>{if(n&&ar(n))return[Gc(n)];{let o=[];return n&&(o=X0(n)),nn(s,(c,d)=>{o=o.concat(d)}),o}})}function lo(i){return i._queryParams.loadsAllData()&&!i._queryParams.isDefault()?new(RA())(i._repo,i._path):i}function jA(i,e){for(let n=0;n<e.length;++n){const s=e[n];if(!s._queryParams.loadsAllData()){const o=$c(s),c=i.queryToTagMap.get(o);i.queryToTagMap.delete(o),i.tagToQueryMap.delete(c)}}}function LA(){return NA++}function PA(i,e,n){const s=e._path,o=bo(i,e),c=rE(i,n),d=i.listenProvider_.startListening(lo(e),o,c.hashFn,c.onComplete),h=i.syncPointTree_.subtree(s);if(o)ie(!ar(h.value),"If we're adding a query, it shouldn't be shadowed");else{const p=h.fold((g,_,b)=>{if(!ze(g)&&_&&ar(_))return[Gc(_).query];{let E=[];return _&&(E=E.concat(X0(_).map(O=>O.query))),nn(b,(O,C)=>{E=E.concat(C)}),E}});for(let g=0;g<p.length;++g){const _=p[g];i.listenProvider_.stopListening(lo(_),bo(i,_))}}return d}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dp{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new Dp(n)}node(){return this.node_}}class Ip{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=Ct(this.path_,e);return new Ip(this.syncTree_,n)}node(){return Rp(this.syncTree_,this.path_)}}const UA=function(i){return i=i||{},i.timestamp=i.timestamp||new Date().getTime(),i},Z_=function(i,e,n){if(!i||typeof i!="object")return i;if(ie(".sv"in i,"Unexpected leaf node or priority contents"),typeof i[".sv"]=="string")return zA(i[".sv"],e,n);if(typeof i[".sv"]=="object")return HA(i[".sv"],e);ie(!1,"Unexpected server value: "+JSON.stringify(i,null,2))},zA=function(i,e,n){switch(i){case"timestamp":return n.timestamp;default:ie(!1,"Unexpected server value: "+i)}},HA=function(i,e,n){i.hasOwnProperty("increment")||ie(!1,"Unexpected server value: "+JSON.stringify(i,null,2));const s=i.increment;typeof s!="number"&&ie(!1,"Unexpected increment value: "+s);const o=e.node();if(ie(o!==null&&typeof o<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!o.isLeafNode())return s;const d=o.getValue();return typeof d!="number"?s:d+s},BA=function(i,e,n,s){return kp(e,new Ip(n,i),s)},sE=function(i,e,n){return kp(i,new Dp(e),n)};function kp(i,e,n){const s=i.getPriority().val(),o=Z_(s,e.getImmediateChild(".priority"),n);let c;if(i.isLeafNode()){const d=i,h=Z_(d.getValue(),e,n);return h!==d.getValue()||o!==d.getPriority().val()?new Dt(h,kt(o)):i}else{const d=i;return c=d,o!==d.getPriority().val()&&(c=c.updatePriority(new Dt(o))),d.forEachChild(ht,(h,p)=>{const g=kp(p,e.getImmediateChild(h),n);g!==p&&(c=c.updateImmediateChild(h,g))}),c}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mp{constructor(e="",n=null,s={children:{},childCount:0}){this.name=e,this.parent=n,this.node=s}}function jp(i,e){let n=e instanceof it?e:new it(e),s=i,o=Me(n);for(;o!==null;){const c=Bs(s.node.children,o)||{children:{},childCount:0};s=new Mp(o,s,c),n=at(n),o=Me(n)}return s}function Js(i){return i.node.value}function aE(i,e){i.node.value=e,xh(i)}function oE(i){return i.node.childCount>0}function VA(i){return Js(i)===void 0&&!oE(i)}function qc(i,e){nn(i.node.children,(n,s)=>{e(new Mp(n,i,s))})}function lE(i,e,n,s){n&&e(i),qc(i,o=>{lE(o,e,!0)})}function GA(i,e,n){let s=i.parent;for(;s!==null;){if(e(s))return!0;s=s.parent}return!1}function Do(i){return new it(i.parent===null?i.name:Do(i.parent)+"/"+i.name)}function xh(i){i.parent!==null&&$A(i.parent,i.name,i)}function $A(i,e,n){const s=VA(n),o=bi(i.node.children,e);s&&o?(delete i.node.children[e],i.node.childCount--,xh(i)):!s&&!o&&(i.node.children[e]=n.node,i.node.childCount++,xh(i))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qA=/[\[\].#$\/\u0000-\u001F\u007F]/,YA=/[\[\].#$\u0000-\u001F\u007F]/,kf=10*1024*1024,cE=function(i){return typeof i=="string"&&i.length!==0&&!qA.test(i)},uE=function(i){return typeof i=="string"&&i.length!==0&&!YA.test(i)},FA=function(i){return i&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),uE(i)},WA=function(i,e,n,s){Lp(lp(i,"value"),e,n)},Lp=function(i,e,n){const s=n instanceof it?new fx(n,i):n;if(e===void 0)throw new Error(i+"contains undefined "+Nr(s));if(typeof e=="function")throw new Error(i+"contains a function "+Nr(s)+" with contents = "+e.toString());if(o0(e))throw new Error(i+"contains "+e.toString()+" "+Nr(s));if(typeof e=="string"&&e.length>kf/3&&zc(e)>kf)throw new Error(i+"contains a string greater than "+kf+" utf8 bytes "+Nr(s)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let o=!1,c=!1;if(nn(e,(d,h)=>{if(d===".value")o=!0;else if(d!==".priority"&&d!==".sv"&&(c=!0,!cE(d)))throw new Error(i+" contains an invalid key ("+d+") "+Nr(s)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);hx(s,d),Lp(i,h,s),px(s)}),o&&c)throw new Error(i+' contains ".value" child '+Nr(s)+" in addition to actual children.")}},dE=function(i,e,n,s){if(!uE(n))throw new Error(lp(i,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},QA=function(i,e,n,s){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),dE(i,e,n)},fE=function(i,e){if(Me(e)===".info")throw new Error(i+" failed = Can't modify data under /.info/")},KA=function(i,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!cE(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!FA(n))throw new Error(lp(i,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XA{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Pp(i,e){let n=null;for(let s=0;s<e.length;s++){const o=e[s],c=o.getPath();n!==null&&!mp(c,n.path)&&(i.eventLists_.push(n),n=null),n===null&&(n={events:[],path:c}),n.events.push(o)}n&&i.eventLists_.push(n)}function hE(i,e,n){Pp(i,n),pE(i,s=>mp(s,e))}function Yn(i,e,n){Pp(i,n),pE(i,s=>Mn(s,e)||Mn(e,s))}function pE(i,e){i.recursionDepth_++;let n=!0;for(let s=0;s<i.eventLists_.length;s++){const o=i.eventLists_[s];if(o){const c=o.path;e(c)?(ZA(i.eventLists_[s]),i.eventLists_[s]=null):n=!1}}n&&(i.eventLists_=[]),i.recursionDepth_--}function ZA(i){for(let e=0;e<i.events.length;e++){const n=i.events[e];if(n!==null){i.events[e]=null;const s=n.getEventRunner();ro&&Ht("event: "+n.toString()),Zs(s)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JA="repo_interrupt",eD=25;class tD{constructor(e,n,s,o){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=s,this.appCheckProvider_=o,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new XA,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=pc(),this.transactionQueueTree_=new Mp,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function nD(i,e,n){if(i.stats_=pp(i.repoInfo_),i.forceRestClient_||PN())i.server_=new hc(i.repoInfo_,(s,o,c,d)=>{J_(i,s,o,c,d)},i.authTokenProvider_,i.appCheckProvider_),setTimeout(()=>eb(i,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Tt(n)}catch(s){throw new Error("Invalid authOverride provided: "+s)}}i.persistentConnection_=new gi(i.repoInfo_,e,(s,o,c,d)=>{J_(i,s,o,c,d)},s=>{eb(i,s)},s=>{rD(i,s)},i.authTokenProvider_,i.appCheckProvider_,n),i.server_=i.persistentConnection_}i.authTokenProvider_.addTokenChangeListener(s=>{i.server_.refreshAuthToken(s)}),i.appCheckProvider_.addTokenChangeListener(s=>{i.server_.refreshAppCheckToken(s.token)}),i.statsReporter_=VN(i.repoInfo_,()=>new Hx(i.stats_,i.server_)),i.infoData_=new jx,i.infoSyncTree_=new X_({startListening:(s,o,c,d)=>{let h=[];const p=i.infoData_.getNode(s._path);return p.isEmpty()||(h=xo(i.infoSyncTree_,s._path,p),setTimeout(()=>{d("ok")},0)),h},stopListening:()=>{}}),zp(i,"connected",!1),i.serverSyncTree_=new X_({startListening:(s,o,c,d)=>(i.server_.listen(s,c,o,(h,p)=>{const g=d(h,p);Yn(i.eventQueue_,s._path,g)}),[]),stopListening:(s,o)=>{i.server_.unlisten(s,o)}})}function iD(i){const n=i.infoData_.getNode(new it(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function Up(i){return UA({timestamp:iD(i)})}function J_(i,e,n,s,o){i.dataUpdateCount++;const c=new it(e);n=i.interceptServerDataCallback_?i.interceptServerDataCallback_(e,n):n;let d=[];if(o)if(s){const p=lc(n,g=>kt(g));d=IA(i.serverSyncTree_,c,p,o)}else{const p=kt(n);d=tE(i.serverSyncTree_,c,p,o)}else if(s){const p=lc(n,g=>kt(g));d=xA(i.serverSyncTree_,c,p)}else{const p=kt(n);d=xo(i.serverSyncTree_,c,p)}let h=c;d.length>0&&(h=Fc(i,c)),Yn(i.eventQueue_,h,d)}function eb(i,e){zp(i,"connected",e),e===!1&&oD(i)}function rD(i,e){nn(e,(n,s)=>{zp(i,n,s)})}function zp(i,e,n){const s=new it("/.info/"+e),o=kt(n);i.infoData_.updateSnapshot(s,o);const c=xo(i.infoSyncTree_,s,o);Yn(i.eventQueue_,s,c)}function gE(i){return i.nextWriteId_++}function sD(i,e,n){const s=kA(i.serverSyncTree_,e);return s!=null?Promise.resolve(s):i.server_.get(e).then(o=>{const c=kt(o).withIndex(e._queryParams.getIndex());Nh(i.serverSyncTree_,e,n,!0);let d;if(e._queryParams.loadsAllData())d=xo(i.serverSyncTree_,e._path,c);else{const h=bo(i.serverSyncTree_,e);d=tE(i.serverSyncTree_,e._path,c,h)}return Yn(i.eventQueue_,e._path,d),Sc(i.serverSyncTree_,e,n,null,!0),c},o=>(Yc(i,"get for query "+Tt(e)+" failed: "+o),Promise.reject(new Error(o))))}function aD(i,e,n,s,o){Yc(i,"set",{path:e.toString(),value:n,priority:s});const c=Up(i),d=kt(n,s),h=Rp(i.serverSyncTree_,e),p=sE(d,h,c),g=gE(i),_=eE(i.serverSyncTree_,e,p,g,!0);Pp(i.eventQueue_,_),i.server_.put(e.toString(),d.val(!0),(E,O)=>{const C=E==="ok";C||tn("set at "+e+" failed: "+E);const P=Dr(i.serverSyncTree_,g,!C);Yn(i.eventQueue_,e,P),uD(i,o,E,O)});const b=EE(i,e);Fc(i,b),Yn(i.eventQueue_,b,[])}function oD(i){Yc(i,"onDisconnectEvents");const e=Up(i),n=pc();Th(i.onDisconnect_,qe(),(o,c)=>{const d=BA(o,c,i.serverSyncTree_,e);U0(n,o,d)});let s=[];Th(n,qe(),(o,c)=>{s=s.concat(xo(i.serverSyncTree_,o,c));const d=EE(i,o);Fc(i,d)}),i.onDisconnect_=pc(),Yn(i.eventQueue_,qe(),s)}function lD(i,e,n){let s;Me(e._path)===".info"?s=Nh(i.infoSyncTree_,e,n):s=Nh(i.serverSyncTree_,e,n),hE(i.eventQueue_,e._path,s)}function mE(i,e,n){let s;Me(e._path)===".info"?s=Sc(i.infoSyncTree_,e,n):s=Sc(i.serverSyncTree_,e,n),hE(i.eventQueue_,e._path,s)}function cD(i){i.persistentConnection_&&i.persistentConnection_.interrupt(JA)}function Yc(i,...e){let n="";i.persistentConnection_&&(n=i.persistentConnection_.id+":"),Ht(n,...e)}function uD(i,e,n,s){e&&Zs(()=>{if(n==="ok")e(null);else{const o=(n||"error").toUpperCase();let c=o;s&&(c+=": "+s);const d=new Error(c);d.code=o,e(d)}})}function vE(i,e,n){return Rp(i.serverSyncTree_,e,n)||ye.EMPTY_NODE}function Hp(i,e=i.transactionQueueTree_){if(e||Wc(i,e),Js(e)){const n=_E(i,e);ie(n.length>0,"Sending zero length transaction queue"),n.every(o=>o.status===0)&&dD(i,Do(e),n)}else oE(e)&&qc(e,n=>{Hp(i,n)})}function dD(i,e,n){const s=n.map(g=>g.currentWriteId),o=vE(i,e,s);let c=o;const d=o.hash();for(let g=0;g<n.length;g++){const _=n[g];ie(_.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),_.status=1,_.retryCount++;const b=qt(e,_.path);c=c.updateChild(b,_.currentOutputSnapshotRaw)}const h=c.val(!0),p=e;i.server_.put(p.toString(),h,g=>{Yc(i,"transaction put response",{path:p.toString(),status:g});let _=[];if(g==="ok"){const b=[];for(let E=0;E<n.length;E++)n[E].status=2,_=_.concat(Dr(i.serverSyncTree_,n[E].currentWriteId)),n[E].onComplete&&b.push(()=>n[E].onComplete(null,!0,n[E].currentOutputSnapshotResolved)),n[E].unwatcher();Wc(i,jp(i.transactionQueueTree_,e)),Hp(i,i.transactionQueueTree_),Yn(i.eventQueue_,e,_);for(let E=0;E<b.length;E++)Zs(b[E])}else{if(g==="datastale")for(let b=0;b<n.length;b++)n[b].status===3?n[b].status=4:n[b].status=0;else{tn("transaction at "+p.toString()+" failed: "+g);for(let b=0;b<n.length;b++)n[b].status=4,n[b].abortReason=g}Fc(i,e)}},d)}function Fc(i,e){const n=yE(i,e),s=Do(n),o=_E(i,n);return fD(i,o,s),s}function fD(i,e,n){if(e.length===0)return;const s=[];let o=[];const d=e.filter(h=>h.status===0).map(h=>h.currentWriteId);for(let h=0;h<e.length;h++){const p=e[h],g=qt(n,p.path);let _=!1,b;if(ie(g!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),p.status===4)_=!0,b=p.abortReason,o=o.concat(Dr(i.serverSyncTree_,p.currentWriteId,!0));else if(p.status===0)if(p.retryCount>=eD)_=!0,b="maxretry",o=o.concat(Dr(i.serverSyncTree_,p.currentWriteId,!0));else{const E=vE(i,p.path,d);p.currentInputSnapshot=E;const O=e[h].update(E.val());if(O!==void 0){Lp("transaction failed: Data returned ",O,p.path);let C=kt(O);typeof O=="object"&&O!=null&&bi(O,".priority")||(C=C.updatePriority(E.getPriority()));const N=p.currentWriteId,U=Up(i),F=sE(C,E,U);p.currentOutputSnapshotRaw=C,p.currentOutputSnapshotResolved=F,p.currentWriteId=gE(i),d.splice(d.indexOf(N),1),o=o.concat(eE(i.serverSyncTree_,p.path,F,p.currentWriteId,p.applyLocally)),o=o.concat(Dr(i.serverSyncTree_,N,!0))}else _=!0,b="nodata",o=o.concat(Dr(i.serverSyncTree_,p.currentWriteId,!0))}Yn(i.eventQueue_,n,o),o=[],_&&(e[h].status=2,function(E){setTimeout(E,Math.floor(0))}(e[h].unwatcher),e[h].onComplete&&(b==="nodata"?s.push(()=>e[h].onComplete(null,!1,e[h].currentInputSnapshot)):s.push(()=>e[h].onComplete(new Error(b),!1,null))))}Wc(i,i.transactionQueueTree_);for(let h=0;h<s.length;h++)Zs(s[h]);Hp(i,i.transactionQueueTree_)}function yE(i,e){let n,s=i.transactionQueueTree_;for(n=Me(e);n!==null&&Js(s)===void 0;)s=jp(s,n),e=at(e),n=Me(e);return s}function _E(i,e){const n=[];return bE(i,e,n),n.sort((s,o)=>s.order-o.order),n}function bE(i,e,n){const s=Js(e);if(s)for(let o=0;o<s.length;o++)n.push(s[o]);qc(e,o=>{bE(i,o,n)})}function Wc(i,e){const n=Js(e);if(n){let s=0;for(let o=0;o<n.length;o++)n[o].status!==2&&(n[s]=n[o],s++);n.length=s,aE(e,n.length>0?n:void 0)}qc(e,s=>{Wc(i,s)})}function EE(i,e){const n=Do(yE(i,e)),s=jp(i.transactionQueueTree_,e);return GA(s,o=>{Mf(i,o)}),Mf(i,s),lE(s,o=>{Mf(i,o)}),n}function Mf(i,e){const n=Js(e);if(n){const s=[];let o=[],c=-1;for(let d=0;d<n.length;d++)n[d].status===3||(n[d].status===1?(ie(c===d-1,"All SENT items should be at beginning of queue."),c=d,n[d].status=3,n[d].abortReason="set"):(ie(n[d].status===0,"Unexpected transaction status in abort"),n[d].unwatcher(),o=o.concat(Dr(i.serverSyncTree_,n[d].currentWriteId,!0)),n[d].onComplete&&s.push(n[d].onComplete.bind(null,new Error("set"),!1,null))));c===-1?aE(e,void 0):n.length=c+1,Yn(i.eventQueue_,Do(e),o);for(let d=0;d<s.length;d++)Zs(s[d])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hD(i){let e="";const n=i.split("/");for(let s=0;s<n.length;s++)if(n[s].length>0){let o=n[s];try{o=decodeURIComponent(o.replace(/\+/g," "))}catch{}e+="/"+o}return e}function pD(i){const e={};i.charAt(0)==="?"&&(i=i.substring(1));for(const n of i.split("&")){if(n.length===0)continue;const s=n.split("=");s.length===2?e[decodeURIComponent(s[0])]=decodeURIComponent(s[1]):tn(`Invalid query segment '${n}' in query '${i}'`)}return e}const tb=function(i,e){const n=gD(i),s=n.namespace;n.domain==="firebase.com"&&vi(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!s||s==="undefined")&&n.domain!=="localhost"&&vi("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||NN();const o=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new _0(n.host,n.secure,s,o,e,"",s!==n.subdomain),path:new it(n.pathString)}},gD=function(i){let e="",n="",s="",o="",c="",d=!0,h="https",p=443;if(typeof i=="string"){let g=i.indexOf("//");g>=0&&(h=i.substring(0,g-1),i=i.substring(g+2));let _=i.indexOf("/");_===-1&&(_=i.length);let b=i.indexOf("?");b===-1&&(b=i.length),e=i.substring(0,Math.min(_,b)),_<b&&(o=hD(i.substring(_,b)));const E=pD(i.substring(Math.min(i.length,b)));g=e.indexOf(":"),g>=0?(d=h==="https"||h==="wss",p=parseInt(e.substring(g+1),10)):g=e.length;const O=e.slice(0,g);if(O.toLowerCase()==="localhost")n="localhost";else if(O.split(".").length<=2)n=O;else{const C=e.indexOf(".");s=e.substring(0,C).toLowerCase(),n=e.substring(C+1),c=s}"ns"in E&&(c=E.ns)}return{host:e,port:p,domain:n,subdomain:s,secure:d,scheme:h,pathString:o,namespace:c}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SE{constructor(e,n,s,o){this.eventType=e,this.eventRegistration=n,this.snapshot=s,this.prevName=o}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Tt(this.snapshot.exportVal())}}class TE{constructor(e,n,s){this.eventRegistration=e,this.error=n,this.path=s}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CE{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return ie(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bp{constructor(e,n,s,o){this._repo=e,this._path=n,this._queryParams=s,this._orderByCalled=o}get key(){return ze(this._path)?null:N0(this._path)}get ref(){return new Fn(this._repo,this._path)}get _queryIdentifier(){const e=H_(this._queryParams),n=fp(e);return n==="{}"?"default":n}get _queryObject(){return H_(this._queryParams)}isEqual(e){if(e=Rn(e),!(e instanceof Bp))return!1;const n=this._repo===e._repo,s=mp(this._path,e._path),o=this._queryIdentifier===e._queryIdentifier;return n&&s&&o}toJSON(){return this.toString()}toString(){return this._repo.toString()+dx(this._path)}}class Fn extends Bp{constructor(e,n){super(e,n,new bp,!1)}get parent(){const e=A0(this._path);return e===null?null:new Fn(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class Ys{constructor(e,n,s){this._node=e,this.ref=n,this._index=s}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new it(e),s=Tc(this.ref,e);return new Ys(this._node.getChild(n),s,ht)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(s,o)=>e(new Ys(o,Tc(this.ref,s),ht)))}hasChild(e){const n=new it(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function Ee(i,e){return i=Rn(i),i._checkNotDeleted("ref"),e!==void 0?Tc(i._root,e):i._root}function Tc(i,e){return i=Rn(i),Me(i._path)===null?QA("child","path",e):dE("child","path",e),new Fn(i._repo,Ct(i._path,e))}function $t(i){return fE("remove",i._path),Ae(i,null)}function Ae(i,e){i=Rn(i),fE("set",i._path),WA("set",e,i._path);const n=new Uc;return aD(i._repo,i._path,e,null,n.wrapCallback(()=>{})),n.promise}function mD(i){i=Rn(i);const e=new CE(()=>{}),n=new Io(e);return sD(i._repo,i,n).then(s=>new Ys(s,new Fn(i._repo,i._path),i._queryParams.getIndex()))}class Io{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const s=n._queryParams.getIndex();return new SE("value",this,new Ys(e.snapshotNode,new Fn(n._repo,n._path),s))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new TE(this,e,n):null}matches(e){return e instanceof Io?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}class Vp{constructor(e,n){this.eventType=e,this.callbackContext=n}respondsTo(e){let n=e==="children_added"?"child_added":e;return n=n==="children_removed"?"child_removed":n,this.eventType===n}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new TE(this,e,n):null}createEvent(e,n){ie(e.childName!=null,"Child events should have a childName.");const s=Tc(new Fn(n._repo,n._path),e.childName),o=n._queryParams.getIndex();return new SE(e.type,this,new Ys(e.snapshotNode,s,o),e.prevName)}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof Vp?this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}}function vD(i,e,n,s,o){const c=new CE(n,void 0),d=new Io(c);return lD(i._repo,i,d),()=>mE(i._repo,i,d)}function nb(i,e,n,s){return vD(i,"value",e)}function ib(i,e,n){let s=null;const o=null;e==="value"?s=new Io(o):e&&(s=new Vp(e,o)),mE(i._repo,i,s)}EA(Fn);OA(Fn);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yD="FIREBASE_DATABASE_EMULATOR_HOST",Ah={};let _D=!1;function bD(i,e,n,s){i.repoInfo_=new _0(e,!1,i.repoInfo_.namespace,i.repoInfo_.webSocketOnly,i.repoInfo_.nodeAdmin,i.repoInfo_.persistenceKey,i.repoInfo_.includeNamespaceInQueryParams,!0,n),s&&(i.authTokenProvider_=s)}function ED(i,e,n,s,o){let c=s||i.options.databaseURL;c===void 0&&(i.options.projectId||vi("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Ht("Using default host for project ",i.options.projectId),c=`${i.options.projectId}-default-rtdb.firebaseio.com`);let d=tb(c,o),h=d.repoInfo,p;typeof process<"u"&&S_&&(p=S_[yD]),p?(c=`http://${p}?ns=${h.namespace}`,d=tb(c,o),h=d.repoInfo):d.repoInfo.secure;const g=new zN(i.name,i.options,e);KA("Invalid Firebase Database URL",d),ze(d.path)||vi("Database URL must point to the root of a Firebase Database (not including a child path).");const _=TD(h,i,g,new UN(i,n));return new CD(_,i)}function SD(i,e){const n=Ah[e];(!n||n[i.key]!==i)&&vi(`Database ${e}(${i.repoInfo_}) has already been deleted.`),cD(i),delete n[i.key]}function TD(i,e,n,s){let o=Ah[e.name];o||(o={},Ah[e.name]=o);let c=o[i.toURLString()];return c&&vi("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),c=new tD(i,_D,n,s),o[i.toURLString()]=c,c}class CD{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(nD(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Fn(this._repo,qe())),this._rootInternal}_delete(){return this._rootInternal!==null&&(SD(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&vi("Cannot call "+e+" on a deleted database.")}}function wD(i=t0(),e){const n=dp(i,"database").getImmediate({identifier:e});if(!n._instanceStarted){const s=K1("database");s&&OD(n,...s)}return n}function OD(i,e,n,s={}){i=Rn(i),i._checkNotDeleted("useEmulator");const o=`${e}:${n}`,c=i._repoInternal;if(i._instanceStarted){if(o===i._repoInternal.repoInfo_.host&&Mr(s,c.repoInfo_.emulatorOptions))return;vi("connectDatabaseEmulator() cannot initialize or alter the emulator configuration after the database instance has started.")}let d;if(c.repoInfo_.nodeAdmin)s.mockUserToken&&vi('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),d=new Jl(Jl.OWNER);else if(s.mockUserToken){const h=typeof s.mockUserToken=="string"?s.mockUserToken:X1(s.mockUserToken,i.app.options.projectId);d=new Jl(h)}bD(c,o,s,d)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RD(i){SN(Ks),Vs(new jr("database",(e,{instanceIdentifier:n})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("auth-internal"),c=e.getProvider("app-check-internal");return ED(s,o,c,n)},"PUBLIC").setMultipleInstances(!0)),Ji(T_,C_,i),Ji(T_,C_,"esm2017")}gi.prototype.simpleListen=function(i,e){this.sendRequest("q",{p:i},e)};gi.prototype.echo=function(i,e){this.sendRequest("echo",{d:i},e)};RD();var ND="firebase",xD="11.6.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ji(ND,xD,"app");function Gp(i,e){var n={};for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&e.indexOf(s)<0&&(n[s]=i[s]);if(i!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,s=Object.getOwnPropertySymbols(i);o<s.length;o++)e.indexOf(s[o])<0&&Object.prototype.propertyIsEnumerable.call(i,s[o])&&(n[s[o]]=i[s[o]]);return n}function wE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const AD=wE,OE=new wo("auth","Firebase",wE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cc=new cp("@firebase/auth");function DD(i,...e){Cc.logLevel<=et.WARN&&Cc.warn(`Auth (${Ks}): ${i}`,...e)}function ec(i,...e){Cc.logLevel<=et.ERROR&&Cc.error(`Auth (${Ks}): ${i}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yi(i,...e){throw $p(i,...e)}function $n(i,...e){return $p(i,...e)}function RE(i,e,n){const s=Object.assign(Object.assign({},AD()),{[e]:n});return new wo("auth","Firebase",s).create(e,{appName:i.name})}function nr(i){return RE(i,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function $p(i,...e){if(typeof i!="string"){const n=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=i.name),i._errorFactory.create(n,...s)}return OE.create(i,...e)}function Te(i,e,...n){if(!i)throw $p(e,...n)}function hi(i){const e="INTERNAL ASSERTION FAILED: "+i;throw ec(e),new Error(e)}function _i(i,e){i||hi(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dh(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.href)||""}function ID(){return rb()==="http:"||rb()==="https:"}function rb(){var i;return typeof self<"u"&&((i=self.location)===null||i===void 0?void 0:i.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kD(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(ID()||J1()||"connection"in navigator)?navigator.onLine:!0}function MD(){if(typeof navigator>"u")return null;const i=navigator;return i.languages&&i.languages[0]||i.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko{constructor(e,n){this.shortDelay=e,this.longDelay=n,_i(n>e,"Short delay should be less than long delay!"),this.isMobile=op()||Kb()}get(){return kD()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qp(i,e){_i(i.emulator,"Emulator should always be set here");const{url:n}=i.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NE{static initialize(e,n,s){this.fetchImpl=e,n&&(this.headersImpl=n),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;hi("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;hi("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;hi("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jD={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LD=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],PD=new ko(3e4,6e4);function Qc(i,e){return i.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:i.tenantId}):e}async function ea(i,e,n,s,o={}){return xE(i,o,async()=>{let c={},d={};s&&(e==="GET"?d=s:c={body:JSON.stringify(s)});const h=Qs(Object.assign({key:i.config.apiKey},d)).slice(1),p=await i._getAdditionalHeaders();p["Content-Type"]="application/json",i.languageCode&&(p["X-Firebase-Locale"]=i.languageCode);const g=Object.assign({method:e,headers:p},c);return Z1()||(g.referrerPolicy="no-referrer"),NE.fetch()(await DE(i,i.config.apiHost,n,h),g)})}async function xE(i,e,n){i._canInitEmulator=!1;const s=Object.assign(Object.assign({},jD),e);try{const o=new UD(i),c=await Promise.race([n(),o.promise]);o.clearNetworkTimeout();const d=await c.json();if("needConfirmation"in d)throw Kl(i,"account-exists-with-different-credential",d);if(c.ok&&!("errorMessage"in d))return d;{const h=c.ok?d.errorMessage:d.error.message,[p,g]=h.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw Kl(i,"credential-already-in-use",d);if(p==="EMAIL_EXISTS")throw Kl(i,"email-already-in-use",d);if(p==="USER_DISABLED")throw Kl(i,"user-disabled",d);const _=s[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(g)throw RE(i,_,g);yi(i,_)}}catch(o){if(o instanceof lr)throw o;yi(i,"network-request-failed",{message:String(o)})}}async function AE(i,e,n,s,o={}){const c=await ea(i,e,n,s,o);return"mfaPendingCredential"in c&&yi(i,"multi-factor-auth-required",{_serverResponse:c}),c}async function DE(i,e,n,s){const o=`${e}${n}?${s}`,c=i,d=c.config.emulator?qp(i.config,o):`${i.config.apiScheme}://${o}`;return LD.includes(n)&&(await c._persistenceManagerAvailable,c._getPersistenceType()==="COOKIE")?c._getPersistence()._getFinalTarget(d).toString():d}class UD{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,s)=>{this.timer=setTimeout(()=>s($n(this.auth,"network-request-failed")),PD.get())})}}function Kl(i,e,n){const s={appName:i.name};n.email&&(s.email=n.email),n.phoneNumber&&(s.phoneNumber=n.phoneNumber);const o=$n(i,e,s);return o.customData._tokenResponse=n,o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zD(i,e){return ea(i,"POST","/v1/accounts:delete",e)}async function wc(i,e){return ea(i,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function co(i){if(i)try{const e=new Date(Number(i));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function HD(i,e=!1){const n=Rn(i),s=await n.getIdToken(e),o=Yp(s);Te(o&&o.exp&&o.auth_time&&o.iat,n.auth,"internal-error");const c=typeof o.firebase=="object"?o.firebase:void 0,d=c==null?void 0:c.sign_in_provider;return{claims:o,token:s,authTime:co(jf(o.auth_time)),issuedAtTime:co(jf(o.iat)),expirationTime:co(jf(o.exp)),signInProvider:d||null,signInSecondFactor:(c==null?void 0:c.sign_in_second_factor)||null}}function jf(i){return Number(i)*1e3}function Yp(i){const[e,n,s]=i.split(".");if(e===void 0||n===void 0||s===void 0)return ec("JWT malformed, contained fewer than 3 sections"),null;try{const o=oc(n);return o?JSON.parse(o):(ec("Failed to decode base64 JWT payload"),null)}catch(o){return ec("Caught error parsing JWT payload as JSON",o==null?void 0:o.toString()),null}}function sb(i){const e=Yp(i);return Te(e,"internal-error"),Te(typeof e.exp<"u","internal-error"),Te(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Eo(i,e,n=!1){if(n)return e;try{return await e}catch(s){throw s instanceof lr&&BD(s)&&i.auth.currentUser===i&&await i.auth.signOut(),s}}function BD({code:i}){return i==="auth/user-disabled"||i==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VD{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const s=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),s}else{this.errorBackoff=3e4;const o=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,o)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ih{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=co(this.lastLoginAt),this.creationTime=co(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Oc(i){var e;const n=i.auth,s=await i.getIdToken(),o=await Eo(i,wc(n,{idToken:s}));Te(o==null?void 0:o.users.length,n,"internal-error");const c=o.users[0];i._notifyReloadListener(c);const d=!((e=c.providerUserInfo)===null||e===void 0)&&e.length?IE(c.providerUserInfo):[],h=$D(i.providerData,d),p=i.isAnonymous,g=!(i.email&&c.passwordHash)&&!(h!=null&&h.length),_=p?g:!1,b={uid:c.localId,displayName:c.displayName||null,photoURL:c.photoUrl||null,email:c.email||null,emailVerified:c.emailVerified||!1,phoneNumber:c.phoneNumber||null,tenantId:c.tenantId||null,providerData:h,metadata:new Ih(c.createdAt,c.lastLoginAt),isAnonymous:_};Object.assign(i,b)}async function GD(i){const e=Rn(i);await Oc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function $D(i,e){return[...i.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function IE(i){return i.map(e=>{var{providerId:n}=e,s=Gp(e,["providerId"]);return{providerId:n,uid:s.rawId||"",displayName:s.displayName||null,email:s.email||null,phoneNumber:s.phoneNumber||null,photoURL:s.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qD(i,e){const n=await xE(i,{},async()=>{const s=Qs({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:c}=i.config,d=await DE(i,o,"/v1/token",`key=${c}`),h=await i._getAdditionalHeaders();return h["Content-Type"]="application/x-www-form-urlencoded",NE.fetch()(d,{method:"POST",headers:h,body:s})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function YD(i,e){return ea(i,"POST","/v2/accounts:revokeToken",Qc(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Te(e.idToken,"internal-error"),Te(typeof e.idToken<"u","internal-error"),Te(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):sb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){Te(e.length!==0,"internal-error");const n=sb(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(Te(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:s,refreshToken:o,expiresIn:c}=await qD(e,n);this.updateTokensAndExpiration(s,o,Number(c))}updateTokensAndExpiration(e,n,s){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,n){const{refreshToken:s,accessToken:o,expirationTime:c}=n,d=new Ps;return s&&(Te(typeof s=="string","internal-error",{appName:e}),d.refreshToken=s),o&&(Te(typeof o=="string","internal-error",{appName:e}),d.accessToken=o),c&&(Te(typeof c=="number","internal-error",{appName:e}),d.expirationTime=c),d}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ps,this.toJSON())}_performRefresh(){return hi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qi(i,e){Te(typeof i=="string"||typeof i>"u","internal-error",{appName:e})}class Ln{constructor(e){var{uid:n,auth:s,stsTokenManager:o}=e,c=Gp(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new VD(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=s,this.stsTokenManager=o,this.accessToken=o.accessToken,this.displayName=c.displayName||null,this.email=c.email||null,this.emailVerified=c.emailVerified||!1,this.phoneNumber=c.phoneNumber||null,this.photoURL=c.photoURL||null,this.isAnonymous=c.isAnonymous||!1,this.tenantId=c.tenantId||null,this.providerData=c.providerData?[...c.providerData]:[],this.metadata=new Ih(c.createdAt||void 0,c.lastLoginAt||void 0)}async getIdToken(e){const n=await Eo(this,this.stsTokenManager.getToken(this.auth,e));return Te(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return HD(this,e)}reload(){return GD(this)}_assign(e){this!==e&&(Te(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Ln(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),n&&await Oc(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(Dn(this.auth.app))return Promise.reject(nr(this.auth));const e=await this.getIdToken();return await Eo(this,zD(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var s,o,c,d,h,p,g,_;const b=(s=n.displayName)!==null&&s!==void 0?s:void 0,E=(o=n.email)!==null&&o!==void 0?o:void 0,O=(c=n.phoneNumber)!==null&&c!==void 0?c:void 0,C=(d=n.photoURL)!==null&&d!==void 0?d:void 0,P=(h=n.tenantId)!==null&&h!==void 0?h:void 0,N=(p=n._redirectEventId)!==null&&p!==void 0?p:void 0,U=(g=n.createdAt)!==null&&g!==void 0?g:void 0,F=(_=n.lastLoginAt)!==null&&_!==void 0?_:void 0,{uid:te,emailVerified:K,isAnonymous:z,providerData:se,stsTokenManager:de}=n;Te(te&&de,e,"internal-error");const ae=Ps.fromJSON(this.name,de);Te(typeof te=="string",e,"internal-error"),qi(b,e.name),qi(E,e.name),Te(typeof K=="boolean",e,"internal-error"),Te(typeof z=="boolean",e,"internal-error"),qi(O,e.name),qi(C,e.name),qi(P,e.name),qi(N,e.name),qi(U,e.name),qi(F,e.name);const ue=new Ln({uid:te,auth:e,email:E,emailVerified:K,displayName:b,isAnonymous:z,photoURL:C,phoneNumber:O,tenantId:P,stsTokenManager:ae,createdAt:U,lastLoginAt:F});return se&&Array.isArray(se)&&(ue.providerData=se.map(Ne=>Object.assign({},Ne))),N&&(ue._redirectEventId=N),ue}static async _fromIdTokenResponse(e,n,s=!1){const o=new Ps;o.updateFromServerResponse(n);const c=new Ln({uid:n.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await Oc(c),c}static async _fromGetAccountInfoResponse(e,n,s){const o=n.users[0];Te(o.localId!==void 0,"internal-error");const c=o.providerUserInfo!==void 0?IE(o.providerUserInfo):[],d=!(o.email&&o.passwordHash)&&!(c!=null&&c.length),h=new Ps;h.updateFromIdToken(s);const p=new Ln({uid:o.localId,auth:e,stsTokenManager:h,isAnonymous:d}),g={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new Ih(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!(c!=null&&c.length)};return Object.assign(p,g),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ab=new Map;function pi(i){_i(i instanceof Function,"Expected a class definition");let e=ab.get(i);return e?(_i(e instanceof i,"Instance stored in cache mismatched with class"),e):(e=new i,ab.set(i,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}kE.type="NONE";const ob=kE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tc(i,e,n){return`firebase:${i}:${e}:${n}`}class Us{constructor(e,n,s){this.persistence=e,this.auth=n,this.userKey=s;const{config:o,name:c}=this.auth;this.fullUserKey=tc(this.userKey,o.apiKey,c),this.fullPersistenceKey=tc("persistence",o.apiKey,c),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await wc(this.auth,{idToken:e}).catch(()=>{});return n?Ln._fromGetAccountInfoResponse(this.auth,n,e):null}return Ln._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,s="authUser"){if(!n.length)return new Us(pi(ob),e,s);const o=(await Promise.all(n.map(async g=>{if(await g._isAvailable())return g}))).filter(g=>g);let c=o[0]||pi(ob);const d=tc(s,e.config.apiKey,e.name);let h=null;for(const g of n)try{const _=await g._get(d);if(_){let b;if(typeof _=="string"){const E=await wc(e,{idToken:_}).catch(()=>{});if(!E)break;b=await Ln._fromGetAccountInfoResponse(e,E,_)}else b=Ln._fromJSON(e,_);g!==c&&(h=b),c=g;break}}catch{}const p=o.filter(g=>g._shouldAllowMigration);return!c._shouldAllowMigration||!p.length?new Us(c,e,s):(c=p[0],h&&await c._set(d,h.toJSON()),await Promise.all(n.map(async g=>{if(g!==c)try{await g._remove(d)}catch{}})),new Us(c,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lb(i){const e=i.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(PE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(ME(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(zE(e))return"Blackberry";if(HE(e))return"Webos";if(jE(e))return"Safari";if((e.includes("chrome/")||LE(e))&&!e.includes("edge/"))return"Chrome";if(UE(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=i.match(n);if((s==null?void 0:s.length)===2)return s[1]}return"Other"}function ME(i=Yt()){return/firefox\//i.test(i)}function jE(i=Yt()){const e=i.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function LE(i=Yt()){return/crios\//i.test(i)}function PE(i=Yt()){return/iemobile/i.test(i)}function UE(i=Yt()){return/android/i.test(i)}function zE(i=Yt()){return/blackberry/i.test(i)}function HE(i=Yt()){return/webos/i.test(i)}function Fp(i=Yt()){return/iphone|ipad|ipod/i.test(i)||/macintosh/i.test(i)&&/mobile/i.test(i)}function FD(i=Yt()){var e;return Fp(i)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function WD(){return eR()&&document.documentMode===10}function BE(i=Yt()){return Fp(i)||UE(i)||HE(i)||zE(i)||/windows phone/i.test(i)||PE(i)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VE(i,e=[]){let n;switch(i){case"Browser":n=lb(Yt());break;case"Worker":n=`${lb(Yt())}-${i}`;break;default:n=i}const s=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ks}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QD{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const s=c=>new Promise((d,h)=>{try{const p=e(c);d(p)}catch(p){h(p)}});s.onAbort=n,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const s of this.queue)await s(e),s.onAbort&&n.push(s.onAbort)}catch(s){n.reverse();for(const o of n)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s==null?void 0:s.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KD(i,e={}){return ea(i,"GET","/v2/passwordPolicy",Qc(i,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XD=6;class ZD{constructor(e){var n,s,o,c;const d=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=d.minPasswordLength)!==null&&n!==void 0?n:XD,d.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=d.maxPasswordLength),d.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=d.containsLowercaseCharacter),d.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=d.containsUppercaseCharacter),d.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=d.containsNumericCharacter),d.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=d.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(o=(s=e.allowedNonAlphanumericCharacters)===null||s===void 0?void 0:s.join(""))!==null&&o!==void 0?o:"",this.forceUpgradeOnSignin=(c=e.forceUpgradeOnSignin)!==null&&c!==void 0?c:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,s,o,c,d,h;const p={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,p),this.validatePasswordCharacterOptions(e,p),p.isValid&&(p.isValid=(n=p.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),p.isValid&&(p.isValid=(s=p.meetsMaxPasswordLength)!==null&&s!==void 0?s:!0),p.isValid&&(p.isValid=(o=p.containsLowercaseLetter)!==null&&o!==void 0?o:!0),p.isValid&&(p.isValid=(c=p.containsUppercaseLetter)!==null&&c!==void 0?c:!0),p.isValid&&(p.isValid=(d=p.containsNumericCharacter)!==null&&d!==void 0?d:!0),p.isValid&&(p.isValid=(h=p.containsNonAlphanumericCharacter)!==null&&h!==void 0?h:!0),p}validatePasswordLengthOptions(e,n){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(n.meetsMinPasswordLength=e.length>=s),o&&(n.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(n,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,n,s,o,c){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=c))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JD{constructor(e,n,s,o){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new cb(this),this.idTokenSubscription=new cb(this),this.beforeStateQueue=new QD(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=OE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(c=>this._resolvePersistenceManagerAvailable=c)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=pi(n)),this._initializationPromise=this.queue(async()=>{var s,o,c;if(!this._deleted&&(this.persistenceManager=await Us.create(this,e),(s=this._resolvePersistenceManagerAvailable)===null||s===void 0||s.call(this),!this._deleted)){if(!((o=this._popupRedirectResolver)===null||o===void 0)&&o._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((c=this.currentUser)===null||c===void 0?void 0:c.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await wc(this,{idToken:e}),s=await Ln._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(s)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(Dn(this.app)){const d=this.app.settings.authIdToken;return d?new Promise(h=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(d).then(h,h))}):this.directlySetCurrentUser(null)}const s=await this.assertedPersistence.getCurrentUser();let o=s,c=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const d=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,h=o==null?void 0:o._redirectEventId,p=await this.tryRedirectSignIn(e);(!d||d===h)&&(p!=null&&p.user)&&(o=p.user,c=!0)}if(!o)return this.directlySetCurrentUser(null);if(!o._redirectEventId){if(c)try{await this.beforeStateQueue.runMiddleware(o)}catch(d){o=s,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(d))}return o?this.reloadAndSetCurrentUserOrClear(o):this.directlySetCurrentUser(null)}return Te(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===o._redirectEventId?this.directlySetCurrentUser(o):this.reloadAndSetCurrentUserOrClear(o)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Oc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=MD()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(Dn(this.app))return Promise.reject(nr(this));const n=e?Rn(e):null;return n&&Te(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Te(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return Dn(this.app)?Promise.reject(nr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return Dn(this.app)?Promise.reject(nr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(pi(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await KD(this),n=new ZD(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new wo("auth","Firebase",e())}onAuthStateChanged(e,n,s){return this.registerStateListener(this.authStateSubscription,e,n,s)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,s){return this.registerStateListener(this.idTokenSubscription,e,n,s)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(s.tenantId=this.tenantId),await YD(this,s)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const s=await this.getOrInitRedirectPersistenceManager(n);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&pi(e)||this._popupRedirectResolver;Te(n,this,"argument-error"),this.redirectPersistenceManager=await Us.create(this,[pi(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,s;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((s=this.redirectUser)===null||s===void 0?void 0:s._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const s=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==s&&(this.lastNotifiedUid=s,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,s,o){if(this._deleted)return()=>{};const c=typeof n=="function"?n:n.next.bind(n);let d=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(Te(h,this,"internal-error"),h.then(()=>{d||c(this.currentUser)}),typeof n=="function"){const p=e.addObserver(n,s,o);return()=>{d=!0,p()}}else{const p=e.addObserver(n);return()=>{d=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=VE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const s=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());s&&(n["X-Firebase-Client"]=s);const o=await this._getAppCheckToken();return o&&(n["X-Firebase-AppCheck"]=o),n}async _getAppCheckToken(){var e;if(Dn(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&DD(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Kc(i){return Rn(i)}class cb{constructor(e){this.auth=e,this.observer=null,this.addObserver=uR(n=>this.observer=n)}get next(){return Te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Wp={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function eI(i){Wp=i}function tI(i){return Wp.loadJS(i)}function nI(){return Wp.gapiScript}function iI(i){return`__${i}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rI(i,e){const n=dp(i,"auth");if(n.isInitialized()){const o=n.getImmediate(),c=n.getOptions();if(Mr(c,e??{}))return o;yi(o,"already-initialized")}return n.initialize({options:e})}function sI(i,e){const n=(e==null?void 0:e.persistence)||[],s=(Array.isArray(n)?n:[n]).map(pi);e!=null&&e.errorMap&&i._updateErrorMap(e.errorMap),i._initializeWithPersistence(s,e==null?void 0:e.popupRedirectResolver)}function aI(i,e,n){const s=Kc(i);Te(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,c=GE(e),{host:d,port:h}=oI(e),p=h===null?"":`:${h}`,g={url:`${c}//${d}${p}/`},_=Object.freeze({host:d,port:h,protocol:c.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){Te(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),Te(Mr(g,s.config.emulator)&&Mr(_,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=g,s.emulatorConfig=_,s.settings.appVerificationDisabledForTesting=!0,lI()}function GE(i){const e=i.indexOf(":");return e<0?"":i.substr(0,e+1)}function oI(i){const e=GE(i),n=/(\/\/)?([^?#/]+)/.exec(i.substr(e.length));if(!n)return{host:"",port:null};const s=n[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const c=o[1];return{host:c,port:ub(s.substr(c.length+1))}}else{const[c,d]=s.split(":");return{host:c,port:ub(d)}}}function ub(i){if(!i)return null;const e=Number(i);return isNaN(e)?null:e}function lI(){function i(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",i):i())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $E{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return hi("not implemented")}_getIdTokenResponse(e){return hi("not implemented")}_linkToIdToken(e,n){return hi("not implemented")}_getReauthenticationResolver(e){return hi("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zs(i,e){return AE(i,"POST","/v1/accounts:signInWithIdp",Qc(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cI="http://localhost";class zr extends $E{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new zr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):yi("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o}=n,c=Gp(n,["providerId","signInMethod"]);if(!s||!o)return null;const d=new zr(s,o);return d.idToken=c.idToken||void 0,d.accessToken=c.accessToken||void 0,d.secret=c.secret,d.nonce=c.nonce,d.pendingToken=c.pendingToken||null,d}_getIdTokenResponse(e){const n=this.buildRequest();return zs(e,n)}_linkToIdToken(e,n){const s=this.buildRequest();return s.idToken=n,zs(e,s)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,zs(e,n)}buildRequest(){const e={requestUri:cI,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Qs(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qE{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mo extends qE{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi extends Mo{constructor(){super("facebook.com")}static credential(e){return zr._fromParams({providerId:Fi.PROVIDER_ID,signInMethod:Fi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Fi.credentialFromTaggedObject(e)}static credentialFromError(e){return Fi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Fi.credential(e.oauthAccessToken)}catch{return null}}}Fi.FACEBOOK_SIGN_IN_METHOD="facebook.com";Fi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wi extends Mo{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return zr._fromParams({providerId:Wi.PROVIDER_ID,signInMethod:Wi.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Wi.credentialFromTaggedObject(e)}static credentialFromError(e){return Wi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:s}=e;if(!n&&!s)return null;try{return Wi.credential(n,s)}catch{return null}}}Wi.GOOGLE_SIGN_IN_METHOD="google.com";Wi.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi extends Mo{constructor(){super("github.com")}static credential(e){return zr._fromParams({providerId:Qi.PROVIDER_ID,signInMethod:Qi.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Qi.credentialFromTaggedObject(e)}static credentialFromError(e){return Qi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Qi.credential(e.oauthAccessToken)}catch{return null}}}Qi.GITHUB_SIGN_IN_METHOD="github.com";Qi.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki extends Mo{constructor(){super("twitter.com")}static credential(e,n){return zr._fromParams({providerId:Ki.PROVIDER_ID,signInMethod:Ki.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ki.credentialFromTaggedObject(e)}static credentialFromError(e){return Ki.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:s}=e;if(!n||!s)return null;try{return Ki.credential(n,s)}catch{return null}}}Ki.TWITTER_SIGN_IN_METHOD="twitter.com";Ki.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uI(i,e){return AE(i,"POST","/v1/accounts:signUp",Qc(i,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class or{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,s,o=!1){const c=await Ln._fromIdTokenResponse(e,s,o),d=db(s);return new or({user:c,providerId:d,_tokenResponse:s,operationType:n})}static async _forOperation(e,n,s){await e._updateTokensIfNecessary(s,!0);const o=db(s);return new or({user:e,providerId:o,_tokenResponse:s,operationType:n})}}function db(i){return i.providerId?i.providerId:"phoneNumber"in i?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dI(i){var e;if(Dn(i.app))return Promise.reject(nr(i));const n=Kc(i);if(await n._initializationPromise,!((e=n.currentUser)===null||e===void 0)&&e.isAnonymous)return new or({user:n.currentUser,providerId:null,operationType:"signIn"});const s=await uI(n,{returnSecureToken:!0}),o=await or._fromIdTokenResponse(n,"signIn",s,!0);return await n._updateCurrentUser(o.user),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc extends lr{constructor(e,n,s,o){var c;super(n.code,n.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,Rc.prototype),this.customData={appName:e.name,tenantId:(c=e.tenantId)!==null&&c!==void 0?c:void 0,_serverResponse:n.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,n,s,o){return new Rc(e,n,s,o)}}function YE(i,e,n,s){return(e==="reauthenticate"?n._getReauthenticationResolver(i):n._getIdTokenResponse(i)).catch(c=>{throw c.code==="auth/multi-factor-auth-required"?Rc._fromErrorAndOperation(i,c,e,s):c})}async function fI(i,e,n=!1){const s=await Eo(i,e._linkToIdToken(i.auth,await i.getIdToken()),n);return or._forOperation(i,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hI(i,e,n=!1){const{auth:s}=i;if(Dn(s.app))return Promise.reject(nr(s));const o="reauthenticate";try{const c=await Eo(i,YE(s,o,e,i),n);Te(c.idToken,s,"internal-error");const d=Yp(c.idToken);Te(d,s,"internal-error");const{sub:h}=d;return Te(i.uid===h,s,"user-mismatch"),or._forOperation(i,o,c)}catch(c){throw(c==null?void 0:c.code)==="auth/user-not-found"&&yi(s,"user-mismatch"),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pI(i,e,n=!1){if(Dn(i.app))return Promise.reject(nr(i));const s="signIn",o=await YE(i,s,e),c=await or._fromIdTokenResponse(i,s,o);return n||await i._updateCurrentUser(c.user),c}function gI(i,e,n,s){return Rn(i).onIdTokenChanged(e,n,s)}function mI(i,e,n){return Rn(i).beforeAuthStateChanged(e,n)}const Nc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FE{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Nc,"1"),this.storage.removeItem(Nc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vI=1e3,yI=10;class WE extends FE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=BE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const s=this.storage.getItem(n),o=this.localCache[n];s!==o&&e(n,o,s)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((d,h,p)=>{this.notifyListeners(d,p)});return}const s=e.key;n?this.detachListener():this.stopPolling();const o=()=>{const d=this.storage.getItem(s);!n&&this.localCache[s]===d||this.notifyListeners(s,d)},c=this.storage.getItem(s);WD()&&c!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,yI):o()}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:s}),!0)})},vI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}WE.type="LOCAL";const _I=WE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QE extends FE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}QE.type="SESSION";const KE=QE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bI(i){return Promise.all(i.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(o=>o.isListeningto(e));if(n)return n;const s=new Xc(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:s,eventType:o,data:c}=n.data,d=this.handlersMap[o];if(!(d!=null&&d.size))return;n.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const h=Array.from(d).map(async g=>g(n.origin,c)),p=await bI(h);n.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:p})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Xc.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qp(i="",e=10){let n="";for(let s=0;s<e;s++)n+=Math.floor(Math.random()*10);return i+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EI{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let c,d;return new Promise((h,p)=>{const g=Qp("",20);o.port1.start();const _=setTimeout(()=>{p(new Error("unsupported_event"))},s);d={messageChannel:o,onMessage(b){const E=b;if(E.data.eventId===g)switch(E.data.status){case"ack":clearTimeout(_),c=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(c),h(E.data.response);break;default:clearTimeout(_),clearTimeout(c),p(new Error("invalid_response"));break}}},this.handlers.add(d),o.port1.addEventListener("message",d.onMessage),this.target.postMessage({eventType:e,eventId:g,data:n},[o.port2])}).finally(()=>{d&&this.removeMessageHandler(d)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qn(){return window}function SI(i){qn().location.href=i}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XE(){return typeof qn().WorkerGlobalScope<"u"&&typeof qn().importScripts=="function"}async function TI(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function CI(){var i;return((i=navigator==null?void 0:navigator.serviceWorker)===null||i===void 0?void 0:i.controller)||null}function wI(){return XE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZE="firebaseLocalStorageDb",OI=1,xc="firebaseLocalStorage",JE="fbase_key";class jo{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Zc(i,e){return i.transaction([xc],e?"readwrite":"readonly").objectStore(xc)}function RI(){const i=indexedDB.deleteDatabase(ZE);return new jo(i).toPromise()}function kh(){const i=indexedDB.open(ZE,OI);return new Promise((e,n)=>{i.addEventListener("error",()=>{n(i.error)}),i.addEventListener("upgradeneeded",()=>{const s=i.result;try{s.createObjectStore(xc,{keyPath:JE})}catch(o){n(o)}}),i.addEventListener("success",async()=>{const s=i.result;s.objectStoreNames.contains(xc)?e(s):(s.close(),await RI(),e(await kh()))})})}async function fb(i,e,n){const s=Zc(i,!0).put({[JE]:e,value:n});return new jo(s).toPromise()}async function NI(i,e){const n=Zc(i,!1).get(e),s=await new jo(n).toPromise();return s===void 0?null:s.value}function hb(i,e){const n=Zc(i,!0).delete(e);return new jo(n).toPromise()}const xI=800,AI=3;class eS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await kh(),this.db)}async _withRetries(e){let n=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(n++>AI)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return XE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Xc._getInstance(wI()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await TI(),!this.activeServiceWorker)return;this.sender=new EI(this.activeServiceWorker);const s=await this.sender._send("ping",{},800);s&&!((e=s[0])===null||e===void 0)&&e.fulfilled&&!((n=s[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||CI()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await kh();return await fb(e,Nc,"1"),await hb(e,Nc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(s=>fb(s,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(s=>NI(s,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>hb(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const c=Zc(o,!1).getAll();return new jo(c).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:c}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(c)&&(this.notifyListeners(o,c),n.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),n.push(o));return n}notifyListeners(e,n){this.localCache[e]=n;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),xI)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}eS.type="LOCAL";const DI=eS;new ko(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function II(i,e){return e?pi(e):(Te(i._popupRedirectResolver,i,"argument-error"),i._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kp extends $E{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return zs(e,this._buildIdpRequest())}_linkToIdToken(e,n){return zs(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return zs(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function kI(i){return pI(i.auth,new Kp(i),i.bypassAuthState)}function MI(i){const{auth:e,user:n}=i;return Te(n,e,"internal-error"),hI(n,new Kp(i),i.bypassAuthState)}async function jI(i){const{auth:e,user:n}=i;return Te(n,e,"internal-error"),fI(n,new Kp(i),i.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tS{constructor(e,n,s,o,c=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=c,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:s,postBody:o,tenantId:c,error:d,type:h}=e;if(d){this.reject(d);return}const p={auth:this.auth,requestUri:n,sessionId:s,tenantId:c||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(p))}catch(g){this.reject(g)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return kI;case"linkViaPopup":case"linkViaRedirect":return jI;case"reauthViaPopup":case"reauthViaRedirect":return MI;default:yi(this.auth,"internal-error")}}resolve(e){_i(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){_i(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LI=new ko(2e3,1e4);class Ms extends tS{constructor(e,n,s,o,c){super(e,n,o,c),this.provider=s,this.authWindow=null,this.pollId=null,Ms.currentPopupAction&&Ms.currentPopupAction.cancel(),Ms.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Te(e,this.auth,"internal-error"),e}async onExecution(){_i(this.filter.length===1,"Popup operations only handle one event");const e=Qp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject($n(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject($n(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ms.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,s;if(!((s=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||s===void 0)&&s.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject($n(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,LI.get())};e()}}Ms.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PI="pendingRedirect",nc=new Map;class UI extends tS{constructor(e,n,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,s),this.eventId=null}async execute(){let e=nc.get(this.auth._key());if(!e){try{const s=await zI(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(n){e=()=>Promise.reject(n)}nc.set(this.auth._key(),e)}return this.bypassAuthState||nc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function zI(i,e){const n=VI(e),s=BI(i);if(!await s._isAvailable())return!1;const o=await s._get(n)==="true";return await s._remove(n),o}function HI(i,e){nc.set(i._key(),e)}function BI(i){return pi(i._redirectPersistence)}function VI(i){return tc(PI,i.config.apiKey,i.name)}async function GI(i,e,n=!1){if(Dn(i.app))return Promise.reject(nr(i));const s=Kc(i),o=II(s,e),d=await new UI(s,o,n).execute();return d&&!n&&(delete d.user._redirectEventId,await s._persistUserIfCurrent(d.user),await s._setRedirectUser(null,e)),d}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $I=10*60*1e3;class qI{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(n=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!YI(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var s;if(e.error&&!nS(e)){const o=((s=e.error.code)===null||s===void 0?void 0:s.split("auth/")[1])||"internal-error";n.onError($n(this.auth,o))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const s=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=$I&&this.cachedEventUids.clear(),this.cachedEventUids.has(pb(e))}saveEventToCache(e){this.cachedEventUids.add(pb(e)),this.lastProcessedEventTime=Date.now()}}function pb(i){return[i.type,i.eventId,i.sessionId,i.tenantId].filter(e=>e).join("-")}function nS({type:i,error:e}){return i==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function YI(i){switch(i.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return nS(i);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FI(i,e={}){return ea(i,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WI=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,QI=/^https?/;async function KI(i){if(i.config.emulator)return;const{authorizedDomains:e}=await FI(i);for(const n of e)try{if(XI(n))return}catch{}yi(i,"unauthorized-domain")}function XI(i){const e=Dh(),{protocol:n,hostname:s}=new URL(e);if(i.startsWith("chrome-extension://")){const d=new URL(i);return d.hostname===""&&s===""?n==="chrome-extension:"&&i.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&d.hostname===s}if(!QI.test(n))return!1;if(WI.test(i))return s===i;const o=i.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZI=new ko(3e4,6e4);function gb(){const i=qn().___jsl;if(i!=null&&i.H){for(const e of Object.keys(i.H))if(i.H[e].r=i.H[e].r||[],i.H[e].L=i.H[e].L||[],i.H[e].r=[...i.H[e].L],i.CP)for(let n=0;n<i.CP.length;n++)i.CP[n]=null}}function JI(i){return new Promise((e,n)=>{var s,o,c;function d(){gb(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{gb(),n($n(i,"network-request-failed"))},timeout:ZI.get()})}if(!((o=(s=qn().gapi)===null||s===void 0?void 0:s.iframes)===null||o===void 0)&&o.Iframe)e(gapi.iframes.getContext());else if(!((c=qn().gapi)===null||c===void 0)&&c.load)d();else{const h=iI("iframefcb");return qn()[h]=()=>{gapi.load?d():n($n(i,"network-request-failed"))},tI(`${nI()}?onload=${h}`).catch(p=>n(p))}}).catch(e=>{throw ic=null,e})}let ic=null;function e2(i){return ic=ic||JI(i),ic}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t2=new ko(5e3,15e3),n2="__/auth/iframe",i2="emulator/auth/iframe",r2={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},s2=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function a2(i){const e=i.config;Te(e.authDomain,i,"auth-domain-config-required");const n=e.emulator?qp(e,i2):`https://${i.config.authDomain}/${n2}`,s={apiKey:e.apiKey,appName:i.name,v:Ks},o=s2.get(i.config.apiHost);o&&(s.eid=o);const c=i._getFrameworks();return c.length&&(s.fw=c.join(",")),`${n}?${Qs(s).slice(1)}`}async function o2(i){const e=await e2(i),n=qn().gapi;return Te(n,i,"internal-error"),e.open({where:document.body,url:a2(i),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:r2,dontclear:!0},s=>new Promise(async(o,c)=>{await s.restyle({setHideOnLeave:!1});const d=$n(i,"network-request-failed"),h=qn().setTimeout(()=>{c(d)},t2.get());function p(){qn().clearTimeout(h),o(s)}s.ping(p).then(p,()=>{c(d)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l2={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},c2=500,u2=600,d2="_blank",f2="http://localhost";class mb{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function h2(i,e,n,s=c2,o=u2){const c=Math.max((window.screen.availHeight-o)/2,0).toString(),d=Math.max((window.screen.availWidth-s)/2,0).toString();let h="";const p=Object.assign(Object.assign({},l2),{width:s.toString(),height:o.toString(),top:c,left:d}),g=Yt().toLowerCase();n&&(h=LE(g)?d2:n),ME(g)&&(e=e||f2,p.scrollbars="yes");const _=Object.entries(p).reduce((E,[O,C])=>`${E}${O}=${C},`,"");if(FD(g)&&h!=="_self")return p2(e||"",h),new mb(null);const b=window.open(e||"",h,_);Te(b,i,"popup-blocked");try{b.focus()}catch{}return new mb(b)}function p2(i,e){const n=document.createElement("a");n.href=i,n.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g2="__/auth/handler",m2="emulator/auth/handler",v2=encodeURIComponent("fac");async function vb(i,e,n,s,o,c){Te(i.config.authDomain,i,"auth-domain-config-required"),Te(i.config.apiKey,i,"invalid-api-key");const d={apiKey:i.config.apiKey,appName:i.name,authType:n,redirectUrl:s,v:Ks,eventId:o};if(e instanceof qE){e.setDefaultLanguage(i.languageCode),d.providerId=e.providerId||"",ph(e.getCustomParameters())||(d.customParameters=JSON.stringify(e.getCustomParameters()));for(const[_,b]of Object.entries({}))d[_]=b}if(e instanceof Mo){const _=e.getScopes().filter(b=>b!=="");_.length>0&&(d.scopes=_.join(","))}i.tenantId&&(d.tid=i.tenantId);const h=d;for(const _ of Object.keys(h))h[_]===void 0&&delete h[_];const p=await i._getAppCheckToken(),g=p?`#${v2}=${encodeURIComponent(p)}`:"";return`${y2(i)}?${Qs(h).slice(1)}${g}`}function y2({config:i}){return i.emulator?qp(i,m2):`https://${i.authDomain}/${g2}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lf="webStorageSupport";class _2{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=KE,this._completeRedirectFn=GI,this._overrideRedirectResult=HI}async _openPopup(e,n,s,o){var c;_i((c=this.eventManagers[e._key()])===null||c===void 0?void 0:c.manager,"_initialize() not called before _openPopup()");const d=await vb(e,n,s,Dh(),o);return h2(e,d,Qp())}async _openRedirect(e,n,s,o){await this._originValidation(e);const c=await vb(e,n,s,Dh(),o);return SI(c),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:o,promise:c}=this.eventManagers[n];return o?Promise.resolve(o):(_i(c,"If manager is not set, promise should be"),c)}const s=this.initAndGetManager(e);return this.eventManagers[n]={promise:s},s.catch(()=>{delete this.eventManagers[n]}),s}async initAndGetManager(e){const n=await o2(e),s=new qI(e);return n.register("authEvent",o=>(Te(o==null?void 0:o.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=n,s}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Lf,{type:Lf},o=>{var c;const d=(c=o==null?void 0:o[0])===null||c===void 0?void 0:c[Lf];d!==void 0&&n(!!d),yi(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=KI(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return BE()||jE()||Fp()}}const b2=_2;var yb="@firebase/auth",_b="1.10.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E2{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(s=>{e((s==null?void 0:s.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function S2(i){switch(i){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function T2(i){Vs(new jr("auth",(e,{options:n})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),c=e.getProvider("app-check-internal"),{apiKey:d,authDomain:h}=s.options;Te(d&&!d.includes(":"),"invalid-api-key",{appName:s.name});const p={apiKey:d,authDomain:h,clientPlatform:i,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:VE(i)},g=new JD(s,o,c,p);return sI(g,n),g},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,s)=>{e.getProvider("auth-internal").initialize()})),Vs(new jr("auth-internal",e=>{const n=Kc(e.getProvider("auth").getImmediate());return(s=>new E2(s))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ji(yb,_b,S2(i)),Ji(yb,_b,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const C2=5*60,w2=Qb("authIdTokenMaxAge")||C2;let bb=null;const O2=i=>async e=>{const n=e&&await e.getIdTokenResult(),s=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(s&&s>w2)return;const o=n==null?void 0:n.token;bb!==o&&(bb=o,await fetch(i,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function R2(i=t0()){const e=dp(i,"auth");if(e.isInitialized())return e.getImmediate();const n=rI(i,{popupRedirectResolver:b2,persistence:[DI,_I,KE]}),s=Qb("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const c=new URL(s,location.origin);if(location.origin===c.origin){const d=O2(c.toString());mI(n,d,()=>d(n.currentUser)),gI(n,h=>d(h))}}const o=Fb("auth");return o&&aI(n,`http://${o}`),n}function N2(){var i,e;return(e=(i=document.getElementsByTagName("head"))===null||i===void 0?void 0:i[0])!==null&&e!==void 0?e:document}eI({loadJS(i){return new Promise((e,n)=>{const s=document.createElement("script");s.setAttribute("src",i),s.onload=e,s.onerror=o=>{const c=$n("internal-error");c.customData=o,n(c)},s.type="text/javascript",s.charset="UTF-8",N2().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});T2("Browser");const x2={apiKey:"AIzaSyBIAM_tIBqFUYQl5r-f7e78lNPzc0fIDcM",authDomain:"big-orca.firebaseapp.com",projectId:"big-orca",storageBucket:"big-orca.firebasestorage.app",messagingSenderId:"338206440353",appId:"1:338206440353:web:a6af4374836968379d29e0",databaseURL:"https://big-orca-default-rtdb.firebaseio.com"},iS=e0(x2),Se=wD(iS),Eb=R2(iS);function Hs(){return Math.random().toString(36).substring(2,15)+Math.random().toString(36).substring(2,15)}const A2=["😄","😍","🤩","😎","🤔","😂","😭","😅","😬","😲","😱","💀","👍","👎","👏","🙌","💪","🤝","🙏","🫡","❤️","💔","💯","✅","❗","⚠️","❓","✨","⭐","🏆","💡","⚡","👀","🧠","🎉","🚀","🌈","🐳","🍺","🍔"];function Xl(i){if(typeof i!="string")return;const e=i.trim().toLowerCase();if(["true","1","yes","on"].includes(e))return!0;if(["false","0","no","off"].includes(e))return!1}function Sb(i){try{const e=typeof i=="string"?i:"",n=new URLSearchParams(e.startsWith("?")?e:`?${e}`),s={},o=Xl(n.get("voting"));o!==void 0&&(s.votingEnabled=o);const c=Xl(n.get("downvotes"));c!==void 0&&(s.downvotingEnabled=c);const d=Xl(n.get("multivote"));d!==void 0&&(s.multipleVotesAllowed=d);const h=n.get("votes");if(h!=null&&h!==""){const E=parseInt(h,10);!Number.isNaN(E)&&E>0&&E<1e3&&(s.votesPerUser=E)}const p=Xl(n.get("retro"));p!==void 0&&(s.retrospectiveMode=p);const g=n.get("sort");if(typeof g=="string"){const E=g.trim().toLowerCase();E==="votes"&&(s.sortByVotes=!0),(E==="chrono"||E==="chronological"||E==="time")&&(s.sortByVotes=!1)}const _={},b=n.get("theme");if(typeof b=="string"){const E=b.trim().toLowerCase();E==="dark"&&(_.darkMode=!0),E==="light"&&(_.darkMode=!1)}return{boardSettings:s,uiPrefs:_}}catch{return{boardSettings:{},uiPrefs:{}}}}const ce={CREATION:"CREATION",GROUPING:"GROUPING",INTERACTIONS:"INTERACTIONS",INTERACTION_REVEAL:"INTERACTION_REVEAL",RESULTS:"RESULTS",POLL:"POLL",POLL_RESULTS:"POLL_RESULTS"},uo=(i,e=!1)=>e?i===ce.GROUPING:!1,Ir=(i,e=!1)=>e?i===ce.INTERACTIONS:!0,ir=(i,e=!1)=>e?i===ce.INTERACTIONS||i===ce.INTERACTION_REVEAL||i===ce.RESULTS:!0,rS=(i,e=!1)=>e?i===ce.INTERACTION_REVEAL||i===ce.RESULTS:!0,D2=(i,e=!1)=>e?i===ce.CREATION:!1,I2=(i,e=!1)=>e?i===ce.GROUPING||i===ce.INTERACTIONS||i===ce.INTERACTION_REVEAL||i===ce.RESULTS:!0,kn=(i,e=!1)=>e?i===ce.INTERACTION_REVEAL||i===ce.RESULTS:!1,sS=(i,e=!1)=>e?i===ce.CREATION||i===ce.GROUPING:!0,Pf=(i,e=!1)=>e?i===ce.CREATION:!0,k2=(i,e=!1)=>e?i===ce.GROUPING:!0,aS=D.createContext(),rn=()=>{const i=D.useContext(aS);if(!i)throw new Error("useBoardContext must be used within a BoardProvider");return i},M2=({children:i})=>{const[e,n]=D.useState(null),[s,o]=D.useState(null),[c,d]=D.useState("Untitled Board"),[h,p]=D.useState({}),[g,_]=D.useState(!1),[b,E]=D.useState(!0),[O,C]=D.useState(!0),[P,N]=D.useState(!1),[U,F]=D.useState(3),[te,K]=D.useState(!1),[z,se]=D.useState(ce.CREATION),[de,ae]=D.useState(0),[ue,Ne]=D.useState({}),[be,fe]=D.useState(null),[we,Ke]=D.useState(null),[Le,j]=D.useState(!0),[Z,le]=D.useState(0);D.useEffect(()=>{const L=Eb.onAuthStateChanged(J=>{if(J){console.log("User authenticated:",J.uid),n(J);const W=Ee(Se,`users/${J.uid}/preferences`);mD(W).then(re=>{if(re.exists()){const ge=re.val();ge.darkMode!==void 0&&j(ge.darkMode)}}).catch(re=>{console.error("Error loading user preferences:",re)})}else console.log("No user, signing in anonymously"),dI(Eb).catch(W=>{console.error("Error signing in:",W)})});return()=>L()},[]),D.useEffect(()=>{Le?document.documentElement.classList.remove("light-mode"):document.documentElement.classList.add("light-mode")},[Le]),D.useEffect(()=>{if(s&&e){const L=Ee(Se,`boards/${s}`);return Ke(L),nb(L,J=>{const W=J.val();W&&(W.title&&d(W.title),p(W.columns||{}),W.settings&&(W.settings.votingEnabled!==void 0&&E(W.settings.votingEnabled),W.settings.downvotingEnabled!==void 0&&C(W.settings.downvotingEnabled),W.settings.multipleVotesAllowed!==void 0&&N(W.settings.multipleVotesAllowed),W.settings.votesPerUser!==void 0&&F(W.settings.votesPerUser),W.settings.sortByVotes!==void 0&&_(W.settings.sortByVotes),W.settings.retrospectiveMode!==void 0&&K(W.settings.retrospectiveMode),W.settings.workflowPhase!==void 0&&se(W.settings.workflowPhase),W.settings.resultsViewIndex!==void 0&&ae(W.settings.resultsViewIndex)),W.poll?(Ne(W.poll.votes||{}),e&&W.poll.votes&&W.poll.votes[e.uid]?fe(W.poll.votes[e.uid]):fe(null)):(Ne({}),fe(null)))}),()=>{ib(L)}}},[s,e]),D.useEffect(()=>{if(s&&e){const L=Ee(Se,`boards/${s}/presence/${e.uid}`),J=Ee(Se,`boards/${s}/presence`);Ae(L,{lastSeen:Date.now(),uid:e.uid});const W=ge=>{if(ge.exists()){const Ie=ge.val(),Ge=Date.now(),rt=3e4,vt=Object.values(Ie).filter(wt=>wt.lastSeen&&Ge-wt.lastSeen<rt).length;le(vt)}else le(0)};nb(J,W);const re=setInterval(()=>{Ae(L,{lastSeen:Date.now(),uid:e.uid})},1e4);return()=>{ib(J,W),clearInterval(re),$t(L)}}},[s,e]);const Oe=(L=null,J="Untitled Board",W=null)=>{if(!e)return null;const re=Hs(),ge=Ee(Se,`boards/${re}`),Ie=L||["To Do","In Progress","Done"],Ge={},rt="abcdefghijklmnopqrstuvwxyz";Ie.forEach((bt,Pt)=>{const Vt=Pt<26?rt[Pt]:`col${Pt}`;Ge[`${Vt}_${Hs()}`]={title:bt,cards:{}}});const vt=["votingEnabled","downvotingEnabled","multipleVotesAllowed","votesPerUser","retrospectiveMode","sortByVotes"],wt={};W&&typeof W=="object"&&vt.forEach(bt=>{W[bt]!==void 0&&(wt[bt]=W[bt])});const an={title:J,created:Date.now(),owner:e.uid,columns:Ge,settings:{votingEnabled:!0,downvotingEnabled:!0,multipleVotesAllowed:!1,sortByVotes:!1,retrospectiveMode:!1,workflowPhase:ce.CREATION,resultsViewIndex:0,...wt}};return Ae(ge,an).then(()=>{console.log("New board created with ID:",re),o(re),d("Untitled Board")}).catch(bt=>{console.error("Error creating board:",bt)}),re},T=L=>{console.log("Opening board with ID:",L),o(L)},V=L=>{if(d(L),s&&e){const J=Ee(Se,`boards/${s}/title`);Ae(J,L).then(()=>{console.log("Board title updated")}).catch(W=>{console.error("Error updating board title:",W)})}},I=L=>{if(s&&e){const J=Ee(Se,`boards/${s}/settings`),W={votingEnabled:b,downvotingEnabled:O,multipleVotesAllowed:P,votesPerUser:U,sortByVotes:g,retrospectiveMode:te,workflowPhase:z,resultsViewIndex:de,...L};Ae(J,W).then(()=>{console.log("Board settings updated:",W),L.votingEnabled!==void 0&&E(L.votingEnabled),L.downvotingEnabled!==void 0&&C(L.downvotingEnabled),L.multipleVotesAllowed!==void 0&&N(L.multipleVotesAllowed),L.votesPerUser!==void 0&&F(L.votesPerUser),L.sortByVotes!==void 0&&_(L.sortByVotes),L.retrospectiveMode!==void 0&&K(L.retrospectiveMode),L.workflowPhase!==void 0&&se(L.workflowPhase),L.resultsViewIndex!==void 0&&ae(L.resultsViewIndex)}).catch(re=>{console.error("Error updating board settings:",re)})}else L.votingEnabled!==void 0&&E(L.votingEnabled),L.downvotingEnabled!==void 0&&C(L.downvotingEnabled),L.multipleVotesAllowed!==void 0&&N(L.multipleVotesAllowed),L.votesPerUser!==void 0&&F(L.votesPerUser),L.sortByVotes!==void 0&&_(L.sortByVotes),L.retrospectiveMode!==void 0&&K(L.retrospectiveMode),L.workflowPhase!==void 0&&se(L.workflowPhase),L.resultsViewIndex!==void 0&&ae(L.resultsViewIndex)},$=L=>{I({votingEnabled:L})},ee=L=>{I({downvotingEnabled:L})},pe=L=>{I({multipleVotesAllowed:L})},B=L=>{I({votesPerUser:L})},q=L=>{I(L?{retrospectiveMode:L}:{retrospectiveMode:L,workflowPhase:ce.CREATION,resultsViewIndex:0})},ne=()=>{I({workflowPhase:ce.GROUPING,retrospectiveMode:!0})},Ce=()=>{I({workflowPhase:ce.INTERACTIONS})},Fe=()=>{I({workflowPhase:ce.INTERACTION_REVEAL})},tt=()=>{I({workflowPhase:ce.RESULTS,resultsViewIndex:0})},Ve=()=>{I({workflowPhase:ce.POLL})},Ei=()=>{I({workflowPhase:ce.POLL_RESULTS})},sn=()=>{I({workflowPhase:ce.CREATION,retrospectiveMode:!1,resultsViewIndex:0})},Un=L=>{if(!s||!e||L<1||L>5)return;const J=Ee(Se,`boards/${s}/poll/votes/${e.uid}`);Ae(J,L).then(()=>{fe(L)}).catch(W=>{console.error("Error submitting poll vote:",W)})},ta=()=>{const L=Object.values(ue);if(L.length===0)return{average:0,distribution:[0,0,0,0,0],totalVotes:0};const J=[0,0,0,0,0];let W=0;return L.forEach(ge=>{ge>=1&&ge<=5&&(J[ge-1]++,W+=ge)}),{average:W/L.length,distribution:J,totalVotes:L.length}},Bt=()=>{if(!s||!e)return Promise.resolve();const L=[];return Object.entries(h).forEach(([J,W])=>{W.groups&&Object.entries(W.groups).forEach(([re,ge])=>{ge.cardIds&&ge.cardIds.forEach(Ge=>{const rt=Ee(Se,`boards/${s}/columns/${J}/cards/${Ge}/groupId`);L.push($t(rt))});const Ie=Ee(Se,`boards/${s}/columns/${J}/groups/${re}`);L.push($t(Ie))})}),Promise.all(L).then(()=>{console.log("All grouping removed from board")}).catch(J=>{throw console.error("Error removing all grouping:",J),J})},na=()=>{switch(z){case ce.GROUPING:{if(Object.values(h).some(J=>J.groups&&Object.keys(J.groups).length>0)){if(!window.confirm("Going back to the creation phase will remove all card grouping. This cannot be undone. Are you sure you want to continue?"))return;Bt().then(()=>{I({workflowPhase:ce.CREATION})}).catch(W=>{console.error("Failed to remove grouping:",W)})}else I({workflowPhase:ce.CREATION});break}case ce.INTERACTIONS:I({workflowPhase:ce.GROUPING});break;case ce.INTERACTION_REVEAL:I({workflowPhase:ce.INTERACTIONS});break;case ce.RESULTS:I({workflowPhase:ce.INTERACTION_REVEAL});break;case ce.POLL:I({workflowPhase:ce.RESULTS});break;case ce.POLL_RESULTS:I({workflowPhase:ce.POLL});break}},Br=L=>{if(z!==ce.RESULTS)return;const W=cr().length-1;let re=de;L==="next"&&de<W?re=de+1:L==="prev"&&de>0&&(re=de-1),I({resultsViewIndex:re})},cr=()=>{const L=[];return Object.keys(h).forEach(J=>{const W=h[J];Object.keys(W.cards||{}).forEach(re=>{const ge=W.cards[re];ge.groupId||L.push({type:"card",id:re,columnId:J,data:ge,votes:ge.votes||0})}),Object.keys(W.groups||{}).forEach(re=>{const ge=W.groups[re];L.push({type:"group",id:re,columnId:J,data:ge,votes:ge.votes||0})})}),L.sort((J,W)=>W.votes-J.votes)},Si=()=>!s||!e||!window.confirm("Are you sure you want to reset all votes to zero? This cannot be undone.")?!1:(Object.entries(h).forEach(([J,W])=>{W.cards&&Object.entries(W.cards).forEach(([re,ge])=>{const Ie=Ee(Se,`boards/${s}/columns/${J}/cards/${re}`),Ge={...ge,votes:0,voters:{}};Ae(Ie,Ge).catch(rt=>{console.error(`Error resetting votes for card ${re}:`,rt)})}),W.groups&&Object.entries(W.groups).forEach(([re,ge])=>{const Ie=Ee(Se,`boards/${s}/columns/${J}/groups/${re}`),Ge={...ge,votes:0,voters:{}};Ae(Ie,Ge).catch(rt=>{console.error(`Error resetting votes for group ${re}:`,rt)})})}),!0),He=()=>{let L=0;return Object.values(h).forEach(J=>{J.cards&&Object.values(J.cards).forEach(W=>{L+=W.votes||0}),J.groups&&Object.values(J.groups).forEach(W=>{L+=W.votes||0})}),L},pn=L=>{if(!L)return 0;let J=0;return Object.values(h).forEach(W=>{W.cards&&Object.values(W.cards).forEach(re=>{re.voters&&re.voters[L]&&(J+=Math.abs(re.voters[L]))}),W.groups&&Object.values(W.groups).forEach(re=>{re.voters&&re.voters[L]&&(J+=Math.abs(re.voters[L]))})}),J},Gr={user:e,boardId:s,setBoardId:o,boardTitle:c,setBoardTitle:d,columns:h,updateBoardTitle:V,sortByVotes:g,setSortByVotes:_,votingEnabled:b,setVotingEnabled:E,updateVotingEnabled:$,downvotingEnabled:O,setDownvotingEnabled:C,updateDownvotingEnabled:ee,multipleVotesAllowed:P,setMultipleVotesAllowed:N,updateMultipleVotesAllowed:pe,votesPerUser:U,setVotesPerUser:F,updateVotesPerUser:B,retrospectiveMode:te,setRetrospectiveMode:K,updateRetrospectiveMode:q,updateBoardSettings:I,boardRef:we,createNewBoard:Oe,openExistingBoard:T,moveCard:(L,J,W,re=null)=>{var Ge,rt,vt,wt,an,bt,Pt,Vt,$r,Lo;if(!s||!e)return;const ge=(rt=(Ge=h[J])==null?void 0:Ge.cards)==null?void 0:rt[L];if(!ge){console.error("Card not found");return}const Ie=[];if(J===W){const Ot=ge.groupId;if(Ot===re)return;const pt=Ee(Se,`boards/${s}/columns/${J}/cards/${L}/groupId`);if(re){Ie.push(Ae(pt,re));const ct=(wt=(vt=h[W])==null?void 0:vt.groups)==null?void 0:wt[re];if(ct){const Qt=ct.cardIds||[];if(!Qt.includes(L)){const Qn=[...Qt,L],gn=Ee(Se,`boards/${s}/columns/${W}/groups/${re}/cardIds`);Ie.push(Ae(gn,Qn))}}}else Ie.push($t(pt));if(Ot){const ct=(bt=(an=h[J])==null?void 0:an.groups)==null?void 0:bt[Ot];if(ct&&ct.cardIds&&ct.cardIds.includes(L)){const Qt=ct.cardIds.filter(gn=>gn!==L),Qn=Ee(Se,`boards/${s}/columns/${J}/groups/${Ot}/cardIds`);Ie.push(Ae(Qn,Qt))}}}else{const Ot=Ee(Se,`boards/${s}/columns/${J}/cards/${L}`),pt=Ee(Se,`boards/${s}/columns/${W}/cards/${L}`),{groupId:ct,...Qt}=ge,Qn=re?{...Qt,groupId:re}:Qt;if(Ie.push($t(Ot)),Ie.push(Ae(pt,Qn)),re){const gn=(Vt=(Pt=h[W])==null?void 0:Pt.groups)==null?void 0:Vt[re];if(gn){const qr=gn.cardIds||[];if(!qr.includes(L)){const Yr=[...qr,L],Kn=Ee(Se,`boards/${s}/columns/${W}/groups/${re}/cardIds`);Ie.push(Ae(Kn,Yr))}}}if(ge.groupId){const gn=(Lo=($r=h[J])==null?void 0:$r.groups)==null?void 0:Lo[ge.groupId];if(gn&&gn.cardIds){const qr=gn.cardIds.filter(Kn=>Kn!==L),Yr=Ee(Se,`boards/${s}/columns/${J}/groups/${ge.groupId}/cardIds`);Ie.push(Ae(Yr,qr))}}}return Promise.all(Ie).then(()=>{console.log(`Card ${L} moved from ${J} to ${W}${re?` (group ${re})`:""}`)}).catch(Ot=>{throw console.error("Error moving card:",Ot),Ot})},resetAllVotes:Si,getTotalVotes:He,getUserVoteCount:pn,getTotalVotesRemaining:()=>{if(!Z||Z===0)return 0;const L=Z*U,J=He();return Math.max(0,L-J)},darkMode:Le,updateDarkMode:L=>{if(e){const J=Ee(Se,`users/${e.uid}/preferences`);Ae(J,{darkMode:L}).then(()=>{console.log("Dark mode preference updated:",L),j(L)}).catch(W=>{console.error("Error updating dark mode preference:",W)})}else j(L)},activeUsers:Z,workflowPhase:z,setWorkflowPhase:se,resultsViewIndex:de,setResultsViewIndex:ae,startGroupingPhase:ne,startInteractionsPhase:Ce,startInteractionRevealPhase:Fe,startResultsPhase:tt,startPollPhase:Ve,startPollResultsPhase:Ei,goToCreationPhase:sn,goToPreviousPhase:na,navigateResults:Br,getSortedItemsForResults:cr,pollVotes:ue,userPollVote:be,submitPollVote:Un,getPollStats:ta,createCardGroup:(L,J,W="New Group",re=null)=>{if(!s||!e||!J.length)return;const ge=Hs(),Ie=Ee(Se,`boards/${s}/columns/${L}/groups/${ge}`),Ge=re||Date.now(),rt={name:W,created:Ge,expanded:!0,votes:0,voters:{},cardIds:J},vt=J.map(wt=>{const an=Ee(Se,`boards/${s}/columns/${L}/cards/${wt}/groupId`);return Ae(an,ge)});Promise.all([Ae(Ie,rt),...vt]).then(()=>{console.log(`Group ${ge} created with ${J.length} cards`)}).catch(wt=>{console.error("Error creating group:",wt)})},ungroupCards:(L,J)=>{var Ie,Ge;if(!s||!e)return;const W=(Ge=(Ie=h[L])==null?void 0:Ie.groups)==null?void 0:Ge[J];if(!W||!W.cardIds)return;const re=[];W.cardIds.forEach(rt=>{const vt=Ee(Se,`boards/${s}/columns/${L}/cards/${rt}/groupId`);re.push($t(vt))});const ge=Ee(Se,`boards/${s}/columns/${L}/groups/${J}`);Promise.all([...re,$t(ge)]).then(()=>{console.log(`Group ${J} ungrouped`)}).catch(rt=>{console.error("Error ungrouping cards:",rt)})},removeAllGrouping:Bt,updateGroupName:(L,J,W)=>{if(!s||!e)return;const re=Ee(Se,`boards/${s}/columns/${L}/groups/${J}/name`);Ae(re,W).then(()=>{console.log("Group name updated")}).catch(ge=>{console.error("Error updating group name:",ge)})},toggleGroupExpanded:(L,J,W)=>{if(!s||!e)return;const re=Ee(Se,`boards/${s}/columns/${L}/groups/${J}/expanded`);Ae(re,W).catch(ge=>{console.error("Error updating group expanded state:",ge)})},upvoteGroup:(L,J,W=0,re)=>{var bt,Pt;if(!s||!e)return;const ge=(Pt=(bt=h[L])==null?void 0:bt.groups)==null?void 0:Pt[J];if(!ge)return;const Ie=ge.voters||{},Ge=e.uid;if(te){const Vt=pn(Ge);if(P){if(Vt>=U){re(`You've reached your vote limit (${U} votes)`);return}}else if((Ie[Ge]||0)===0&&Vt>=U){re(`You've reached your vote limit (${U} votes)`);return}}if(!P&&Ie[Ge]&&Ie[Ge]>0){re("You have already voted on this group");return}const rt=W+1,vt={...Ie,[Ge]:(Ie[Ge]||0)+1},wt=Ee(Se,`boards/${s}/columns/${L}/groups/${J}/votes`),an=Ee(Se,`boards/${s}/columns/${L}/groups/${J}/voters`);Promise.all([Ae(wt,rt),Ae(an,vt)]).then(()=>{re("Upvoted group")}).catch(Vt=>{console.error("Error updating group votes:",Vt)})},downvoteGroup:(L,J,W=0,re)=>{var bt,Pt;if(!s||!e)return;const ge=(Pt=(bt=h[L])==null?void 0:bt.groups)==null?void 0:Pt[J];if(!ge)return;const Ie=ge.voters||{},Ge=e.uid;if(!P&&Ie[Ge]&&Ie[Ge]<0){re("You have already voted on this group");return}const rt=W-1,vt={...Ie,[Ge]:(Ie[Ge]||0)-1},wt=Ee(Se,`boards/${s}/columns/${L}/groups/${J}/votes`),an=Ee(Se,`boards/${s}/columns/${L}/groups/${J}/voters`);Promise.all([Ae(wt,rt),Ae(an,vt)]).then(()=>{re("Downvoted group")}).catch(Vt=>{console.error("Error updating group votes:",Vt)})}};return v.jsx(aS.Provider,{value:Gr,children:i})};function j2(i,e="New Column"){if(!i)return Promise.reject(new Error("Board ID is required"));const n=Hs(),s={title:e,cards:{}},o=Ee(Se,`boards/${i}/columns/${n}`);return Ae(o,s)}function L2(i,e,n,s=null){if(!i)return Promise.reject(new Error("Board ID is required"));if(!e)return Promise.reject(new Error("Column ID is required"));if(!n||!n.trim())return Promise.reject(new Error("Card content is required"));const o=Hs(),c={content:n.trim(),votes:0,created:Date.now(),createdBy:s?s.uid:null},d=Ee(Se,`boards/${i}/columns/${e}/cards/${o}`);return Ae(d,c)}const oS=(i,e)=>{const n=I2(e,i),s=kn(e,i);return i&&!n||s},P2=(i,e)=>oS(i,e)?kn(e,i)?"frozen":"cards-not-revealed":null,U2=(i,e)=>i&&e!=="frozen",Mh=i=>i==="frozen",Tb=i=>{switch(i){case"frozen":return"Interactions are now frozen - no more changes allowed";case"cards-not-revealed":default:return"Reactions disabled until cards are revealed"}},z2=i=>{switch(i){case"frozen":return null;case"cards-not-revealed":default:return"Comments are disabled until cards are revealed"}};function H2({boardId:i,columnId:e,cardId:n,cardData:s,user:o,showNotification:c,multipleVotesAllowed:d=!1,retrospectiveMode:h=!1,workflowPhase:p="CREATION",votesPerUser:g=3,getUserVoteCount:_=()=>0}){const[b,E]=D.useState(!1),[O,C]=D.useState(s.content||""),[P,N]=D.useState(!1),[U,F]=D.useState(!1),[te,K]=D.useState(""),[z,se]=D.useState({top:0,left:0}),de=D.useCallback(()=>s.createdBy?s.createdBy&&(o==null?void 0:o.uid)&&s.createdBy===o.uid:!0,[s.createdBy,o==null?void 0:o.uid]),ae=D.useCallback(q=>q.createdBy?q.createdBy&&(o==null?void 0:o.uid)&&q.createdBy===o.uid:!0,[o==null?void 0:o.uid]),ue=D.useCallback(()=>oS(h,p),[h,p]),Ne=D.useMemo(()=>Ee(Se,`boards/${i}/columns/${e}/cards/${n}`),[i,e,n]),be=D.useCallback(q=>{if(q&&q.stopPropagation(),!de()){c("Only the author can edit this card");return}h&&!sS(p,h)||(E(!b),C(s.content||""))},[b,s.content,de,c,h,p]),fe=D.useCallback(async()=>{if(!i)return;const q=O.trim();try{if(!q){await $t(Ne),c("Card deleted");return}await Ae(Ne,{...s,content:q}),c("Card saved"),E(!1)}catch(ne){console.error("Error saving card:",ne)}},[i,Ne,s,O,c]),we=D.useCallback(async q=>{if(q.stopPropagation(),!!i&&window.confirm("Are you sure you want to delete this card?"))try{await $t(Ne),c("Card deleted")}catch(ne){console.error("Error deleting card:",ne)}},[i,Ne,c]),Ke=D.useCallback(q=>{q.key==="Enter"&&!q.shiftKey?(q.preventDefault(),fe()):q.key==="Escape"&&(E(!1),C(s.content||""))},[fe,s.content]),Le=D.useCallback(async(q,ne,Ce)=>{if(ne.stopPropagation(),!i||!o)return;if(ue()){kn(p,h)?c("Voting is now frozen - no more changes allowed"):c("Voting is disabled until cards are revealed");return}const Fe=s.votes||0;if(q<0&&Fe<=0){c("Can't have negative votes");return}const tt=s.voters&&s.voters[o.uid]?s.voters[o.uid]:0;if(q>0&&h){const Ve=_(o.uid);if(d){if(Ve>=g){c(`You've reached your vote limit (${g} votes)`);return}}else if(tt===0&&Ve>=g){c(`You've reached your vote limit (${g} votes)`);return}}if(!d){if(tt===q){c("You've already voted");return}tt!==0&&(q=-tt)}try{const Ve=Fe+q,Ei=Ee(Se,`boards/${i}/columns/${e}/cards/${n}/votes`);await Ae(Ei,Ve);const sn=Ee(Se,`boards/${i}/columns/${e}/cards/${n}/voters/${o.uid}`);let Un;d?Un=tt+q:Un=tt!==0&&q===-tt?0:q,Un===0?await $t(sn):await Ae(sn,Un),!d&&tt!==0&&q===-tt?c("Vote removed"):c(Ce)}catch(Ve){console.error("Error updating votes:",Ve)}},[i,e,n,s.votes,s.voters,c,d,o,ue,p,h,g,_]),j=D.useCallback(q=>{Le(1,q,"Upvoted card")},[Le]),Z=D.useCallback(q=>{Le(-1,q,"Downvoted card")},[Le]),le=D.useCallback(q=>q?q.split(`
`).map((ne,Ce)=>v.jsxs(D.Fragment,{children:[ne,Ce<q.split(`
`).length-1&&v.jsx("br",{})]},Ce)):"",[]),Oe=D.useCallback(q=>!!(s.reactions&&s.reactions[q]&&s.reactions[q].users&&s.reactions[q].users[o==null?void 0:o.uid]),[s.reactions,o==null?void 0:o.uid]),T=D.useCallback(q=>s.reactions&&s.reactions[q]&&s.reactions[q].count||0,[s.reactions]),V=D.useCallback(q=>{const ne=`boards/${i}/columns/${e}/cards/${n}/reactions/${q}`;return{userRef:Ee(Se,`${ne}/users/${o==null?void 0:o.uid}`),countRef:Ee(Se,`${ne}/count`)}},[i,e,n,o==null?void 0:o.uid]),I=D.useCallback(async(q,ne)=>{if(q.stopPropagation(),!i||!o)return;if(ue()){kn(p,h)?c("Interactions are now frozen - no more changes allowed"):c("Reactions are disabled until cards are revealed");return}const{userRef:Ce,countRef:Fe}=V(ne),tt=Oe(ne);try{if(tt){await $t(Ce);const Ve=Math.max(0,T(ne)-1);await Ae(Fe,Ve),c("Your reaction removed")}else{await Ae(Ce,!0);const Ve=T(ne)+1;await Ae(Fe,Ve),c("Reaction added")}}catch(Ve){console.error("Error managing reaction:",Ve)}},[i,o,V,Oe,T,c,ue,p,h]),$=D.useCallback(async()=>{if(!(!i||!te.trim())){if(ue()){kn(p,h)?c("Comments are now frozen - no more changes allowed"):c("Comments are disabled until cards are revealed");return}try{const q=`comment_${Date.now()}`,ne={content:te,timestamp:Date.now(),createdBy:(o==null?void 0:o.uid)||null},Ce=Ee(Se,`boards/${i}/columns/${e}/cards/${n}/comments/${q}`);await Ae(Ce,ne),c("Comment added"),K("")}catch(q){console.error("Error adding comment:",q)}}},[i,e,n,te,c,o==null?void 0:o.uid,ue,p,h]),ee=D.useCallback(async(q,ne)=>{var Ce;if(!(!i||!q||!ne.trim())){if(ue()){kn(p,h)?c("Comments are now frozen - no more changes allowed"):c("Comment editing is disabled until cards are revealed");return}try{const Fe=(Ce=s.comments)==null?void 0:Ce[q];if(!Fe)return;if(!ae(Fe)){c("Only the author can edit this comment");return}const tt=Ee(Se,`boards/${i}/columns/${e}/cards/${n}/comments/${q}`);await Ae(tt,{...Fe,content:ne.trim()}),c("Comment updated")}catch(Fe){console.error("Error updating comment:",Fe)}}},[i,e,n,s.comments,c,ae,ue,p,h]),pe=D.useCallback(async q=>{var ne;if(!(!i||!q)){if(ue()){kn(p,h)?c("Comments are now frozen - no more changes allowed"):c("Comment deletion is disabled until cards are revealed");return}try{const Ce=(ne=s.comments)==null?void 0:ne[q];if(!Ce)return;if(!ae(Ce)){c("Only the author can delete this comment");return}const Fe=Ee(Se,`boards/${i}/columns/${e}/cards/${n}/comments/${q}`);await $t(Fe),c("Comment deleted")}catch(Ce){console.error("Error deleting comment:",Ce)}}},[i,e,n,c,s.comments,ae,ue,p,h]),B=D.useCallback(()=>{F(!U),N(!1)},[U]);return D.useEffect(()=>{if(!P)return;const q=ne=>{const Ce=document.querySelector(".emoji-picker");Ce&&!Ce.contains(ne.target)&&!ne.target.closest(".add-reaction-button")&&N(!1)};return document.addEventListener("mousedown",q),()=>document.removeEventListener("mousedown",q)},[P]),{isEditing:b,editedContent:O,showEmojiPicker:P,showComments:U,newComment:te,emojiPickerPosition:z,setIsEditing:E,setEditedContent:C,setShowEmojiPicker:N,setShowComments:F,setNewComment:K,setEmojiPickerPosition:se,toggleEditMode:be,saveCardChanges:fe,deleteCard:we,handleKeyPress:Ke,upvoteCard:j,downvoteCard:Z,formatContentWithEmojis:le,hasUserReactedWithEmoji:Oe,addReaction:I,addComment:$,editComment:ee,deleteComment:pe,toggleComments:B,isCardAuthor:de,isCommentAuthor:ae,isInteractionDisabled:ue}}var B2=Cb();const V2=So(B2),lS=X.memo(({position:i,onEmojiSelect:e,onClose:n,hasUserReactedWithEmoji:s})=>V2.createPortal(v.jsx("div",{className:"emoji-picker",onClick:o=>o.stopPropagation(),"data-testid":"emoji-picker",style:{top:i.top,left:i.left},children:A2.map(o=>v.jsx("button",{className:`emoji-option ${s(o)?"selected":""}`,"data-testid":"emoji-option",onClick:c=>{c.stopPropagation(),e(c,o),n()},children:o},o))}),document.body)),G2=X.memo(({reactions:i,userId:e,showEmojiPicker:n,setShowEmojiPicker:s,setShowComments:o,addReaction:c,hasUserReactedWithEmoji:d,commentCount:h,toggleComments:p,emojiPickerPosition:g,setEmojiPickerPosition:_,disabled:b=!1,disabledReason:E="cards-not-revealed",retrospectiveMode:O=!1,workflowPhase:C="CREATION"})=>{const P=D.useRef(null),N=ir(C,O),U=U2(b,E),F=Mh(E),te=E==="frozen";return v.jsxs("div",{className:"emoji-reactions",children:[v.jsxs("div",{className:"reactions-left",children:[i&&Object.entries(i).map(([K,z])=>{if(z.count<=0)return null;const se=z.users&&z.users[e];return v.jsxs("div",{className:`emoji-reaction ${se?"active":""} ${U?"disabled":""} ${te?"frozen":""}`,"data-testid":"emoji-reaction",onClick:b?void 0:de=>c(de,K),title:b?Tb(E):se?"Click to remove your reaction":"Click to add your reaction",children:[v.jsx("span",{className:"emoji",children:K}),v.jsx("span",{className:"count",children:z.count})]},K)}),n&&v.jsx(lS,{position:g,onEmojiSelect:c,onClose:()=>s(!1),hasUserReactedWithEmoji:d}),!F&&v.jsx("button",{className:`add-reaction-button ${U?"disabled":""}`,onClick:b?void 0:K=>{if(K.stopPropagation(),P.current){const z=P.current.getBoundingClientRect();_({top:z.bottom+window.scrollY+5,left:z.left+window.scrollX})}s(!n),o(!1)},title:b?Tb(E):"Add reaction",ref:P,disabled:U,children:"+"})]}),N&&v.jsx("div",{className:"reactions-right",children:v.jsxs("button",{className:"comments-btn",onClick:K=>{K.stopPropagation(),p()},title:"Toggle comments",children:[v.jsx(Lc,{size:16}),v.jsx("span",{children:h||0})]})})]})}),$2=({editedComment:i,setEditedComment:e,saveComment:n,cancelEdit:s,deleteComment:o})=>v.jsxs("div",{className:"comment-edit",onClick:c=>c.stopPropagation(),children:[v.jsx("input",{type:"text",value:i,onChange:c=>e(c.target.value),className:"comment-edit-input",autoFocus:!0,onKeyPress:c=>{c.key==="Enter"&&i.trim()?n():c.key==="Escape"&&s()}}),v.jsxs("div",{className:"comment-edit-actions",children:[v.jsx("button",{className:"btn primary-btn btn-sm",onClick:n,children:"Save"}),v.jsx("button",{className:"btn secondary-btn btn-sm",onClick:s,children:"Cancel"}),v.jsx("button",{className:"btn danger-btn btn-sm",onClick:o,children:"Delete"})]})]}),cS=X.memo(({comments:i,onAddComment:e,newComment:n,onCommentChange:s,onEditComment:o,onDeleteComment:c,isCommentAuthor:d,interactionsDisabled:h=!1,disabledReason:p=null})=>{const[g,_]=D.useState(null),[b,E]=D.useState(""),O=!Mh(p),C=Mh(p),P=(z,se)=>{if(h){O&&alert("Comment editing is disabled until cards are revealed");return}_(z),E(se)},N=()=>{_(null),E("")},U=()=>{b.trim()&&(o(g,b),N())},F=z2(p),te=()=>{if(h){O&&F&&alert(F);return}n.trim()&&e()},K=z=>{window.confirm("Are you sure you want to delete this comment?")&&c(z)};return v.jsxs("div",{className:"comments-section",children:[v.jsx("h4",{children:"Comments"}),i&&Object.entries(i).length>0?Object.entries(i).map(([z,se])=>v.jsx("div",{className:"comment",children:g===z?v.jsx($2,{editedComment:b,setEditedComment:E,saveComment:U,cancelEdit:N,deleteComment:()=>K(z)}):v.jsx("div",{className:`comment-content ${d(se)&&!h?"editable":""}`,onClick:de=>{de.stopPropagation(),d(se)&&P(z,se.content)},title:h&&O?F:d(se)?"Click to edit":"Only the author can edit this comment",children:se.content})},z)):v.jsx("p",{className:"no-comments",children:"No comments yet"}),!C&&v.jsx("div",{className:"comment-form",children:v.jsx("input",{type:"text",placeholder:h&&O?F:"Add a comment...",className:"comment-input",value:n,onChange:z=>s(z.target.value),onClick:z=>z.stopPropagation(),onKeyPress:z=>{z.key==="Enter"&&n.trim()&&(z.preventDefault(),te())},disabled:h,title:h&&O?F:""})})]})}),uS=X.memo(({votes:i,onUpvote:e,onDownvote:n,showDownvoteButton:s=!0,disabled:o=!1,disabledReason:c="voting-disabled"})=>{const d=h=>{if(!o)return h==="upvote"?"Upvote":"Downvote";switch(c){case"frozen":return"Voting is frozen - no more changes allowed";case"cards-not-revealed":default:return"Voting disabled until cards are revealed"}};return v.jsxs("div",{className:"votes",children:[v.jsx("button",{className:`vote-button ${o?"disabled":""}`,onClick:o?void 0:e,title:d("upvote"),disabled:o,children:v.jsx(Yh,{size:16})}),v.jsx("span",{className:"vote-count",children:i||0}),s&&v.jsx("button",{className:`vote-button ${o?"disabled":""}`,onClick:o?void 0:n,title:d("downvote"),disabled:o,children:v.jsx(To,{size:16})})]})}),q2=({editedContent:i,setEditedContent:e,handleKeyPress:n,saveCardChanges:s,toggleEditMode:o,deleteCard:c})=>v.jsxs("div",{className:"card-edit",onClick:d=>d.stopPropagation(),children:[v.jsx("textarea",{value:i,onChange:d=>e(d.target.value),onKeyDown:n,className:"card-edit-textarea",autoFocus:!0}),v.jsxs("div",{className:"card-edit-actions",children:[v.jsx("button",{className:"btn primary-btn",onClick:s,children:"Save"}),v.jsx("button",{className:"btn secondary-btn",onClick:o,children:"Cancel"}),v.jsx("button",{className:"btn danger-btn",onClick:c,children:"Delete"})]})]}),Y2=({cardData:i,formatContentWithEmojis:e,upvoteCard:n,downvoteCard:s,votingEnabled:o,downvotingEnabled:c,userId:d,retrospectiveMode:h,groupId:p,workflowPhase:g="CREATION",user:_,disabledReason:b})=>{const E=i.voters&&d&&i.voters[d]||0,O=c||E>0,C=K=>K?K.split("").map(z=>z===" "?" ":z===`
`?`
`:"█").join(""):"",P=i.createdBy&&d&&i.createdBy===d,N=D2(g,h)&&!P,U=!Ir(g,h),F=ir(g,h),te=N?C(i.content):e(i.content);return v.jsxs("div",{className:"card-header",children:[o&&!p&&!(h&&g==="CREATION"&&_)&&F&&v.jsx(uS,{votes:i.votes,onUpvote:U?()=>{}:n,onDownvote:U?()=>{}:s,showDownvoteButton:O,disabled:U,disabledReason:b}),v.jsx("div",{className:`card-content ${!o||p||!F||h&&g==="CREATION"&&_?"full-width":""} ${N?"obfuscated":""}`,"data-testid":"card-content",children:te})]})};function Xp({cardId:i,cardData:e,columnId:n,groupId:s=null,showNotification:o,onCardDropOnCard:c=null}){const{boardId:d,user:h,votingEnabled:p,downvotingEnabled:g,multipleVotesAllowed:_,votesPerUser:b,getUserVoteCount:E,retrospectiveMode:O,workflowPhase:C="CREATION"}=rn(),P=D.useRef(null),{isEditing:N,editedContent:U,showEmojiPicker:F,showComments:te,newComment:K,emojiPickerPosition:z,setEditedContent:se,setShowEmojiPicker:de,setShowComments:ae,setNewComment:ue,setEmojiPickerPosition:Ne,toggleEditMode:be,saveCardChanges:fe,deleteCard:we,handleKeyPress:Ke,upvoteCard:Le,downvoteCard:j,formatContentWithEmojis:Z,hasUserReactedWithEmoji:le,addReaction:Oe,addComment:T,editComment:V,deleteComment:I,toggleComments:$,isCardAuthor:ee,isCommentAuthor:pe}=H2({boardId:d,columnId:n,cardId:i,cardData:e,user:h,showNotification:o,multipleVotesAllowed:_,retrospectiveMode:O,workflowPhase:C,votesPerUser:b,getUserVoteCount:E}),B=P2(O,C),q=ee();let ne=!1;if(C&&h){const He=sS(C,O);C==="CREATION"?ne=!q:C==="GROUPING"?ne=!He:He||(ne=!0)}const Fe=O&&!rS(C,O)?{...e,votes:e.voters&&(h!=null&&h.uid)&&e.voters[h.uid]?Math.abs(e.voters[h.uid]):0,voters:e.voters&&(h!=null&&h.uid)?{[h.uid]:e.voters[h.uid]}:{},reactions:e.reactions?Object.fromEntries(Object.entries(e.reactions).filter(([He,pn])=>pn.users&&(h==null?void 0:h.uid)&&pn.users[h.uid]).map(([He,pn])=>[He,{count:1,users:{[h.uid]:!0}}])):{},comments:e.comments?Object.fromEntries(Object.entries(e.comments).filter(([He,pn])=>pn.createdBy===(h==null?void 0:h.uid))):{}}:e,tt=!k2(C,O),Ve=uo(C,O),sn=!tt||C==="CREATION"&&q,[{isDragging:Un},ta]=_O(()=>({type:"CARD",item:{cardId:i,columnId:n,cardData:e,groupId:s},canDrag:sn||Ve,collect:He=>({isDragging:He.isDragging()})}),[i,n,e,tt,s,Ve,sn]),[{isOver:Bt},na]=Vh(()=>({accept:"CARD",drop:He=>{Ve&&c&&He.cardId!==i&&c(He.cardId,i)},canDrop:()=>Ve,collect:He=>({isOver:!!He.isOver()&&!!He.canDrop()})}),[Ve,c,i]),Br=()=>{!N&&!Ve&&be()},cr=He=>{P.current=He,(sn||Ve)&&ta(He),Ve&&na(He)},Si=()=>{const He=[];return Un&&He.push("dragging"),ne&&He.push("editing-disabled"),!sn&&!Ve&&He.push("drag-disabled"),Bt&&He.push("drop-target"),Ve&&He.push("groupable"),ee()&&C===ce.CREATION&&He.push("author-editable"),Ve?He.push("cursor-grab"):N?He.push("cursor-default"):ne?C==="CREATION"&&q||!O?He.push("cursor-grab"):He.push("cursor-not-allowed"):He.push("cursor-pointer"),He.join(" ")};return v.jsx("div",{ref:cr,className:`card ${Si()}`,onClick:Br,children:N?v.jsx(q2,{editedContent:U,setEditedContent:se,handleKeyPress:Ke,saveCardChanges:fe,toggleEditMode:be,deleteCard:we}):v.jsxs(v.Fragment,{children:[v.jsx(Y2,{cardData:Fe,formatContentWithEmojis:Z,upvoteCard:Le,downvoteCard:j,votingEnabled:p,downvotingEnabled:g,userId:h==null?void 0:h.uid,retrospectiveMode:O,groupId:s,workflowPhase:C,user:h,disabledReason:B}),"          ",!(O&&C==="CREATION"&&h)&&ir(C,O)&&!s&&v.jsx(G2,{reactions:Fe.reactions,userId:h==null?void 0:h.uid,showEmojiPicker:F,setShowEmojiPicker:de,setShowComments:ae,addReaction:Oe,hasUserReactedWithEmoji:le,commentCount:Object.keys(Fe.comments||{}).length,toggleComments:$,emojiPickerPosition:z,setEmojiPickerPosition:Ne,disabled:!Ir(C,O),disabledReason:B,retrospectiveMode:O,workflowPhase:C}),!(O&&C==="CREATION"&&h)&&ir(C,O)&&!s&&te&&v.jsx(cS,{comments:Fe.comments,onAddComment:T,newComment:K,onCommentChange:ue,onEditComment:V,onDeleteComment:I,isCommentAuthor:pe,interactionsDisabled:!Ir(C,O),disabledReason:B})]})})}function F2({boardId:i,columnId:e,groupId:n,groupData:s,user:o,showNotification:c,retrospectiveMode:d=!1,workflowPhase:h="CREATION"}){const[p,g]=D.useState(!1),[_,b]=D.useState(!1),[E,O]=D.useState(""),[C,P]=D.useState({top:0,left:0}),N=D.useRef(null),U=D.useCallback(()=>!Ir(h,d),[h,d]),F=D.useCallback(be=>!!(s.reactions&&s.reactions[be]&&s.reactions[be].users&&s.reactions[be].users[o==null?void 0:o.uid]),[s.reactions,o==null?void 0:o.uid]),te=D.useCallback(be=>{var fe,we;return((we=(fe=s.reactions)==null?void 0:fe[be])==null?void 0:we.count)||0},[s.reactions]),K=D.useCallback(be=>{const fe=Ee(Se,`boards/${i}/columns/${e}/groups/${n}/reactions/${be}/users/${o==null?void 0:o.uid}`),we=Ee(Se,`boards/${i}/columns/${e}/groups/${n}/reactions/${be}/count`);return{userRef:fe,countRef:we}},[i,e,n,o==null?void 0:o.uid]),z=D.useCallback(async(be,fe)=>{if(be.stopPropagation(),!i||!o)return;if(U()){kn(h,d)?c("Interactions are now frozen - no more changes allowed"):c("Reactions are disabled until cards are revealed");return}const{userRef:we,countRef:Ke}=K(fe),Le=F(fe);try{if(Le){await $t(we);const j=Math.max(0,te(fe)-1);await Ae(Ke,j),c("Your reaction removed")}else{await Ae(we,!0);const j=te(fe)+1;await Ae(Ke,j),c("Reaction added")}}catch(j){console.error("Error managing reaction:",j)}},[i,o,K,F,te,c,U,h,d]),se=D.useCallback(async()=>{if(!i||!E.trim())return;if(U()){kn(h,d)?c("Interactions are now frozen - no more changes allowed"):c("Comments are disabled until cards are revealed");return}const be=Hs(),fe=Ee(Se,`boards/${i}/columns/${e}/groups/${n}/comments/${be}`),we={content:E.trim(),createdBy:o.uid,createdAt:Date.now()};try{await Ae(fe,we),O(""),c("Comment added")}catch(Ke){console.error("Error adding comment:",Ke),c("Error adding comment")}},[i,e,n,E,o,c,U,h,d]),de=D.useCallback(async(be,fe)=>{if(!i||!fe.trim())return;if(U()){kn(h,d)?c("Interactions are now frozen - no more changes allowed"):c("Comments are disabled until cards are revealed");return}const we=Ee(Se,`boards/${i}/columns/${e}/groups/${n}/comments/${be}/content`);try{await Ae(we,fe.trim()),c("Comment updated")}catch(Ke){console.error("Error updating comment:",Ke),c("Error updating comment")}},[i,e,n,c,U,h,d]),ae=D.useCallback(async be=>{if(!i)return;if(U()){kn(h,d)?c("Interactions are now frozen - no more changes allowed"):c("Comments are disabled until cards are revealed");return}const fe=Ee(Se,`boards/${i}/columns/${e}/groups/${n}/comments/${be}`);try{await $t(fe),c("Comment deleted")}catch(we){console.error("Error deleting comment:",we),c("Error deleting comment")}},[i,e,n,c,U,h,d]),ue=D.useCallback(()=>{b(!_),g(!1)},[_]),Ne=D.useCallback(be=>(be==null?void 0:be.createdBy)===(o==null?void 0:o.uid),[o==null?void 0:o.uid]);return{showEmojiPicker:p,showComments:_,newComment:E,emojiPickerPosition:C,emojiButtonRef:N,setShowEmojiPicker:g,setShowComments:b,setNewComment:O,setEmojiPickerPosition:P,hasUserReactedWithEmoji:F,addReaction:z,addComment:se,editComment:de,deleteComment:ae,toggleComments:ue,isCommentAuthor:Ne}}function dS({groupId:i,groupData:e,columnId:n,columnData:s,showNotification:o,sortByVotes:c}){var V;const{boardId:d,user:h,moveCard:p,ungroupCards:g,updateGroupName:_,votingEnabled:b,downvotingEnabled:E,upvoteGroup:O,downvoteGroup:C,retrospectiveMode:P,workflowPhase:N}=rn(),U=F2({boardId:d,columnId:n,groupId:i,groupData:e,user:h,showNotification:o,retrospectiveMode:P,workflowPhase:N}),[F,te]=D.useState(e.expanded!==!1),[K,z]=D.useState(!1),[se,de]=D.useState(e.name||"Unnamed Group"),ae=D.useRef(null),Ne=P&&!rS(N,P)?{...e,votes:e.voters&&(h!=null&&h.uid)&&e.voters[h.uid]?Math.abs(e.voters[h.uid]):0,voters:e.voters&&(h!=null&&h.uid)?{[h.uid]:e.voters[h.uid]}:{},reactions:e.reactions?Object.fromEntries(Object.entries(e.reactions).filter(([I,$])=>$.users&&(h==null?void 0:h.uid)&&$.users[h.uid]).map(([I,$])=>[I,{count:1,users:{[h.uid]:!0}}])):{},comments:e.comments?Object.fromEntries(Object.entries(e.comments).filter(([I,$])=>$.createdBy===(h==null?void 0:h.uid))):{}}:e,[{isOver:be},fe]=Vh(()=>({accept:"CARD",drop:I=>{var $;if(!(($=e.cardIds)!=null&&$.includes(I.cardId))&&I.groupId!==i)return p(I.cardId,I.columnId,n,i),o("Card added to group"),{handled:!0}},collect:I=>({isOver:!!I.isOver()})}),[n,i,e.cardIds,p,o]);fe(ae);const we=I=>{I.stopPropagation(),O(n,i,e.votes||0,o)},Ke=I=>{I.stopPropagation(),C(n,i,e.votes||0,o)},Le=()=>{if(!e.cardIds||!s.cards)return[];const I=e.cardIds.map($=>{const ee=s.cards[$];return ee?{id:$,...ee}:null}).filter(Boolean);return c?I.sort(($,ee)=>(ee.votes||0)-($.votes||0)):I.sort(($,ee)=>($.created||0)-(ee.created||0))},j=I=>{de(I.target.value)},Z=()=>{d&&se.trim()&&(_(n,i,se.trim()),z(!1))},le=I=>{I.key==="Enter"?Z():I.key==="Escape"&&(z(!1),de(e.name||"Unnamed Group"))},Oe=()=>{window.confirm("Are you sure you want to ungroup these cards?")&&(g(n,i),o("Cards ungrouped"))},T=e.cardIds?e.cardIds.length:0;return v.jsxs("div",{ref:ae,className:`card-group ${be?"drag-over":""}`,children:[v.jsxs("div",{className:"card-group-header",onClick:()=>te(!F),children:[v.jsxs("div",{className:"card-group-title-section",children:[F?v.jsx(To,{size:16,className:"expand-icon"}):v.jsx(jc,{size:16,className:"expand-icon"}),K?v.jsx("input",{type:"text",value:se,onChange:j,onBlur:Z,onKeyDown:le,className:"group-name-input",autoFocus:!0,onClick:I=>I.stopPropagation()}):v.jsxs("div",{className:"group-name-container",children:[v.jsx("h3",{className:`card-group-name ${uo(N,P)?"":"non-editable"}`,onClick:I=>{I.stopPropagation(),uo(N,P)&&z(!0)},children:e.name||"Unnamed Group"}),uo(N,P)&&v.jsx("button",{className:"edit-group-name-btn",onClick:I=>{I.stopPropagation(),z(!0)},title:"Edit group name",children:v.jsx(Wh,{size:12})})]})]}),v.jsxs("div",{className:"card-group-actions",children:[b&&ir(N,P)&&v.jsx(uS,{votes:Ne.votes||0,onUpvote:we,onDownvote:Ke,showDownvoteButton:E,disabled:!Ir(N,P)}),v.jsxs("div",{className:"card-group-info",children:[v.jsx("span",{className:"card-count-badge",title:`${T} card${T!==1?"s":""}`,children:T}),Ir(N,P)&&v.jsx("button",{className:"group-action-btn",onClick:I=>{I.stopPropagation(),Oe()},title:"Ungroup cards",children:v.jsx(Kh,{size:14})})]})]})]}),ir(N,P)&&v.jsxs("div",{className:"group-interactions-section",children:[v.jsxs("div",{className:"group-interactions-left",children:[Ne.reactions&&Object.entries(Ne.reactions).map(([I,$])=>{if($.count<=0)return null;const ee=$.users&&$.users[h==null?void 0:h.uid];return v.jsxs("span",{className:`reaction-item ${ee?"user-reacted":""}`,onClick:pe=>{pe.stopPropagation(),U.addReaction(pe,I)},children:[I," ",$.count]},I)}),v.jsx("button",{className:"interaction-btn reactions-btn",onClick:I=>{var $;if(I.stopPropagation(),($=U.emojiButtonRef)!=null&&$.current){const ee=U.emojiButtonRef.current.getBoundingClientRect();U.setEmojiPickerPosition({top:ee.bottom+window.scrollY+5,left:ee.left+window.scrollX})}U.setShowEmojiPicker(!U.showEmojiPicker)},title:"Add reaction",ref:U.emojiButtonRef,children:"+"})]}),v.jsx("div",{className:"group-interactions-right",children:v.jsxs("button",{className:"interaction-btn comments-btn",onClick:I=>{I.stopPropagation(),U.toggleComments()},title:"Toggle comments",children:[v.jsx(Lc,{size:16}),Object.keys(Ne.comments||{}).length>0&&v.jsx("span",{className:"interaction-count",children:Object.keys(Ne.comments||{}).length})]})})]}),U.showEmojiPicker&&v.jsx(lS,{onEmojiSelect:U.addReaction,position:U.emojiPickerPosition,onClose:()=>U.setShowEmojiPicker(!1),hasUserReactedWithEmoji:U.hasUserReactedWithEmoji}),ir(N,P)&&U.showComments&&v.jsx("div",{className:"group-comments-section",children:v.jsx(cS,{comments:Ne.comments,onAddComment:U.addComment,newComment:U.newComment,onCommentChange:U.setNewComment,onEditComment:U.editComment,onDeleteComment:U.deleteComment,isCommentAuthor:U.isCommentAuthor,interactionsDisabled:!Ir(N,P)})}),F&&v.jsx("div",{className:"card-group-content",children:Le().length===0?v.jsxs("div",{className:"empty-group-placeholder",children:[v.jsx("span",{children:"No cards in this group"}),v.jsx("span",{children:"Drag cards here to add them"})]}):Le().map(I=>v.jsx(Xp,{cardId:I.id,cardData:I,columnId:n,groupId:i,showNotification:o},I.id))}),!F&&T>0&&v.jsx("div",{className:"card-group-preview",children:v.jsx("div",{className:`card-preview main-card ${T>1?"with-stack-shadow":""}`,style:{boxShadow:T>1?`0 2px 8px rgba(0, 0, 0, 0.15), 
                 0 1px 3px rgba(0, 0, 0, 0.1),
                 ${Array.from({length:Math.min(T-1,5)},(I,$)=>{const ee=($+1)*3;return`${ee}px ${ee}px 0 0 var(--card-bg), ${ee}px ${ee}px 0 1px var(--border-color)`}).join(", ")}`:"0 2px 8px rgba(0, 0, 0, 0.15), 0 1px 3px rgba(0, 0, 0, 0.1)"},children:v.jsx("div",{className:"card-preview-content",children:(V=Le()[0])==null?void 0:V.content})})})]})}function W2({columnId:i,columnData:e,sortByVotes:n,showNotification:s}){const{boardId:o,moveCard:c,user:d,createCardGroup:h,retrospectiveMode:p,workflowPhase:g,columns:_}=rn(),[b,E]=D.useState(e.title||"New Column"),[O,C]=D.useState(!1),[P,N]=D.useState(""),[U,F]=D.useState(!1),[te,K]=D.useState(!1),[z,se]=D.useState(""),[de,ae]=D.useState(null),ue=D.useRef(null);D.useEffect(()=>{e&&e.title!==b&&!O&&E(e.title)},[e,O,b]),D.useEffect(()=>{p&&!Pf(g,p)&&U&&F(!1)},[g,p,U]);const[{isOver:Ne},be]=Vh(()=>({accept:"CARD",drop:(B,q)=>{q.didDrop()||(B.columnId!==i?(c(B.cardId,B.columnId,i),s("Card moved successfully")):B.groupId&&(c(B.cardId,B.columnId,i,null),s("Card removed from group")))},collect:B=>({isOver:!!B.isOver()})}),[i,c,s]);be(ue);const fe=B=>{E(B.target.value)},we=()=>{if(o){const B=`boards/${o}/columns/${i}/title`,q=Ee(Se,B);Ae(q,b).then(()=>{C(!1)}).catch(()=>{})}},Ke=B=>{B.key==="Enter"&&we()},Le=()=>{if(o&&window.confirm("Are you sure you want to delete this column and all its cards?")){const B=Ee(Se,`boards/${o}/columns/${i}`);$t(B).then(()=>{s("Column deleted")}).catch(()=>{})}},j=()=>{F(!0),N("")},Z=()=>{F(!1),N("")},le=()=>{o&&P.trim()?L2(o,i,P,d).then(()=>{s("Card added"),Z()}).catch(B=>{B.message==="Card content is required"&&(Z(),s("Empty cards are not allowed"))}):(Z(),s("Empty cards are not allowed"))},Oe=B=>{B.key==="Enter"&&!B.shiftKey?(B.preventDefault(),le()):B.key==="Escape"&&Z()},T=()=>{if(!e.cards)return[];const B=Object.entries(e.cards).filter(([q,ne])=>!ne.groupId).map(([q,ne])=>({id:q,...ne}));return n?B.sort((q,ne)=>(ne.votes||0)-(q.votes||0)):B.sort((q,ne)=>(q.created||0)-(ne.created||0))},V=()=>{if(!e.groups)return[];const B=Object.entries(e.groups).map(([q,ne])=>({id:q,...ne}));return n?B.sort((q,ne)=>(ne.votes||0)-(q.votes||0)):B.sort((q,ne)=>(q.created||0)-(ne.created||0))},I=()=>{const B=T().map(ne=>({type:"card",data:ne})),q=V().map(ne=>({type:"group",data:ne}));return n?[...B,...q].sort((ne,Ce)=>(Ce.data.votes||0)-(ne.data.votes||0)):[...q,...B].sort((Ce,Fe)=>(Ce.data.created||0)-(Fe.data.created||0))},$=(B,q)=>{if(!uo(g,p)||B===q)return;let ne=null;if(Object.keys(_||{}).forEach(Ce=>{_[Ce].cards&&_[Ce].cards[B]&&(ne=Ce)}),!ne){s("Error: Could not find dragged card");return}ae({draggedCardId:B,targetCardId:q,draggedCardColumn:ne,targetCardColumn:i}),K(!0),se("")},ee=()=>{var B;if(!z.trim()){s("Please enter a group name");return}if(de){const{draggedCardId:q,targetCardId:ne,draggedCardColumn:Ce,targetCardColumn:Fe}=de,tt=(B=e.cards)==null?void 0:B[ne],Ve=tt==null?void 0:tt.created;Ce===Fe?(h(i,[q,ne],z.trim(),Ve),s(`Group "${z.trim()}" created`)):c(q,Ce,Fe,null).then(()=>{h(Fe,[q,ne],z.trim(),Ve),s(`Card moved and group "${z.trim()}" created`)}).catch(()=>{s("Error creating group across columns")})}K(!1),se(""),ae(null)},pe=()=>{K(!1),se(""),ae(null)};return v.jsxs("div",{className:"column",children:[v.jsxs("div",{className:"column-header",children:[O?v.jsx("input",{type:"text",value:b,onChange:fe,onBlur:we,onKeyPress:Ke,className:"column-title-input",autoFocus:!0}):v.jsx("h2",{className:"column-title",onClick:()=>C(!0),children:b}),v.jsx("div",{className:"column-actions",children:Pf(g,p)&&v.jsx("button",{className:"icon-button",title:"Delete Column",onClick:Le,children:v.jsx(rp,{})})})]}),v.jsxs("div",{ref:ue,className:`column-content ${Ne?"drag-over":""}`,children:[V().length===0&&T().length===0&&v.jsxs("div",{className:"empty-column-placeholder",children:[v.jsx("span",{children:"No cards yet"}),v.jsx("span",{children:"Add a card to get started"})]}),I().map(B=>B.type==="group"?v.jsx(dS,{groupId:B.data.id,groupData:B.data,columnId:i,columnData:e,sortByVotes:n,showNotification:s},B.data.id):v.jsx(Xp,{cardId:B.data.id,cardData:B.data,columnId:i,showNotification:s,onCardDropOnCard:$},B.data.id)),U?v.jsxs("div",{className:"inline-card-form",children:[v.jsx("textarea",{placeholder:"Enter card content...",value:P,onChange:B=>N(B.target.value),onKeyDown:Oe,className:"inline-card-textarea",autoFocus:!0}),v.jsxs("div",{className:"inline-card-actions",children:[v.jsx("button",{className:"btn primary-btn",onClick:le,children:"Add"}),v.jsx("button",{className:"btn secondary-btn",onClick:Z,children:"Cancel"})]})]}):Pf(g,p)&&v.jsxs("button",{className:"add-card",onClick:j,children:[v.jsx(Pc,{}),"Add Card"]}),te&&v.jsx("div",{className:"group-modal-overlay",onClick:pe,children:v.jsxs("div",{className:"group-modal",onClick:B=>B.stopPropagation(),children:[v.jsx("h3",{children:"Create Card Group"}),v.jsx("p",{children:"Creating a group with 2 cards"}),v.jsx("input",{type:"text",placeholder:"Enter group name...",value:z,onChange:B=>se(B.target.value),onKeyDown:B=>{B.key==="Enter"&&ee(),B.key==="Escape"&&pe()},className:"group-name-input",autoFocus:!0}),v.jsxs("div",{className:"group-modal-actions",children:[v.jsx("button",{className:"btn primary-btn",onClick:ee,children:"Create Group"}),v.jsx("button",{className:"btn secondary-btn",onClick:pe,children:"Cancel"})]})]})})]})]})}const Q2=({isOpen:i,onClose:e,showNotification:n})=>{const[s,o]=D.useState("markdown"),[c,d]=D.useState(""),{boardTitle:h,columns:p}=rn(),g=D.useCallback(()=>{const O={title:h||"Untitled Board",columns:[]};return!p||Object.keys(p).length===0||Object.entries(p).sort((P,N)=>P[0].localeCompare(N[0])).forEach(([P,N])=>{if(!N)return;const U={title:N.title||"Untitled Column",cards:[]},F=[],te=[];N.groups&&Object.entries(N.groups).forEach(([K,z])=>{if(!z||!z.cardIds)return;const se={name:z.name,votes:z.votes||0,comments:[],reactions:[],cards:[]};z.comments&&Object.keys(z.comments).length>0&&Object.entries(z.comments).forEach(([de,ae])=>{ae&&ae.content&&se.comments.push(ae.content)}),z.reactions&&Object.keys(z.reactions).length>0&&Object.entries(z.reactions).filter(([ae,ue])=>((ue==null?void 0:ue.count)||0)>0).forEach(([ae,ue])=>{if(ae){const Ne=(ue==null?void 0:ue.count)||0;se.reactions.push({emoji:ae,count:Ne})}}),z.cardIds.forEach(de=>{var ue;const ae=(ue=N.cards)==null?void 0:ue[de];if(ae){const Ne={content:ae.content,votes:ae.votes||0,comments:[],reactions:[]};ae.comments&&Object.keys(ae.comments).length>0&&Object.entries(ae.comments).forEach(([be,fe])=>{fe&&fe.content&&Ne.comments.push(fe.content)}),ae.reactions&&Object.keys(ae.reactions).length>0&&Object.entries(ae.reactions).filter(([fe,we])=>((we==null?void 0:we.count)||0)>0).forEach(([fe,we])=>{if(fe){const Ke=(we==null?void 0:we.count)||0;Ne.reactions.push({emoji:fe,count:Ke})}}),se.cards.push(Ne)}}),F.push(se)}),N.cards&&Object.entries(N.cards).forEach(([K,z])=>{if(!z.groupId){const se={content:z.content,votes:z.votes||0,comments:[],reactions:[]};z.comments&&Object.keys(z.comments).length>0&&Object.entries(z.comments).forEach(([de,ae])=>{ae&&ae.content&&se.comments.push(ae.content)}),z.reactions&&Object.keys(z.reactions).length>0&&Object.entries(z.reactions).filter(([ae,ue])=>((ue==null?void 0:ue.count)||0)>0).forEach(([ae,ue])=>{if(ae){const Ne=(ue==null?void 0:ue.count)||0;se.reactions.push({emoji:ae,count:Ne})}}),te.push(se)}}),U.groups=F,U.cards=te,O.columns.push(U)}),O},[p,h]),_=D.useCallback(()=>{const O=g();let C=`# ${O.title}

`;return O.columns.length===0?`${C}No columns found.`:(O.columns.forEach(P=>{C+=`## ${P.title}

`,P.groups&&P.groups.length>0&&P.groups.forEach(N=>{const U=N.votes;C+=`### 📁 ${N.name} ${U>0?`(${U} votes)`:""}

`,N.comments.length>0&&(C+=`**Group Comments:**
`,N.comments.forEach(F=>{C+=`- ${F}
`}),C+=`
`),N.reactions.length>0&&(C+="**Group Reactions:** ",N.reactions.forEach((F,te,K)=>{C+=`${F.emoji} (${F.count})${te<K.length-1?", ":""}`}),C+=`

`),N.cards.forEach(F=>{const te=F.votes;C+=`- **${F.content}** ${te>0?`(${te} votes)`:""}
`,F.comments.length>0&&(C+=`  - **Comments:**
`,F.comments.forEach(K=>{C+=`    - ${K}
`})),F.reactions.length>0&&(C+="  - **Reactions:** ",F.reactions.forEach((K,z,se)=>{C+=`${K.emoji} (${K.count})${z<se.length-1?", ":""}`}),C+=`
`),C+=`
`}),C+=`
`}),P.cards.forEach(N=>{const U=N.votes;C+=`### ${N.content} ${U>0?`(${U} votes)`:""}

`,N.comments.length>0&&(C+=`**Comments:**

`,N.comments.forEach(F=>{C+=`- ${F}
`}),C+=`
`),N.reactions.length>0&&(C+="**Reactions:** ",N.reactions.forEach((F,te,K)=>{C+=`${F.emoji} (${F.count})${te<K.length-1?", ":""}`}),C+=`

`)}),C+=`
`}),C)},[g]),b=D.useCallback(()=>{const O=g();let C=`${O.title}

`;return O.columns.length===0?`${C}No columns found.`:(O.columns.forEach(P=>{const N=P.title;C+=`${N}
${"=".repeat(N.length)}

`,P.groups&&P.groups.length>0&&P.groups.forEach(U=>{const F=U.votes,te=`📁 ${U.name} ${F>0?`(${F} votes)`:""}`;C+=`${te}
${"-".repeat(te.length)}

`,U.comments.length>0&&(C+=`Group Comments:
`,U.comments.forEach(K=>{C+=`- ${K}
`}),C+=`
`),U.reactions.length>0&&(C+="Group Reactions: ",U.reactions.forEach((K,z,se)=>{C+=`${K.emoji} (${K.count})${z<se.length-1?", ":""}`}),C+=`

`),U.cards.forEach(K=>{const z=K.votes,se=`  • ${K.content} ${z>0?`(${z} votes)`:""}`;C+=`${se}
`,K.comments.length>0&&(C+=`    Comments:
`,K.comments.forEach(de=>{C+=`    - ${de}
`})),K.reactions.length>0&&(C+="    Reactions: ",K.reactions.forEach((de,ae,ue)=>{C+=`${de.emoji} (${de.count})${ae<ue.length-1?", ":""}`}),C+=`
`),C+=`
`}),C+=`
`}),P.cards.forEach(U=>{const F=U.votes,te=U.content;C+=`${te} ${F>0?`(${F} votes)`:""}
${"-".repeat(te.length)}

`,U.comments.length>0&&(C+=`Comments:
`,U.comments.forEach(K=>{C+=`- ${K}
`}),C+=`
`),U.reactions.length>0&&(C+="Reactions: ",U.reactions.forEach((K,z,se)=>{C+=`${K.emoji} (${K.count})${z<se.length-1?", ":""}`}),C+=`

`)}),C+=`
`}),C)},[g]);D.useEffect(()=>{if(i)try{d(s==="markdown"?_():b())}catch{d("Error generating export. Please try again.")}},[i,s,p,h,_,b]);const E=()=>{navigator.clipboard.writeText(c).then(()=>{n&&n("Copied to clipboard"),e()}).catch(()=>{})};return i?v.jsx("div",{className:"modal-overlay",children:v.jsxs("div",{className:"modal-container",children:[v.jsxs("div",{className:"modal-header",children:[v.jsx("h2",{children:"Export Board"}),v.jsx("button",{className:"close-button",onClick:e,children:"×"})]}),v.jsxs("div",{className:"modal-body",children:[v.jsxs("div",{className:"format-selector",children:[v.jsx("div",{className:"format-option",children:v.jsxs("label",{className:`format-label ${s==="markdown"?"selected":""}`,children:[v.jsx("input",{type:"radio",value:"markdown",checked:s==="markdown",onChange:()=>o("markdown"),className:"format-radio"}),v.jsx("span",{className:"format-name",children:"Markdown"})]})}),v.jsx("div",{className:"format-option",children:v.jsxs("label",{className:`format-label ${s==="plaintext"?"selected":""}`,children:[v.jsx("input",{type:"radio",value:"plaintext",checked:s==="plaintext",onChange:()=>o("plaintext"),className:"format-radio"}),v.jsx("span",{className:"format-name",children:"Plain Text"})]})})]}),v.jsx("div",{className:"export-preview",children:v.jsx("textarea",{readOnly:!0,value:c,className:"export-content"})})]}),v.jsxs("div",{className:"modal-footer",children:[v.jsxs("button",{className:"primary-button",onClick:E,children:[v.jsx(Fh,{size:16}),"Copy to Clipboard"]}),v.jsx("button",{className:"secondary-button",onClick:e,children:"Cancel"})]})]})}):null},no=[{id:"default",name:"Default",description:"Simple task tracking for any project",columns:["To Do","In Progress","Done"],icon:"📋",tags:["workflow","kanban","basic"]},{id:"custom",name:"Custom",description:"Create your own board structure from scratch",columns:["Untitled"],icon:"✏️",tags:["custom","blank","flexible"]},{id:"lean-coffee",name:"Lean Coffee",description:"Democratically driven meeting agenda format",columns:["Topics","Discussing","Done"],icon:"☕",tags:["discussion","meeting","agenda"]},{id:"retro",name:"Retrospective",description:"Reflect on past work and plan improvements",columns:["Went Well","Could Improve","Action Items"],icon:"🔄",tags:["agile","reflection","team"]},{id:"feelings-improvements",name:"Feelings / Improvements",description:"Focus on emotional impact and concrete solutions",columns:["Feelings","Improvements"],icon:"❤️",tags:["feedback","emotions","solutions"]},{id:"daki",name:"DAKI",description:"Evaluate current processes and identify changes",columns:["Drop","Add","Keep","Improve"],icon:"✨",tags:["reflection","processes","practices"]},{id:"glad-sad-mad",name:"Glad Sad Mad",description:"Categorize feedback by emotional response",columns:["Glad","Sad","Mad"],icon:"😊",tags:["emotions","reflection","feedback"]},{id:"start-stop-continue",name:"Start Stop Continue",description:"Focus on actionable changes to team behavior",columns:["Start","Stop","Continue"],icon:"🚦",tags:["action","feedback","improvement"]},{id:"4ls",name:"4 Ls",description:"Comprehensive retrospective with learning focus",columns:["Liked","Learned","Lacked","Longed For"],icon:"📝",tags:["reflection","learning","retrospective"]},{id:"swot",name:"SWOT",description:"Analyze internal and external factors for planning",columns:["Strengths","Weaknesses","Opportunities","Threats"],icon:"📊",tags:["strategy","planning","analysis"]},{id:"six-thinking-hats",name:"Six Thinking Hats",description:"Examine ideas from multiple mental perspectives",columns:["Facts","Emotions","Critical","Optimistic","Creative","Process"],icon:"🎩",tags:["thinking","perspectives","discussion"]},{id:"moscow",name:"MoSCoW",description:"Categorize features by implementation priority",columns:["Must Have","Should Have","Could Have","Won't Have"],icon:"📌",tags:["prioritization","planning","requirements"]},{id:"five-whys",name:"Five Whys",description:"Iteratively identify the underlying causes of issues",columns:["Problem","Why 1","Why 2","Why 3","Why 4","Why 5","Root Cause"],icon:"🔍",tags:["problem solving","analysis","causes"]},{id:"eisenhower",name:"Eisenhower Matrix",description:"Prioritize tasks based on urgency and importance",columns:["Urgent & Important","Important & Not Urgent","Urgent & Not Important","Neither"],icon:"⏱️",tags:["decision","prioritization","time management"]},{id:"sailboat",name:"Sailboat Retrospective",description:"Visualize team progress with nautical metaphors",columns:["Wind (Helps)","Anchors (Hinders)","Rocks (Risks)","Island (Goals)"],icon:"⛵",tags:["retrospective","visual","team"]},{id:"fishbone",name:"Fishbone",description:"Identify causes across different categories",columns:["People","Process","Equipment","Materials","Environment","Management"],icon:"🐟",tags:["analysis","causes","problem solving"]},{id:"feedback-grid",name:"Feedback Grid",description:"Balanced approach to feedback with action items",columns:["What Went Well","What Could Be Improved","Questions","Ideas"],icon:"🔄",tags:["feedback","collection","reflection"]},{id:"starfish",name:"Starfish Retrospective",description:"Detailed action-oriented team improvement model",columns:["Keep Doing","Less Of","More Of","Start Doing","Stop Doing"],icon:"⭐",tags:["retrospective","actions","team"]},{id:"kpt",name:"KPT",description:"Concise approach for identifying issues and solutions",columns:["Keep","Problem","Try"],icon:"🔑",tags:["retrospective","simple","actions"]},{id:"pro-con",name:"Pros & Cons",description:"Evaluate options and make informed decisions",columns:["Pros","Cons","Decisions"],icon:"⚖️",tags:["decision","evaluation","analysis"]},{id:"user-journey",name:"User Journey Map",description:"Map out each stage of the user experience",columns:["Awareness","Consideration","Decision","Onboarding","Retention","Advocacy"],icon:"🗺️",tags:["ux","design","customer"]},{id:"three-horizons",name:"Three Horizons",description:"Strategic planning across different time frames",columns:["Horizon 1 (Now)","Horizon 2 (Next)","Horizon 3 (Future)"],icon:"🔭",tags:["strategy","planning","innovation"]},{id:"impact-effort",name:"Impact/Effort Matrix",description:"Prioritize tasks based on impact and required effort",columns:["High Impact/Low Effort","High Impact/High Effort","Low Impact/Low Effort","Low Impact/High Effort"],icon:"📊",tags:["prioritization","planning","efficiency"]},{id:"assumption-mapping",name:"Assumption Mapping",description:"Identify and test critical business assumptions",columns:["Known Knowns","Known Unknowns","Unknown Knowns","Unknown Unknowns"],icon:"🧠",tags:["strategy","risk","planning"]},{id:"customer-problem-solution",name:"Customer-Problem-Solution",description:"Framework for validating business model assumptions",columns:["Customer Segments","Problems","Solutions","Value Propositions"],icon:"💡",tags:["business","startup","validation"]},{id:"work-breakdown",name:"Work Breakdown Structure",description:"Hierarchical decomposition of project deliverables",columns:["Project","Major Deliverables","Sub-deliverables","Work Packages","Tasks"],icon:"📑",tags:["project management","planning","organization"]},{id:"five-stage-design",name:"Five Stage Design Thinking",description:"Human-centered approach to innovation",columns:["Empathize","Define","Ideate","Prototype","Test"],icon:"🎨",tags:["design","innovation","process"]},{id:"rose-thorn-bud",name:"Rose, Thorn, Bud",description:"Review positives, challenges, and opportunities",columns:["Rose (Positive)","Thorn (Challenge)","Bud (Opportunity)"],icon:"🌹",tags:["feedback","reflection","opportunity"]},{id:"four-quadrant-feedback",name:"Four Quadrant Feedback",description:"Balanced personal or project feedback",columns:["Continue","Consider","Start","Stop"],icon:"📝",tags:["feedback","personal","development"]}],K2=({isOpen:i,onClose:e,onSelectTemplate:n})=>{const[s,o]=D.useState("default"),[c,d]=D.useState(""),[h,p]=D.useState(no);D.useEffect(()=>{if(!c.trim()){p(no);return}const N=c.toLowerCase().trim(),U=no.filter(F=>F.name.toLowerCase().includes(N)||F.description.toLowerCase().includes(N)||F.tags.some(te=>te.toLowerCase().includes(N))||F.columns.some(te=>te.toLowerCase().includes(N)));p(U)},[c]);const g=N=>{o(N)},_=()=>{const N=no.find(U=>U.id===s);N&&n(N.columns,N.name)},b=N=>{d(N.target.value)},E=X.useRef(null),O=X.useRef(null),C=N=>{N.key==="Enter"&&N.target.classList.contains("template-search-input")?h.length>0&&(o(h[0].id),N.preventDefault()):N.key==="Enter"&&!N.target.classList.contains("template-search-input")?(_(),N.preventDefault()):N.key==="Escape"?c?(d(""),E.current&&E.current.focus(),N.preventDefault()):e():N.key==="/"&&!N.target.classList.contains("template-search-input")&&E.current&&(E.current.focus(),N.preventDefault())};if(X.useEffect(()=>{i&&E.current&&setTimeout(()=>{E.current.focus()},100)},[i]),X.useEffect(()=>{if(i)return document.addEventListener("keydown",C),()=>{document.removeEventListener("keydown",C)}},[i,s,c,h]),!i)return null;const P=(N,U)=>{if(!U.trim())return N;try{const F=new RegExp(`(${U.trim()})`,"gi");return N.replace(F,"<mark>$1</mark>")}catch{return N}};return v.jsx("div",{className:"modal-overlay",children:v.jsxs("div",{className:"modal-container template-modal",children:[v.jsxs("div",{className:"modal-header",children:[v.jsx("h2",{children:"Choose a Board Template"}),v.jsx("button",{className:"close-button",onClick:e,children:"×"})]}),v.jsxs("div",{className:"modal-body template-selector",children:[v.jsxs("div",{className:"template-search",children:[v.jsxs("div",{className:"search-input-container",children:[v.jsx("input",{type:"text",placeholder:"Search templates by name, description, or columns... (Press / to focus)",value:c,onChange:b,className:"template-search-input",autoFocus:!0,ref:E}),c&&v.jsx("button",{className:"clear-search",onClick:()=>d(""),title:"Clear search",children:"×"})]}),v.jsx("div",{className:"search-results-count",children:c?h.length===0?v.jsx("div",{className:"no-results",children:"No templates match your search"}):v.jsxs("div",{className:"results-count",children:["Found ",h.length," template",h.length!==1?"s":""]}):null})]}),v.jsx("div",{className:"template-grid",children:h.map(N=>{const U=c?v.jsx("span",{dangerouslySetInnerHTML:{__html:P(N.name,c)}}):N.name,F=c?v.jsx("span",{dangerouslySetInnerHTML:{__html:P(N.description,c)}}):N.description;return v.jsxs("div",{className:`template-card ${s===N.id?"selected":""} ${c?"search-active":""}`,onClick:()=>g(N.id),children:[v.jsx("div",{className:"template-icon",children:N.icon}),v.jsxs("div",{className:"template-info",children:[v.jsx("h3",{children:U}),v.jsx("p",{children:F})]}),v.jsxs("div",{className:"template-details",children:[v.jsx("div",{className:"template-columns",children:N.columns.map((te,K)=>v.jsx("span",{className:"template-column-pill",children:c?v.jsx("span",{dangerouslySetInnerHTML:{__html:P(te,c)}}):te},K))}),v.jsx("div",{className:"template-tags",children:N.tags.map((te,K)=>v.jsx("span",{className:`template-tag ${c&&te.toLowerCase().includes(c.toLowerCase())?"highlight":""}`,children:te},K))})]})]},N.id)})})]}),v.jsxs("div",{className:"modal-footer",children:[v.jsx("button",{className:"primary-button",onClick:_,ref:O,children:"Create Board"}),v.jsx("button",{className:"secondary-button",onClick:e,children:"Cancel"})]})]})})},X2=()=>{const{getPollStats:i}=rn(),e=i(),n=c=>e.totalVotes===0?0:c/e.totalVotes*100,o=(c=>c>=4.5?{text:"Extremely Effective",color:"#22c55e"}:c>=3.5?{text:"Very Effective",color:"#84cc16"}:c>=2.5?{text:"Moderately Effective",color:"#eab308"}:c>=1.5?{text:"Slightly Effective",color:"#f97316"}:{text:"Not Effective",color:"#ef4444"})(e.average);return v.jsxs("div",{className:"poll-results",children:[v.jsxs("div",{className:"results-header",children:[v.jsx("h3",{children:"Retrospective Effectiveness Results"}),v.jsxs("div",{className:"participation-stats",children:[v.jsx(Co,{size:16}),v.jsxs("span",{children:[e.totalVotes," participant",e.totalVotes!==1?"s":""]})]})]}),e.totalVotes>0?v.jsxs(v.Fragment,{children:[v.jsxs("div",{className:"overall-score",children:[v.jsxs("div",{className:"score-display",children:[v.jsxs("div",{className:"average-rating",children:[v.jsx("span",{className:"score-number",children:e.average.toFixed(1)}),v.jsx("span",{className:"score-separator",children:"/"}),v.jsx("span",{className:"score-max",children:"5.0"})]}),v.jsx("div",{className:"stars-display",children:[1,2,3,4,5].map(c=>v.jsx(xr,{size:20,fill:e.average>=c?"#ffd700":"none",color:e.average>=c?"#ffd700":"#ccc"},c))})]}),v.jsx("div",{className:"effectiveness-label",style:{color:o.color},children:o.text})]}),v.jsxs("div",{className:"distribution-chart",children:[v.jsx("h4",{children:"Vote Distribution"}),v.jsx("div",{className:"chart",children:e.distribution.map((c,d)=>{const h=d+1,p=(c/e.totalVotes*100).toFixed(1);return v.jsxs("div",{className:"chart-row",children:[v.jsxs("div",{className:"rating-label",children:[v.jsx(xr,{size:14,fill:"#ffd700",color:"#ffd700"}),v.jsx("span",{children:h})]}),v.jsx("div",{className:"bar-container",children:v.jsx("div",{className:"bar",style:{width:`${n(c)}%`,backgroundColor:h>=4?"#22c55e":h>=3?"#84cc16":h>=2?"#eab308":"#ef4444"}})}),v.jsxs("div",{className:"count-label",children:[v.jsx("span",{className:"count",children:c}),v.jsxs("span",{className:"percentage",children:["(",p,"%)"]})]})]},h)})})]}),v.jsx("div",{className:"results-summary",children:v.jsxs("div",{className:"summary-cards",children:[v.jsxs("div",{className:"summary-card",children:[v.jsx("h5",{children:"Highest Rating"}),v.jsxs("div",{className:"summary-value",children:[Math.max(...e.distribution.map((c,d)=>c>0?d+1:0)),v.jsx(xr,{size:14,fill:"#ffd700",color:"#ffd700"})]})]}),v.jsxs("div",{className:"summary-card",children:[v.jsx("h5",{children:"Most Common"}),v.jsxs("div",{className:"summary-value",children:[e.distribution.indexOf(Math.max(...e.distribution))+1,v.jsx(xr,{size:14,fill:"#ffd700",color:"#ffd700"})]})]}),v.jsxs("div",{className:"summary-card",children:[v.jsx("h5",{children:"Response Rate"}),v.jsx("div",{className:"summary-value",children:"100%"})]})]})})]}):v.jsxs("div",{className:"no-votes",children:[v.jsx("p",{children:"No votes have been submitted yet."}),v.jsx("p",{children:"Participants need to complete the poll phase first."})]})]})},Z2=()=>{const{userPollVote:i,submitPollVote:e,getPollStats:n,activeUsers:s}=rn(),[o,c]=D.useState(0),d=C=>{e(C)},h=C=>{c(C)},p=()=>{c(0)},g=C=>({1:"Not effective at all",2:"Slightly effective",3:"Moderately effective",4:"Very effective",5:"Extremely effective"})[C]||"",_=()=>o||i||0,E=n().totalVotes,O=s>0?Math.round(E/s*100):0;return v.jsxs("div",{className:"poll-voting",children:[v.jsxs("div",{className:"poll-question",children:[v.jsx("h3",{children:"How effective was this retrospective?"}),v.jsx("p",{children:"Rate from 1 (not effective) to 5 (extremely effective)"})]}),v.jsxs("div",{className:"voting-progress",children:[v.jsxs("div",{className:"progress-header",children:[v.jsxs("div",{className:"progress-title",children:[v.jsx(Co,{size:16}),v.jsx("span",{children:"Voting Progress"})]}),v.jsxs("div",{className:"progress-stats",children:[E," of ",s," participants have voted (",O,"%)"]})]}),v.jsx("div",{className:"progress-bar",children:v.jsx("div",{className:"progress-fill",style:{width:`${O}%`}})}),O===100&&s>0&&v.jsx("div",{className:"progress-complete",children:"✓ All participants have voted! Ready to view results."})]}),v.jsxs("div",{className:"rating-container",children:[v.jsx("div",{className:"stars",children:[1,2,3,4,5].map(C=>v.jsx("button",{className:`star-button ${_()>=C?"active":""}`,onClick:()=>d(C),onMouseEnter:()=>h(C),onMouseLeave:p,disabled:!1,children:v.jsx(xr,{size:32,fill:_()>=C?"#ffd700":"none",color:_()>=C?"#ffd700":"#ccc"})},C))}),v.jsxs("div",{className:"rating-info",children:[v.jsx("div",{className:"rating-number",children:_()>0&&v.jsxs("span",{className:"current-rating",children:[_(),"/5"]})}),v.jsx("div",{className:"rating-description",children:_()>0&&g(_())})]})]}),i&&v.jsxs("div",{className:"vote-status",children:[v.jsxs("p",{className:"vote-submitted",children:["✓ Your vote has been submitted: ",i,"/5 stars"]}),v.jsx("p",{className:"vote-change-info",children:"You can change your vote by clicking a different star rating."})]}),!i&&v.jsx("div",{className:"vote-prompt",children:v.jsx("p",{children:"Click on a star to submit your rating"})})]})},J2=({showNotification:i})=>{const{workflowPhase:e,resultsViewIndex:n,navigateResults:s,getSortedItemsForResults:o,columns:c,getTotalVotes:d}=rn();if(e!==ce.RESULTS)return null;const h=o(),p=h[n],g=h.length;if(g===0)return v.jsxs("div",{className:"results-view",children:[v.jsx("div",{className:"results-header",children:v.jsx("h2",{children:"Results"})}),v.jsx("div",{className:"results-content",children:v.jsx("div",{className:"no-results",children:v.jsx("p",{children:"No cards or groups to display in results."})})})]});if(!p)return v.jsxs("div",{className:"results-view",children:[v.jsx("div",{className:"results-header",children:v.jsx("h2",{children:"Results"})}),v.jsx("div",{className:"results-content",children:v.jsx("div",{className:"no-results",children:v.jsx("p",{children:"Invalid result index."})})})]});const _=c[p.columnId];return v.jsxs("div",{className:"results-view",children:[v.jsx("div",{className:"results-header",children:v.jsx("h2",{children:"Results"})}),v.jsxs("div",{className:"results-navigation",children:[v.jsxs("button",{className:"btn navigation-btn",onClick:()=>s("prev"),disabled:n===0,title:"Previous result",children:[v.jsx(qh,{size:20}),"Previous"]}),v.jsxs("div",{className:"results-counter",children:[v.jsx("span",{className:"current-position",children:n+1}),v.jsx("span",{className:"divider",children:" / "}),v.jsx("span",{className:"total-count",children:g})]}),v.jsxs("button",{className:"btn navigation-btn",onClick:()=>s("next"),disabled:n===g-1,title:"Next result",children:["Next",v.jsx(jc,{size:20})]})]}),v.jsx("div",{className:"results-content",children:v.jsxs("div",{className:"result-item",children:[v.jsxs("div",{className:"result-meta",children:[v.jsx("div",{className:"result-type",children:p.type==="group"?"Group":"Card"}),v.jsxs("div",{className:"result-votes",children:[p.votes," out of ",d()," total vote",d()!==1?"s":""]}),v.jsxs("div",{className:"result-column",children:["from ",(_==null?void 0:_.title)||"Unknown Column"]})]}),v.jsx("div",{className:"result-display",children:p.type==="group"?v.jsx(dS,{groupId:p.id,groupData:p.data,columnId:p.columnId,columnData:_,sortByVotes:!0,showNotification:i},p.id):v.jsx(Xp,{cardId:p.id,cardData:p.data,columnId:p.columnId,showNotification:i},p.id)})]})})]})},fS=()=>{const{votingEnabled:i,retrospectiveMode:e,workflowPhase:n,user:s,activeUsers:o}=rn(),c=i&&e&&ir(n,e);return{isUserVoteCounterVisible:c&&!!s,isTotalVoteCounterVisible:c&&!!o,isBaseVisible:c,votingEnabled:i,retrospectiveMode:e,workflowPhase:n,user:s,activeUsers:o}},hS=({className:i,label:e,value:n,total:s,isDepleted:o=!1,testId:c})=>{const d=s!==void 0?`${n}/${s}`:n,h=o?`${i}-depleted`:"";return v.jsx("div",{className:i,"data-testid":c,children:v.jsxs("div",{className:`${i}-content`,children:[v.jsx("span",{className:`${i}-label`,children:e}),v.jsx("span",{className:`${i}-value ${h}`,children:d})]})})},ek=()=>{const{isTotalVoteCounterVisible:i}=fS(),{votesPerUser:e,getTotalVotesRemaining:n,activeUsers:s}=rn();if(!i)return null;const o=n(),c=s*e;return v.jsx(hS,{className:"total-vote-counter",label:"Total votes remaining:",value:o,total:c,isDepleted:o===0})};function tk(){const{activeUsers:i,boardId:e}=rn();return e?v.jsxs("div",{className:"user-counter",title:`${i} ${i===1?"user":"users"} viewing this board`,children:[v.jsx(Co,{size:16}),v.jsx("span",{className:"user-count",children:i})]}):null}const nk=()=>{const{isUserVoteCounterVisible:i}=fS(),{user:e,votesPerUser:n,getUserVoteCount:s}=rn();if(!i)return null;const o=s(e.uid),c=Math.max(0,n-o);return v.jsx(hS,{className:"vote-counter",label:"Your votes remaining:",value:c,total:n,isDepleted:c===0})},ik=({isOpen:i,onClose:e,onConfirm:n,currentLimit:s=3})=>{const[o,c]=D.useState(s);if(!i)return null;const d=()=>{n(o),e()},h=p=>{const g=parseInt(p.target.value);!isNaN(g)&&g>=1&&g<=20&&c(g)};return v.jsx("div",{className:"modal-overlay",onClick:e,children:v.jsxs("div",{className:"modal-container",onClick:p=>p.stopPropagation(),children:[v.jsxs("div",{className:"modal-header",children:[v.jsx("h2",{children:"Set Vote Limit"}),v.jsx("button",{className:"close-button",onClick:e,children:"×"})]}),v.jsx("div",{className:"modal-body",children:v.jsxs("div",{className:"vote-limit-content",children:[v.jsx("p",{className:"vote-limit-description",children:"How many votes should each user be allowed to cast during the voting phase?"}),v.jsxs("div",{className:"vote-limit-input-section",children:[v.jsx("label",{htmlFor:"votes-per-user",children:"Votes per user:"}),v.jsxs("div",{className:"vote-limit-input-container",children:[v.jsx("input",{id:"votes-per-user",type:"number",min:"1",max:"20",value:o,onChange:h,className:"vote-limit-input"}),v.jsx("span",{className:"vote-limit-input-suffix",children:"votes"})]})]}),v.jsxs("div",{className:"vote-limit-examples",children:[v.jsx("p",{className:"vote-limit-examples-title",children:"Common settings:"}),v.jsx("div",{className:"vote-limit-preset-buttons",children:[1,3,5,10].map(p=>v.jsx("button",{className:`vote-limit-preset ${o===p?"active":""}`,onClick:()=>c(p),children:p},p))})]}),v.jsx("div",{className:"vote-limit-info",children:v.jsx("p",{children:"This setting controls the maximum number of votes each participant can cast across all cards and groups. Users will see their remaining vote count as they vote."})})]})}),v.jsxs("div",{className:"modal-footer",children:[v.jsx("button",{className:"primary-button",onClick:d,children:"Start Voting Phase"}),v.jsx("button",{className:"secondary-button",onClick:e,children:"Cancel"})]})]})})},rk=({showNotification:i})=>{const[e,n]=D.useState(!1),{workflowPhase:s,votesPerUser:o,updateVotesPerUser:c,startGroupingPhase:d,startInteractionsPhase:h,startInteractionRevealPhase:p,startResultsPhase:g,startPollPhase:_,startPollResultsPhase:b,goToPreviousPhase:E}=rn(),O=()=>{d(),i("Grouping phase started - cards revealed, grouping enabled")},C=()=>{n(!0)},P=se=>{c(se),h(),i(`Voting phase started - each user can cast ${se} votes`)},N=()=>{p(),i("Votes revealed! Voting is now frozen.")},U=()=>{g(),i("Results phase started - view top items by votes")},F=()=>{_(),i("Poll phase started - rate the effectiveness of this retrospective")},te=()=>{b(),i("Poll results revealed - view effectiveness ratings")},K=()=>{const se={[ce.GROUPING]:"Returned to creation phase",[ce.INTERACTIONS]:"Returned to grouping phase",[ce.INTERACTION_REVEAL]:"Returned to voting phase",[ce.RESULTS]:"Returned to voting results phase",[ce.POLL]:"Returned to results phase",[ce.POLL_RESULTS]:"Returned to poll phase"};E();const de=se[s]||"Moved to previous phase";i(de)},z=()=>{switch(s){case ce.CREATION:return v.jsxs("div",{className:"workflow-phase",children:[v.jsxs("div",{className:"phase-info",children:[v.jsx("h3",{children:"Card Creation Phase"}),v.jsx("p",{children:"Add cards to the board. When ready, reveal cards and start grouping."})]}),v.jsx("div",{className:"phase-controls",children:v.jsxs("button",{className:"btn primary-btn",onClick:O,children:[v.jsx(sc,{size:16}),"Reveal Cards & Start Grouping"]})})]});case ce.GROUPING:return v.jsxs("div",{className:"workflow-phase",children:[v.jsxs("div",{className:"phase-info",children:[v.jsx("h3",{children:"Grouping Phase"}),v.jsx("p",{children:"Cards are revealed. Group related cards together by dragging them onto each other."})]}),v.jsxs("div",{className:"phase-controls",children:[v.jsxs("button",{className:"btn primary-btn",onClick:C,children:[v.jsx(Zh,{size:16}),"Start Voting"]}),v.jsxs("button",{className:"btn secondary-btn",onClick:K,children:[v.jsx(Yi,{size:16}),"Go to Previous Phase"]})]})]});case ce.INTERACTIONS:return v.jsxs("div",{className:"workflow-phase",children:[v.jsxs("div",{className:"phase-info",children:[v.jsx("h3",{children:"Voting Phase"}),v.jsx("p",{children:"Add comments, votes, and reactions to cards and groups. Activity is hidden from other users."})]}),v.jsxs("div",{className:"phase-controls",children:[v.jsxs("button",{className:"btn primary-btn",onClick:N,children:[v.jsx(sc,{size:16}),"Reveal Votes"]}),v.jsxs("button",{className:"btn secondary-btn",onClick:K,children:[v.jsx(Yi,{size:16}),"Go to Previous Phase"]})]})]});case ce.INTERACTION_REVEAL:return v.jsxs("div",{className:"workflow-phase",children:[v.jsxs("div",{className:"phase-info",children:[v.jsx("h3",{children:"Voting Results Phase"}),v.jsx("p",{children:"All votes are now visible. Review the feedback and votes."})]}),v.jsxs("div",{className:"phase-controls",children:[v.jsxs("button",{className:"btn primary-btn",onClick:U,children:[v.jsx($h,{size:16}),"View Results"]}),v.jsxs("button",{className:"btn secondary-btn",onClick:K,children:[v.jsx(Yi,{size:16}),"Go to Previous Phase"]})]})]});case ce.RESULTS:return v.jsxs("div",{className:"workflow-phase",children:[v.jsxs("div",{className:"phase-info",children:[v.jsx("h3",{children:"Results Phase"}),v.jsx("p",{children:"Viewing the top-voted cards and groups. Use navigation to browse all results."})]}),v.jsxs("div",{className:"phase-controls",children:[v.jsxs("button",{className:"btn primary-btn",onClick:F,children:[v.jsx(rc,{size:16}),"Start Effectiveness Poll"]}),v.jsxs("button",{className:"btn secondary-btn",onClick:K,children:[v.jsx(Yi,{size:16}),"Go to Previous Phase"]})]})]});case ce.POLL:return v.jsxs("div",{className:"workflow-phase",children:[v.jsxs("div",{className:"phase-info",children:[v.jsx("h3",{children:"Effectiveness Poll"}),v.jsx("p",{children:"Rate the effectiveness of this retrospective on a scale of 1-5. Your vote is private."})]}),v.jsxs("div",{className:"phase-controls",children:[v.jsxs("button",{className:"btn primary-btn",onClick:te,children:[v.jsx(rc,{size:16}),"View Poll Results"]}),v.jsxs("button",{className:"btn secondary-btn",onClick:K,children:[v.jsx(Yi,{size:16}),"Go to Previous Phase"]})]})]});case ce.POLL_RESULTS:return v.jsxs("div",{className:"workflow-phase",children:[v.jsxs("div",{className:"phase-info",children:[v.jsx("h3",{children:"Poll Results"}),v.jsx("p",{children:"View the distribution of effectiveness ratings and overall retrospective score."})]}),v.jsx("div",{className:"phase-controls",children:v.jsxs("button",{className:"btn secondary-btn",onClick:K,children:[v.jsx(Yi,{size:16}),"Go to Previous Phase"]})})]});default:return null}};return v.jsxs("div",{className:"workflow-controls",children:[z(),v.jsx(ik,{isOpen:e,onClose:()=>n(!1),onConfirm:P,currentLimit:o})]})},sk=({boardTitle:i,handleBoardTitleChange:e,handleBoardTitleBlur:n,copyShareUrl:s,handleExportBoard:o})=>v.jsxs("div",{className:"board-title-container",children:[v.jsx("input",{type:"text",id:"board-title",placeholder:"Untitled Board",value:i,onChange:e,onBlur:n,className:"header-input"}),v.jsxs("div",{className:"action-buttons",children:[v.jsx(tk,{}),v.jsx(nk,{}),v.jsx(ek,{}),v.jsxs("button",{id:"copy-share-url",className:"btn secondary-btn btn-with-icon",title:"Copy Share URL",onClick:s,children:[v.jsx(Xh,{size:16}),"Share"]}),v.jsxs("button",{id:"export-board",className:"btn secondary-btn btn-with-icon",onClick:o,children:[v.jsx(Qh,{size:16}),"Export"]})]})]}),ak=({handleCreateNewBoard:i,sortByVotes:e,setSortByVotes:n,votingEnabled:s,updateVotingEnabled:o,downvotingEnabled:c,updateDownvotingEnabled:d,multipleVotesAllowed:h,updateMultipleVotesAllowed:p,retrospectiveMode:g,updateRetrospectiveMode:_,sortDropdownOpen:b,setSortDropdownOpen:E,resetAllVotes:O,showNotification:C,darkMode:P,updateDarkMode:N})=>{const U=X.useRef(null);return X.useEffect(()=>{const F=te=>{U.current&&!U.current.contains(te.target)&&E(!1)};return document.addEventListener("mousedown",F),()=>{document.removeEventListener("mousedown",F)}},[E]),v.jsxs("div",{className:"action-buttons",children:[v.jsxs("button",{id:"create-board",className:"btn btn-with-icon",onClick:i,children:[v.jsx(ep,{size:16}),"New Board"]}),v.jsxs("div",{className:"sort-dropdown-container",ref:U,children:[v.jsxs("button",{id:"settings-dropdown-button",className:"btn sort-dropdown-button",onClick:()=>E(!b),"aria-expanded":b,"aria-haspopup":"true",title:"Board settings and preferences",children:[v.jsx(tp,{size:16}),"Settings",v.jsx(To,{size:12,className:b?"dropdown-arrow rotated":"dropdown-arrow"})]}),b&&v.jsxs("div",{className:"sort-dropdown-menu",children:[v.jsxs("div",{className:"settings-section",children:[v.jsx("h4",{className:"settings-section-title",children:"Sort Cards"}),v.jsxs("button",{className:`sort-option ${e?"":"selected"}`,onClick:()=>{n(!1)},children:[v.jsx(Gh,{size:14}),"Chronological",!e&&v.jsx("span",{className:"checkmark",children:"✓"})]}),v.jsxs("button",{className:`sort-option ${e?"selected":""}`,onClick:()=>{n(!0)},children:[v.jsx(ip,{size:14}),"By Votes",e&&v.jsx("span",{className:"checkmark",children:"✓"})]})]}),v.jsx("div",{className:"settings-divider"}),v.jsxs("div",{className:"settings-section",children:[v.jsx("h4",{className:"settings-section-title",children:"Allow voting?"}),v.jsxs("div",{className:"settings-boolean-option",children:[v.jsx("button",{className:`boolean-option ${s?"selected":""}`,onClick:()=>{o(!0)},children:"Yes"}),v.jsx("button",{className:`boolean-option ${s?"":"selected"}`,onClick:()=>{o(!1)},children:"No"})]})]}),s&&v.jsxs(v.Fragment,{children:[v.jsx("div",{className:"settings-divider"}),v.jsxs("div",{className:"settings-section",children:[v.jsx("h4",{className:"settings-section-title",children:"Allow downvoting?"}),v.jsxs("div",{className:"settings-boolean-option",children:[v.jsx("button",{className:`boolean-option ${c?"selected":""}`,onClick:()=>{d(!0)},children:"Yes"}),v.jsx("button",{className:`boolean-option ${c?"":"selected"}`,onClick:()=>{d(!1)},children:"No"})]})]}),v.jsx("div",{className:"settings-divider"}),v.jsxs("div",{className:"settings-section",children:[v.jsx("h4",{className:"settings-section-title",children:"Allow users to vote multiple times on the same card?"}),v.jsxs("div",{className:"settings-boolean-option",children:[v.jsx("button",{className:`boolean-option ${h?"selected":""}`,onClick:()=>{p(!0)},children:"Yes"}),v.jsx("button",{className:`boolean-option ${h?"":"selected"}`,onClick:()=>{p(!1)},children:"No"})]})]}),v.jsx("div",{className:"settings-divider"}),v.jsxs("div",{className:"settings-section",children:[v.jsx("h4",{className:"settings-section-title",children:"Retrospective Mode"}),v.jsxs("div",{className:"settings-boolean-option",children:[v.jsx("button",{className:`boolean-option ${g?"selected":""}`,onClick:()=>{_(!0)},children:"On"}),v.jsx("button",{className:`boolean-option ${g?"":"selected"}`,onClick:()=>{_(!1)},children:"Off"})]}),v.jsx("p",{className:"settings-hint",children:"When enabled, new cards appear with hidden text until revealed"})]}),v.jsx("div",{className:"settings-divider"}),v.jsx("div",{className:"settings-section settings-section-padded",children:v.jsx("button",{className:"btn danger-btn settings-full-width-btn",onClick:()=>{O()&&C("All votes reset to zero")},children:"Reset all votes"})})]})]})]}),v.jsx("button",{id:"theme-toggle",className:"btn icon-btn",onClick:()=>{N(!P)},title:P?"Switch to light mode":"Switch to dark mode",children:P?v.jsx(np,{size:16}):v.jsx(Jh,{size:16})})]})},ok=({columns:i,sortByVotes:e,showNotification:n,addNewColumn:s})=>{const{retrospectiveMode:o,workflowPhase:c}=rn(),d=()=>Object.entries(i||{}).sort((p,g)=>p[0].localeCompare(g[0])),h=!o||c===ce.CREATION;return v.jsx("div",{className:"board-container",children:v.jsxs("div",{id:"board",className:"board",children:[d().map(([p,g])=>v.jsx(W2,{columnId:p,columnData:g,sortByVotes:e,showNotification:n},p)),h&&v.jsx("div",{className:"add-column-container",children:v.jsxs("button",{id:"add-column",className:"add-column",onClick:s,children:[v.jsx(Pc,{size:16}),"Add Column"]})})]})})};function lk({showNotification:i}){const[e,n]=D.useState(!1),[s,o]=D.useState(!1),{boardId:c,boardRef:d,boardTitle:h,setBoardTitle:p,columns:g,sortByVotes:_,setSortByVotes:b,votingEnabled:E,updateVotingEnabled:O,downvotingEnabled:C,updateDownvotingEnabled:P,multipleVotesAllowed:N,updateMultipleVotesAllowed:U,retrospectiveMode:F,updateRetrospectiveMode:te,createNewBoard:K,openExistingBoard:z,resetAllVotes:se,updateBoardTitle:de,user:ae,darkMode:ue,updateDarkMode:Ne,workflowPhase:be}=rn(),[fe,we]=D.useState(!1);D.useEffect(()=>{const I=new URLSearchParams(window.location.search),$=I.get("board"),ee=Sb(window.location.search);if(ee.uiPrefs&&ee.uiPrefs.darkMode!==void 0&&Ne(ee.uiPrefs.darkMode),$)z($);else if(ae){const pe=I.get("template");if(pe){const B=no.find(q=>q.id===pe);if(B){const q=K(B.columns,`${B.name} Board`,ee.boardSettings);q?Oe(q):o(!0)}else o(!0)}else o(!0)}},[ae]),D.useEffect(()=>{document.title=h?`${h} - Kanbanish`:"Kanbanish"},[h]);const Ke=I=>{const $=I.target.value;p($)},Le=()=>{de(h)},j=()=>{o(!0)},Z=(I,$=null)=>{const ee=$?`${$} Board`:"Untitled Board",pe=Sb(window.location.search),B=K(I,ee,pe.boardSettings);B&&(Oe(B),i("New board created"),o(!1))},le=()=>{!d||!c||j2(c).then(()=>{i("Column added")}).catch(()=>{})},Oe=I=>{try{const $=["voting","downvotes","multivote","votes","retro","sort","theme","template"],ee=new URL(window.location.href),pe=ee.searchParams;$.forEach(B=>pe.delete(B)),I&&pe.set("board",I),ee.search=pe.toString(),window.history.pushState({},"",ee.toString())}catch{}},T=()=>{if(c){const I=`${window.location.origin}${window.location.pathname}?board=${c}`;navigator.clipboard.writeText(I).then(()=>{i("Share URL copied to clipboard")}).catch(()=>{})}},V=()=>{n(!0),i("Preparing board export...")};return v.jsxs(v.Fragment,{children:[v.jsx("header",{children:v.jsxs("div",{className:"header-content",children:[v.jsx(sk,{boardTitle:h,handleBoardTitleChange:Ke,handleBoardTitleBlur:Le,copyShareUrl:T,handleExportBoard:V}),v.jsx(ak,{handleCreateNewBoard:j,sortByVotes:_,setSortByVotes:b,votingEnabled:E,updateVotingEnabled:O,downvotingEnabled:C,updateDownvotingEnabled:P,multipleVotesAllowed:N,updateMultipleVotesAllowed:U,retrospectiveMode:F,updateRetrospectiveMode:te,sortDropdownOpen:fe,setSortDropdownOpen:we,resetAllVotes:se,showNotification:i,darkMode:ue,updateDarkMode:Ne})]})}),F&&v.jsx(rk,{showNotification:i}),v.jsx("main",{children:F&&be===ce.RESULTS?v.jsx(J2,{showNotification:i}):F&&be===ce.POLL?v.jsx(Z2,{}):F&&be===ce.POLL_RESULTS?v.jsx(X2,{}):v.jsx(ok,{columns:g,sortByVotes:_,showNotification:i,addNewColumn:le})}),v.jsx(Q2,{isOpen:e,onClose:()=>{n(!1)},showNotification:i}),v.jsx(K2,{isOpen:s,onClose:()=>{c?o(!1):ae&&Z(["To Do","In Progress","Done"],"Default")},onSelectTemplate:Z})]})}function ck(){const[i,e]=D.useState({message:"",show:!1}),n=D.useRef(null);X.useEffect(()=>()=>{n.current&&clearTimeout(n.current)},[]);const s=o=>{n.current&&clearTimeout(n.current),e({message:o,show:!0}),n.current=setTimeout(()=>{e({message:"",show:!1}),n.current=null},3e3)};return v.jsx(Ww,{backend:HO,children:v.jsx(M2,{children:v.jsxs("div",{className:"App","data-testid":"app-container",children:[v.jsx(lk,{showNotification:s}),v.jsx("div",{id:"notification",className:`notification ${i.show?"show":""}`,children:v.jsx("span",{id:"notification-message",children:i.message})})]})})})}const uk=DC.createRoot(document.getElementById("root"));uk.render(v.jsx(X.StrictMode,{children:v.jsx(ck,{})}));
